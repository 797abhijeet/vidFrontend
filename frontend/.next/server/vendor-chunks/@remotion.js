"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@remotion";
exports.ids = ["vendor-chunks/@remotion"];
exports.modules = {

/***/ "(ssr)/./node_modules/@remotion/player/dist/esm/index.mjs":
/*!**********************************************************!*\
  !*** ./node_modules/@remotion/player/dist/esm/index.mjs ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Player: () => (/* binding */ Player),\n/* harmony export */   PlayerInternals: () => (/* binding */ PlayerInternals),\n/* harmony export */   Thumbnail: () => (/* binding */ Thumbnail)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var remotion__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! remotion */ \"(ssr)/./node_modules/remotion/dist/esm/index.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var remotion_no_react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! remotion/no-react */ \"(ssr)/./node_modules/remotion/dist/esm/no-react.mjs\");\n\"use client\";\n// src/icons.tsx\n\nvar ICON_SIZE = 25;\nvar fullscreenIconSize = 16;\nvar PlayIcon = () => {\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"svg\", {\n    width: ICON_SIZE,\n    height: ICON_SIZE,\n    viewBox: \"0 0 25 25\",\n    fill: \"none\",\n    children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", {\n      d: \"M8 6.375C7.40904 8.17576 7.06921 10.2486 7.01438 12.3871C6.95955 14.5255 7.19163 16.6547 7.6875 18.5625C9.95364 18.2995 12.116 17.6164 14.009 16.5655C15.902 15.5147 17.4755 14.124 18.6088 12.5C17.5158 10.8949 15.9949 9.51103 14.1585 8.45082C12.3222 7.3906 10.2174 6.68116 8 6.375Z\",\n      fill: \"white\",\n      stroke: \"white\",\n      strokeWidth: \"6.25\",\n      strokeLinejoin: \"round\"\n    })\n  });\n};\nvar PauseIcon = () => {\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"svg\", {\n    viewBox: \"0 0 100 100\",\n    width: ICON_SIZE,\n    height: ICON_SIZE,\n    children: [\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"rect\", {\n        x: \"25\",\n        y: \"20\",\n        width: \"20\",\n        height: \"60\",\n        fill: \"#fff\",\n        ry: \"5\",\n        rx: \"5\"\n      }),\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"rect\", {\n        x: \"55\",\n        y: \"20\",\n        width: \"20\",\n        height: \"60\",\n        fill: \"#fff\",\n        ry: \"5\",\n        rx: \"5\"\n      })\n    ]\n  });\n};\nvar FullscreenIcon = ({\n  isFullscreen\n}) => {\n  const strokeWidth = 6;\n  const viewSize = 32;\n  const out = isFullscreen ? 0 : strokeWidth / 2;\n  const middleInset = isFullscreen ? strokeWidth * 1.6 : strokeWidth / 2;\n  const inset = isFullscreen ? strokeWidth * 1.6 : strokeWidth * 2;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"svg\", {\n    viewBox: `0 0 ${viewSize} ${viewSize}`,\n    height: fullscreenIconSize,\n    width: fullscreenIconSize,\n    children: [\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", {\n        d: `\n\t\t\t\tM ${out} ${inset}\n\t\t\t\tL ${middleInset} ${middleInset}\n\t\t\t\tL ${inset} ${out}\n\t\t\t\t`,\n        stroke: \"#fff\",\n        strokeWidth,\n        fill: \"none\"\n      }),\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", {\n        d: `\n\t\t\t\tM ${viewSize - out} ${inset}\n\t\t\t\tL ${viewSize - middleInset} ${middleInset}\n\t\t\t\tL ${viewSize - inset} ${out}\n\t\t\t\t`,\n        stroke: \"#fff\",\n        strokeWidth,\n        fill: \"none\"\n      }),\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", {\n        d: `\n\t\t\t\tM ${out} ${viewSize - inset}\n\t\t\t\tL ${middleInset} ${viewSize - middleInset}\n\t\t\t\tL ${inset} ${viewSize - out}\n\t\t\t\t`,\n        stroke: \"#fff\",\n        strokeWidth,\n        fill: \"none\"\n      }),\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", {\n        d: `\n\t\t\t\tM ${viewSize - out} ${viewSize - inset}\n\t\t\t\tL ${viewSize - middleInset} ${viewSize - middleInset}\n\t\t\t\tL ${viewSize - inset} ${viewSize - out}\n\t\t\t\t`,\n        stroke: \"#fff\",\n        strokeWidth,\n        fill: \"none\"\n      })\n    ]\n  });\n};\nvar VolumeOffIcon = () => {\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"svg\", {\n    width: ICON_SIZE,\n    height: ICON_SIZE,\n    viewBox: \"0 0 24 24\",\n    children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", {\n      d: \"M3.63 3.63a.996.996 0 000 1.41L7.29 8.7 7 9H4c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1h3l3.29 3.29c.63.63 1.71.18 1.71-.71v-4.17l4.18 4.18c-.49.37-1.02.68-1.6.91-.36.15-.58.53-.58.92 0 .72.73 1.18 1.39.91.8-.33 1.55-.77 2.22-1.31l1.34 1.34a.996.996 0 101.41-1.41L5.05 3.63c-.39-.39-1.02-.39-1.42 0zM19 12c0 .82-.15 1.61-.41 2.34l1.53 1.53c.56-1.17.88-2.48.88-3.87 0-3.83-2.4-7.11-5.78-8.4-.59-.23-1.22.23-1.22.86v.19c0 .38.25.71.61.85C17.18 6.54 19 9.06 19 12zm-8.71-6.29l-.17.17L12 7.76V6.41c0-.89-1.08-1.33-1.71-.7zM16.5 12A4.5 4.5 0 0014 7.97v1.79l2.48 2.48c.01-.08.02-.16.02-.24z\",\n      fill: \"#fff\"\n    })\n  });\n};\nvar VolumeOnIcon = () => {\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"svg\", {\n    width: ICON_SIZE,\n    height: ICON_SIZE,\n    viewBox: \"0 0 24 24\",\n    children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", {\n      d: \"M3 10v4c0 .55.45 1 1 1h3l3.29 3.29c.63.63 1.71.18 1.71-.71V6.41c0-.89-1.08-1.34-1.71-.71L7 9H4c-.55 0-1 .45-1 1zm13.5 2A4.5 4.5 0 0014 7.97v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 4.45v.2c0 .38.25.71.6.85C17.18 6.53 19 9.06 19 12s-1.82 5.47-4.4 6.5c-.36.14-.6.47-.6.85v.2c0 .63.63 1.07 1.21.85C18.6 19.11 21 15.84 21 12s-2.4-7.11-5.79-8.4c-.58-.23-1.21.22-1.21.85z\",\n      fill: \"#fff\"\n    })\n  });\n};\n\n// src/BufferingIndicator.tsx\n\nvar className = \"__remotion_buffering_indicator\";\nvar remotionBufferingAnimation = \"__remotion_buffering_animation\";\nvar playerStyle = {\n  width: ICON_SIZE,\n  height: ICON_SIZE,\n  overflow: \"hidden\",\n  lineHeight: \"normal\",\n  fontSize: \"inherit\"\n};\nvar studioStyle = {\n  width: 14,\n  height: 14,\n  overflow: \"hidden\",\n  lineHeight: \"normal\",\n  fontSize: \"inherit\"\n};\nvar BufferingIndicator = ({ type }) => {\n  const style = type === \"player\" ? playerStyle : studioStyle;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n    children: [\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"style\", {\n        type: \"text/css\",\n        children: `\n\t\t\t\t@keyframes ${remotionBufferingAnimation} {\n          0% {\n            rotate: 0deg;\n          }\n          100% {\n            rotate: 360deg;\n          }\n        }\n        \n        .${className} {\n            animation: ${remotionBufferingAnimation} 1s linear infinite;\n        }        \n\t\t\t`\n      }),\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n        style,\n        children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"svg\", {\n          viewBox: type === \"player\" ? \"0 0 22 22\" : \"0 0 18 18\",\n          style,\n          className,\n          children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", {\n            d: type === \"player\" ? \"M 11 4 A 7 7 0 0 1 15.1145 16.66312\" : \"M 9 2 A 7 7 0 0 1 13.1145 14.66312\",\n            stroke: \"white\",\n            strokeLinecap: \"round\",\n            fill: \"none\",\n            strokeWidth: 3\n          })\n        })\n      })\n    ]\n  });\n};\n\n// src/calculate-scale.ts\n\n\n// src/utils/calculate-player-size.ts\nvar calculatePlayerSize = ({\n  currentSize,\n  width,\n  height,\n  compositionWidth,\n  compositionHeight\n}) => {\n  if (width !== undefined && height === undefined) {\n    return {\n      aspectRatio: [compositionWidth, compositionHeight].join(\"/\")\n    };\n  }\n  if (height !== undefined && width === undefined) {\n    return {\n      aspectRatio: [compositionWidth, compositionHeight].join(\"/\")\n    };\n  }\n  if (!currentSize) {\n    return {\n      width: compositionWidth,\n      height: compositionHeight\n    };\n  }\n  return {\n    width: compositionWidth,\n    height: compositionHeight\n  };\n};\n\n// src/calculate-scale.ts\nvar calculateCanvasTransformation = ({\n  previewSize,\n  compositionWidth,\n  compositionHeight,\n  canvasSize\n}) => {\n  const scale = remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.calculateScale({\n    canvasSize,\n    compositionHeight,\n    compositionWidth,\n    previewSize\n  });\n  const correction = 0 - (1 - scale) / 2;\n  const xCorrection = correction * compositionWidth;\n  const yCorrection = correction * compositionHeight;\n  const width = compositionWidth * scale;\n  const height = compositionHeight * scale;\n  const centerX = canvasSize.width / 2 - width / 2;\n  const centerY = canvasSize.height / 2 - height / 2;\n  return {\n    centerX,\n    centerY,\n    xCorrection,\n    yCorrection,\n    scale\n  };\n};\nvar calculateOuterStyle = ({\n  config,\n  style,\n  canvasSize,\n  overflowVisible,\n  layout\n}) => {\n  if (!config) {\n    return {};\n  }\n  return {\n    position: \"relative\",\n    overflow: overflowVisible ? \"visible\" : \"hidden\",\n    ...calculatePlayerSize({\n      compositionHeight: config.height,\n      compositionWidth: config.width,\n      currentSize: canvasSize,\n      height: style?.height,\n      width: style?.width\n    }),\n    opacity: layout ? 1 : 0,\n    ...style\n  };\n};\nvar calculateContainerStyle = ({\n  config,\n  layout,\n  scale,\n  overflowVisible\n}) => {\n  if (!config) {\n    return {};\n  }\n  if (!layout) {\n    return {\n      position: \"absolute\",\n      width: config.width,\n      height: config.height,\n      display: \"flex\",\n      transform: `scale(${scale})`,\n      overflow: overflowVisible ? \"visible\" : \"hidden\"\n    };\n  }\n  return {\n    position: \"absolute\",\n    width: config.width,\n    height: config.height,\n    display: \"flex\",\n    transform: `scale(${scale})`,\n    marginLeft: layout.xCorrection,\n    marginTop: layout.yCorrection,\n    overflow: overflowVisible ? \"visible\" : \"hidden\"\n  };\n};\nvar calculateOuter = ({\n  layout,\n  scale,\n  config,\n  overflowVisible\n}) => {\n  if (!config) {\n    return {};\n  }\n  if (!layout) {\n    return {\n      width: config.width * scale,\n      height: config.height * scale,\n      display: \"flex\",\n      flexDirection: \"column\",\n      position: \"absolute\",\n      overflow: overflowVisible ? \"visible\" : \"hidden\"\n    };\n  }\n  const { centerX, centerY } = layout;\n  return {\n    width: config.width * scale,\n    height: config.height * scale,\n    display: \"flex\",\n    flexDirection: \"column\",\n    position: \"absolute\",\n    left: centerX,\n    top: centerY,\n    overflow: overflowVisible ? \"visible\" : \"hidden\"\n  };\n};\n\n// src/emitter-context.ts\n\nvar PlayerEventEmitterContext = react__WEBPACK_IMPORTED_MODULE_2__.createContext(undefined);\nvar ThumbnailEmitterContext = react__WEBPACK_IMPORTED_MODULE_2__.createContext(undefined);\n\n// src/EmitterProvider.tsx\n\n\n\n// src/event-emitter.ts\nclass PlayerEmitter {\n  listeners = {\n    ended: [],\n    error: [],\n    pause: [],\n    play: [],\n    ratechange: [],\n    scalechange: [],\n    seeked: [],\n    timeupdate: [],\n    frameupdate: [],\n    fullscreenchange: [],\n    volumechange: [],\n    mutechange: [],\n    waiting: [],\n    resume: []\n  };\n  addEventListener(name, callback) {\n    this.listeners[name].push(callback);\n  }\n  removeEventListener(name, callback) {\n    this.listeners[name] = this.listeners[name].filter((l) => l !== callback);\n  }\n  dispatchEvent(dispatchName, context) {\n    this.listeners[dispatchName].forEach((callback) => {\n      callback({ detail: context });\n    });\n  }\n  dispatchSeek = (frame) => {\n    this.dispatchEvent(\"seeked\", {\n      frame\n    });\n  };\n  dispatchVolumeChange = (volume) => {\n    this.dispatchEvent(\"volumechange\", {\n      volume\n    });\n  };\n  dispatchPause = () => {\n    this.dispatchEvent(\"pause\", undefined);\n  };\n  dispatchPlay = () => {\n    this.dispatchEvent(\"play\", undefined);\n  };\n  dispatchEnded = () => {\n    this.dispatchEvent(\"ended\", undefined);\n  };\n  dispatchRateChange = (playbackRate) => {\n    this.dispatchEvent(\"ratechange\", {\n      playbackRate\n    });\n  };\n  dispatchScaleChange = (scale) => {\n    this.dispatchEvent(\"scalechange\", {\n      scale\n    });\n  };\n  dispatchError = (error) => {\n    this.dispatchEvent(\"error\", {\n      error\n    });\n  };\n  dispatchTimeUpdate = (event) => {\n    this.dispatchEvent(\"timeupdate\", event);\n  };\n  dispatchFrameUpdate = (event) => {\n    this.dispatchEvent(\"frameupdate\", event);\n  };\n  dispatchFullscreenChange = (event) => {\n    this.dispatchEvent(\"fullscreenchange\", event);\n  };\n  dispatchMuteChange = (event) => {\n    this.dispatchEvent(\"mutechange\", event);\n  };\n  dispatchWaiting = (event) => {\n    this.dispatchEvent(\"waiting\", event);\n  };\n  dispatchResume = (event) => {\n    this.dispatchEvent(\"resume\", event);\n  };\n}\n\nclass ThumbnailEmitter {\n  listeners = {\n    error: [],\n    waiting: [],\n    resume: []\n  };\n  addEventListener(name, callback) {\n    this.listeners[name].push(callback);\n  }\n  removeEventListener(name, callback) {\n    this.listeners[name] = this.listeners[name].filter((l) => l !== callback);\n  }\n  dispatchEvent(dispatchName, context) {\n    this.listeners[dispatchName].forEach((callback) => {\n      callback({ detail: context });\n    });\n  }\n  dispatchError = (error) => {\n    this.dispatchEvent(\"error\", {\n      error\n    });\n  };\n  dispatchWaiting = (event) => {\n    this.dispatchEvent(\"waiting\", event);\n  };\n  dispatchResume = (event) => {\n    this.dispatchEvent(\"resume\", event);\n  };\n}\n\n// src/use-buffer-state-emitter.ts\n\n\nvar useBufferStateEmitter = (emitter) => {\n  const bufferManager = (0,react__WEBPACK_IMPORTED_MODULE_2__.useContext)(remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.BufferingContextReact);\n  if (!bufferManager) {\n    throw new Error(\"BufferingContextReact not found\");\n  }\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    const clear1 = bufferManager.listenForBuffering(() => {\n      bufferManager.buffering.current = true;\n      emitter.dispatchWaiting({});\n    });\n    const clear2 = bufferManager.listenForResume(() => {\n      bufferManager.buffering.current = false;\n      emitter.dispatchResume({});\n    });\n    return () => {\n      clear1.remove();\n      clear2.remove();\n    };\n  }, [bufferManager, emitter]);\n};\n\n// src/EmitterProvider.tsx\n\nvar PlayerEmitterProvider = ({ children, currentPlaybackRate }) => {\n  const [emitter] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(() => new PlayerEmitter);\n  const bufferManager = (0,react__WEBPACK_IMPORTED_MODULE_2__.useContext)(remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.BufferingContextReact);\n  if (!bufferManager) {\n    throw new Error(\"BufferingContextReact not found\");\n  }\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    if (currentPlaybackRate) {\n      emitter.dispatchRateChange(currentPlaybackRate);\n    }\n  }, [emitter, currentPlaybackRate]);\n  useBufferStateEmitter(emitter);\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(PlayerEventEmitterContext.Provider, {\n    value: emitter,\n    children\n  });\n};\n\n// src/use-frame-imperative.ts\n\n\nvar useFrameImperative = () => {\n  const frame = remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.Timeline.useTimelinePosition();\n  const frameRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(frame);\n  frameRef.current = frame;\n  const getCurrentFrame = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(() => {\n    return frameRef.current;\n  }, []);\n  return getCurrentFrame;\n};\n\n// src/use-hover-state.ts\n\nvar useHoverState = (ref, hideControlsWhenPointerDoesntMove) => {\n  const [hovered, setHovered] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    const { current } = ref;\n    if (!current) {\n      return;\n    }\n    let hoverTimeout;\n    const addHoverTimeout = () => {\n      if (hideControlsWhenPointerDoesntMove) {\n        clearTimeout(hoverTimeout);\n        hoverTimeout = setTimeout(() => {\n          setHovered(false);\n        }, hideControlsWhenPointerDoesntMove === true ? 3000 : hideControlsWhenPointerDoesntMove);\n      }\n    };\n    const onHover = () => {\n      setHovered(true);\n      addHoverTimeout();\n    };\n    const onLeave = () => {\n      setHovered(false);\n      clearTimeout(hoverTimeout);\n    };\n    const onMove = () => {\n      setHovered(true);\n      addHoverTimeout();\n    };\n    current.addEventListener(\"mouseenter\", onHover);\n    current.addEventListener(\"mouseleave\", onLeave);\n    current.addEventListener(\"mousemove\", onMove);\n    return () => {\n      current.removeEventListener(\"mouseenter\", onHover);\n      current.removeEventListener(\"mouseleave\", onLeave);\n      current.removeEventListener(\"mousemove\", onMove);\n      clearTimeout(hoverTimeout);\n    };\n  }, [hideControlsWhenPointerDoesntMove, ref]);\n  return hovered;\n};\n\n// src/use-playback.ts\n\n\n\n// src/browser-mediasession.ts\n\n\n// src/use-player.ts\n\n\nvar usePlayer = () => {\n  const [playing, setPlaying, imperativePlaying] = remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.Timeline.usePlayingState();\n  const [hasPlayed, setHasPlayed] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n  const frame = remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.Timeline.useTimelinePosition();\n  const playStart = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(frame);\n  const setFrame = remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.Timeline.useTimelineSetFrame();\n  const setTimelinePosition = remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.Timeline.useTimelineSetFrame();\n  const audioContext = (0,react__WEBPACK_IMPORTED_MODULE_2__.useContext)(remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.SharedAudioContext);\n  const { audioAndVideoTags } = (0,react__WEBPACK_IMPORTED_MODULE_2__.useContext)(remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.TimelineContext);\n  const frameRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(frame);\n  frameRef.current = frame;\n  const video = remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.useVideo();\n  const config = remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.useUnsafeVideoConfig();\n  const emitter = (0,react__WEBPACK_IMPORTED_MODULE_2__.useContext)(PlayerEventEmitterContext);\n  const lastFrame = (config?.durationInFrames ?? 1) - 1;\n  const isLastFrame = frame === lastFrame;\n  const isFirstFrame = frame === 0;\n  if (!emitter) {\n    throw new TypeError(\"Expected Player event emitter context\");\n  }\n  const bufferingContext = (0,react__WEBPACK_IMPORTED_MODULE_2__.useContext)(remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.BufferingContextReact);\n  if (!bufferingContext) {\n    throw new Error(\"Missing the buffering context. Most likely you have a Remotion version mismatch.\");\n  }\n  const { buffering } = bufferingContext;\n  const seek = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((newFrame) => {\n    if (video?.id) {\n      setTimelinePosition((c) => ({ ...c, [video.id]: newFrame }));\n    }\n    frameRef.current = newFrame;\n    emitter.dispatchSeek(newFrame);\n  }, [emitter, setTimelinePosition, video?.id]);\n  const play = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((e) => {\n    if (imperativePlaying.current) {\n      return;\n    }\n    setHasPlayed(true);\n    if (isLastFrame) {\n      seek(0);\n    }\n    audioContext?.audioContext?.resume();\n    if (audioContext && audioContext.numberOfAudioTags > 0 && e) {\n      audioContext.playAllAudios();\n    }\n    audioAndVideoTags.current.forEach((a) => a.play(\"player play() was called and playing audio from a click\"));\n    imperativePlaying.current = true;\n    setPlaying(true);\n    playStart.current = frameRef.current;\n    emitter.dispatchPlay();\n  }, [\n    imperativePlaying,\n    isLastFrame,\n    audioContext,\n    setPlaying,\n    emitter,\n    seek,\n    audioAndVideoTags\n  ]);\n  const pause = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(() => {\n    if (imperativePlaying.current) {\n      imperativePlaying.current = false;\n      setPlaying(false);\n      emitter.dispatchPause();\n      audioContext?.audioContext?.suspend();\n    }\n  }, [emitter, imperativePlaying, setPlaying, audioContext]);\n  const pauseAndReturnToPlayStart = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(() => {\n    if (imperativePlaying.current) {\n      imperativePlaying.current = false;\n      frameRef.current = playStart.current;\n      if (config) {\n        setTimelinePosition((c) => ({\n          ...c,\n          [config.id]: playStart.current\n        }));\n        setPlaying(false);\n        emitter.dispatchPause();\n      }\n    }\n  }, [config, emitter, imperativePlaying, setPlaying, setTimelinePosition]);\n  const videoId = video?.id;\n  const frameBack = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((frames) => {\n    if (!videoId) {\n      return null;\n    }\n    if (imperativePlaying.current) {\n      return;\n    }\n    setFrame((c) => {\n      const prevFrame = c[videoId] ?? window.remotion_initialFrame ?? 0;\n      const newFrame = Math.max(0, prevFrame - frames);\n      if (prevFrame === newFrame) {\n        return c;\n      }\n      return {\n        ...c,\n        [videoId]: newFrame\n      };\n    });\n  }, [imperativePlaying, setFrame, videoId]);\n  const frameForward = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((frames) => {\n    if (!videoId) {\n      return null;\n    }\n    if (imperativePlaying.current) {\n      return;\n    }\n    setFrame((c) => {\n      const prevFrame = c[videoId] ?? window.remotion_initialFrame ?? 0;\n      const newFrame = Math.min(lastFrame, prevFrame + frames);\n      if (prevFrame === newFrame) {\n        return c;\n      }\n      return {\n        ...c,\n        [videoId]: newFrame\n      };\n    });\n  }, [videoId, imperativePlaying, lastFrame, setFrame]);\n  const toggle = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((e) => {\n    if (imperativePlaying.current) {\n      pause();\n    } else {\n      play(e);\n    }\n  }, [imperativePlaying, pause, play]);\n  const returnValue = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    return {\n      frameBack,\n      frameForward,\n      isLastFrame,\n      emitter,\n      playing,\n      play,\n      pause,\n      seek,\n      isFirstFrame,\n      getCurrentFrame: () => frameRef.current,\n      isPlaying: () => imperativePlaying.current,\n      isBuffering: () => buffering.current,\n      pauseAndReturnToPlayStart,\n      hasPlayed,\n      toggle\n    };\n  }, [\n    buffering,\n    emitter,\n    frameBack,\n    frameForward,\n    hasPlayed,\n    imperativePlaying,\n    isFirstFrame,\n    isLastFrame,\n    pause,\n    pauseAndReturnToPlayStart,\n    play,\n    playing,\n    seek,\n    toggle\n  ]);\n  return returnValue;\n};\n\n// src/browser-mediasession.ts\nvar useBrowserMediaSession = ({\n  browserMediaControlsBehavior,\n  videoConfig,\n  playbackRate\n}) => {\n  const { playing, pause, play, emitter, getCurrentFrame, seek } = usePlayer();\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    if (!navigator.mediaSession) {\n      return;\n    }\n    if (browserMediaControlsBehavior.mode === \"do-nothing\") {\n      return;\n    }\n    if (playing) {\n      navigator.mediaSession.playbackState = \"playing\";\n    } else {\n      navigator.mediaSession.playbackState = \"paused\";\n    }\n  }, [browserMediaControlsBehavior.mode, playing]);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    if (!navigator.mediaSession) {\n      return;\n    }\n    if (browserMediaControlsBehavior.mode === \"do-nothing\") {\n      return;\n    }\n    const onTimeUpdate = () => {\n      if (!videoConfig) {\n        return;\n      }\n      if (navigator.mediaSession) {\n        navigator.mediaSession.setPositionState({\n          duration: videoConfig.durationInFrames / videoConfig.fps,\n          playbackRate,\n          position: getCurrentFrame() / videoConfig.fps\n        });\n      }\n    };\n    emitter.addEventListener(\"timeupdate\", onTimeUpdate);\n    return () => {\n      emitter.removeEventListener(\"timeupdate\", onTimeUpdate);\n    };\n  }, [\n    browserMediaControlsBehavior.mode,\n    emitter,\n    getCurrentFrame,\n    playbackRate,\n    videoConfig\n  ]);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    if (!navigator.mediaSession) {\n      return;\n    }\n    if (browserMediaControlsBehavior.mode === \"do-nothing\") {\n      return;\n    }\n    navigator.mediaSession.setActionHandler(\"play\", () => {\n      if (browserMediaControlsBehavior.mode === \"register-media-session\") {\n        play();\n      }\n    });\n    navigator.mediaSession.setActionHandler(\"pause\", () => {\n      if (browserMediaControlsBehavior.mode === \"register-media-session\") {\n        pause();\n      }\n    });\n    navigator.mediaSession.setActionHandler(\"seekto\", (event) => {\n      if (browserMediaControlsBehavior.mode === \"register-media-session\" && event.seekTime !== undefined && videoConfig) {\n        seek(Math.round(event.seekTime * videoConfig.fps));\n      }\n    });\n    navigator.mediaSession.setActionHandler(\"seekbackward\", () => {\n      if (browserMediaControlsBehavior.mode === \"register-media-session\" && videoConfig) {\n        seek(Math.max(0, Math.round((getCurrentFrame() - 10) * videoConfig.fps)));\n      }\n    });\n    navigator.mediaSession.setActionHandler(\"seekforward\", () => {\n      if (browserMediaControlsBehavior.mode === \"register-media-session\" && videoConfig) {\n        seek(Math.max(videoConfig.durationInFrames - 1, Math.round((getCurrentFrame() + 10) * videoConfig.fps)));\n      }\n    });\n    navigator.mediaSession.setActionHandler(\"previoustrack\", () => {\n      if (browserMediaControlsBehavior.mode === \"register-media-session\") {\n        seek(0);\n      }\n    });\n    return () => {\n      navigator.mediaSession.metadata = null;\n      navigator.mediaSession.setActionHandler(\"play\", null);\n      navigator.mediaSession.setActionHandler(\"pause\", null);\n      navigator.mediaSession.setActionHandler(\"seekto\", null);\n      navigator.mediaSession.setActionHandler(\"seekbackward\", null);\n      navigator.mediaSession.setActionHandler(\"seekforward\", null);\n      navigator.mediaSession.setActionHandler(\"previoustrack\", null);\n    };\n  }, [\n    browserMediaControlsBehavior.mode,\n    getCurrentFrame,\n    pause,\n    play,\n    seek,\n    videoConfig\n  ]);\n};\n\n// src/calculate-next-frame.ts\nvar calculateNextFrame = ({\n  time,\n  currentFrame: startFrame,\n  playbackSpeed,\n  fps,\n  actualLastFrame,\n  actualFirstFrame,\n  framesAdvanced,\n  shouldLoop\n}) => {\n  const op = playbackSpeed < 0 ? Math.ceil : Math.floor;\n  const framesToAdvance = op(time * playbackSpeed / (1000 / fps)) - framesAdvanced;\n  const nextFrame = framesToAdvance + startFrame;\n  const isCurrentFrameOutside = startFrame > actualLastFrame || startFrame < actualFirstFrame;\n  const isNextFrameOutside = nextFrame > actualLastFrame || nextFrame < actualFirstFrame;\n  const hasEnded = !shouldLoop && isNextFrameOutside && !isCurrentFrameOutside;\n  if (playbackSpeed > 0) {\n    if (isNextFrameOutside) {\n      return {\n        nextFrame: actualFirstFrame,\n        framesToAdvance,\n        hasEnded\n      };\n    }\n    return { nextFrame, framesToAdvance, hasEnded };\n  }\n  if (isNextFrameOutside) {\n    return { nextFrame: actualLastFrame, framesToAdvance, hasEnded };\n  }\n  return { nextFrame, framesToAdvance, hasEnded };\n};\n\n// src/is-backgrounded.ts\n\nvar getIsBackgrounded = () => {\n  if (typeof document === \"undefined\") {\n    return false;\n  }\n  return document.visibilityState === \"hidden\";\n};\nvar useIsBackgrounded = () => {\n  const isBackgrounded = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(getIsBackgrounded());\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    const onVisibilityChange = () => {\n      isBackgrounded.current = getIsBackgrounded();\n    };\n    document.addEventListener(\"visibilitychange\", onVisibilityChange);\n    return () => {\n      document.removeEventListener(\"visibilitychange\", onVisibilityChange);\n    };\n  }, []);\n  return isBackgrounded;\n};\n\n// src/use-playback.ts\nvar usePlayback = ({\n  loop,\n  playbackRate,\n  moveToBeginningWhenEnded,\n  inFrame,\n  outFrame,\n  browserMediaControlsBehavior,\n  getCurrentFrame\n}) => {\n  const config = remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.useUnsafeVideoConfig();\n  const frame = remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.Timeline.useTimelinePosition();\n  const { playing, pause, emitter } = usePlayer();\n  const setFrame = remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.Timeline.useTimelineSetFrame();\n  const isBackgroundedRef = useIsBackgrounded();\n  const lastTimeUpdateEvent = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n  const context = (0,react__WEBPACK_IMPORTED_MODULE_2__.useContext)(remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.BufferingContextReact);\n  if (!context) {\n    throw new Error(\"Missing the buffering context. Most likely you have a Remotion version mismatch.\");\n  }\n  useBrowserMediaSession({\n    browserMediaControlsBehavior,\n    playbackRate,\n    videoConfig: config\n  });\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    if (!config) {\n      return;\n    }\n    if (!playing) {\n      return;\n    }\n    let hasBeenStopped = false;\n    let reqAnimFrameCall = null;\n    let startedTime = performance.now();\n    let framesAdvanced = 0;\n    const cancelQueuedFrame = () => {\n      if (reqAnimFrameCall !== null) {\n        if (reqAnimFrameCall.type === \"raf\") {\n          cancelAnimationFrame(reqAnimFrameCall.id);\n        } else {\n          clearTimeout(reqAnimFrameCall.id);\n        }\n      }\n    };\n    const stop = () => {\n      hasBeenStopped = true;\n      cancelQueuedFrame();\n    };\n    const callback = () => {\n      if (hasBeenStopped) {\n        return;\n      }\n      const time = performance.now() - startedTime;\n      const actualLastFrame = outFrame ?? config.durationInFrames - 1;\n      const actualFirstFrame = inFrame ?? 0;\n      const currentFrame = getCurrentFrame();\n      const { nextFrame, framesToAdvance, hasEnded } = calculateNextFrame({\n        time,\n        currentFrame,\n        playbackSpeed: playbackRate,\n        fps: config.fps,\n        actualFirstFrame,\n        actualLastFrame,\n        framesAdvanced,\n        shouldLoop: loop\n      });\n      framesAdvanced += framesToAdvance;\n      if (nextFrame !== getCurrentFrame() && (!hasEnded || moveToBeginningWhenEnded)) {\n        setFrame((c) => ({ ...c, [config.id]: nextFrame }));\n      }\n      if (hasEnded) {\n        stop();\n        pause();\n        emitter.dispatchEnded();\n        return;\n      }\n      queueNextFrame();\n    };\n    const queueNextFrame = () => {\n      if (context.buffering.current) {\n        const stopListening = context.listenForResume(() => {\n          stopListening.remove();\n          startedTime = performance.now();\n          framesAdvanced = 0;\n          queueNextFrame();\n        });\n        return;\n      }\n      if (isBackgroundedRef.current) {\n        reqAnimFrameCall = {\n          type: \"timeout\",\n          id: setTimeout(callback, 1000 / config.fps)\n        };\n        return;\n      }\n      reqAnimFrameCall = { type: \"raf\", id: requestAnimationFrame(callback) };\n    };\n    queueNextFrame();\n    const onVisibilityChange = () => {\n      if (document.visibilityState === \"visible\") {\n        return;\n      }\n      cancelQueuedFrame();\n      callback();\n    };\n    window.addEventListener(\"visibilitychange\", onVisibilityChange);\n    return () => {\n      window.removeEventListener(\"visibilitychange\", onVisibilityChange);\n      stop();\n    };\n  }, [\n    config,\n    loop,\n    pause,\n    playing,\n    setFrame,\n    emitter,\n    playbackRate,\n    inFrame,\n    outFrame,\n    moveToBeginningWhenEnded,\n    isBackgroundedRef,\n    getCurrentFrame,\n    context\n  ]);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    const interval = setInterval(() => {\n      if (lastTimeUpdateEvent.current === getCurrentFrame()) {\n        return;\n      }\n      emitter.dispatchTimeUpdate({ frame: getCurrentFrame() });\n      lastTimeUpdateEvent.current = getCurrentFrame();\n    }, 250);\n    return () => clearInterval(interval);\n  }, [emitter, getCurrentFrame]);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    emitter.dispatchFrameUpdate({ frame });\n  }, [emitter, frame]);\n};\n\n// src/utils/use-element-size.ts\n\nvar elementSizeHooks = [];\nvar updateAllElementsSizes = () => {\n  for (const listener of elementSizeHooks) {\n    listener();\n  }\n};\nvar useElementSize = (ref, options) => {\n  const [size, setSize] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(() => {\n    if (!ref.current) {\n      return null;\n    }\n    const rect = ref.current.getClientRects();\n    if (!rect[0]) {\n      return null;\n    }\n    return {\n      width: rect[0].width,\n      height: rect[0].height,\n      left: rect[0].x,\n      top: rect[0].y,\n      windowSize: {\n        height: window.innerHeight,\n        width: window.innerWidth\n      }\n    };\n  });\n  const observer = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    if (typeof ResizeObserver === \"undefined\") {\n      return null;\n    }\n    return new ResizeObserver((entries) => {\n      const { contentRect, target } = entries[0];\n      const newSize = target.getClientRects();\n      if (!newSize?.[0]) {\n        setSize(null);\n        return;\n      }\n      const probableCssParentScale = contentRect.width === 0 ? 1 : newSize[0].width / contentRect.width;\n      const width = options.shouldApplyCssTransforms || probableCssParentScale === 0 ? newSize[0].width : newSize[0].width * (1 / probableCssParentScale);\n      const height = options.shouldApplyCssTransforms || probableCssParentScale === 0 ? newSize[0].height : newSize[0].height * (1 / probableCssParentScale);\n      setSize((prevState) => {\n        const isSame = prevState && prevState.width === width && prevState.height === height && prevState.left === newSize[0].x && prevState.top === newSize[0].y && prevState.windowSize.height === window.innerHeight && prevState.windowSize.width === window.innerWidth;\n        if (isSame) {\n          return prevState;\n        }\n        return {\n          width,\n          height,\n          left: newSize[0].x,\n          top: newSize[0].y,\n          windowSize: {\n            height: window.innerHeight,\n            width: window.innerWidth\n          }\n        };\n      });\n    });\n  }, [options.shouldApplyCssTransforms]);\n  const updateSize = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(() => {\n    if (!ref.current) {\n      return;\n    }\n    const rect = ref.current.getClientRects();\n    if (!rect[0]) {\n      setSize(null);\n      return;\n    }\n    setSize((prevState) => {\n      const isSame = prevState && prevState.width === rect[0].width && prevState.height === rect[0].height && prevState.left === rect[0].x && prevState.top === rect[0].y && prevState.windowSize.height === window.innerHeight && prevState.windowSize.width === window.innerWidth;\n      if (isSame) {\n        return prevState;\n      }\n      return {\n        width: rect[0].width,\n        height: rect[0].height,\n        left: rect[0].x,\n        top: rect[0].y,\n        windowSize: {\n          height: window.innerHeight,\n          width: window.innerWidth\n        }\n      };\n    });\n  }, [ref]);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    if (!observer) {\n      return;\n    }\n    const { current } = ref;\n    if (current) {\n      observer.observe(current);\n    }\n    return () => {\n      if (current) {\n        observer.unobserve(current);\n      }\n    };\n  }, [observer, ref, updateSize]);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    if (!options.triggerOnWindowResize) {\n      return;\n    }\n    window.addEventListener(\"resize\", updateSize);\n    return () => {\n      window.removeEventListener(\"resize\", updateSize);\n    };\n  }, [options.triggerOnWindowResize, updateSize]);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    elementSizeHooks.push(updateSize);\n    return () => {\n      elementSizeHooks = elementSizeHooks.filter((e) => e !== updateSize);\n    };\n  }, [updateSize]);\n  return (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    if (!size) {\n      return null;\n    }\n    return { ...size, refresh: updateSize };\n  }, [size, updateSize]);\n};\n\n// src/Player.tsx\n\n\n\n// src/PlayerUI.tsx\n\n\n\n// src/PlayerControls.tsx\n\n\n// src/DefaultPlayPauseButton.tsx\n\nvar DefaultPlayPauseButton = ({ playing, buffering }) => {\n  if (playing && buffering) {\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(BufferingIndicator, {\n      type: \"player\"\n    });\n  }\n  if (playing) {\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(PauseIcon, {});\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(PlayIcon, {});\n};\n\n// src/MediaVolumeSlider.tsx\n\n\n\n// src/render-volume-slider.tsx\n\n\n\nvar KNOB_SIZE = 12;\nvar BAR_HEIGHT = 5;\nvar DefaultVolumeSlider = ({\n  volume,\n  isVertical,\n  onBlur,\n  inputRef,\n  setVolume\n}) => {\n  const sliderContainer = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    const paddingLeft = 5;\n    const common = {\n      paddingLeft,\n      height: ICON_SIZE,\n      width: VOLUME_SLIDER_WIDTH,\n      display: \"inline-flex\",\n      alignItems: \"center\"\n    };\n    if (isVertical) {\n      return {\n        ...common,\n        position: \"absolute\",\n        transform: `rotate(-90deg) translateX(${VOLUME_SLIDER_WIDTH / 2 + ICON_SIZE / 2}px)`\n      };\n    }\n    return {\n      ...common\n    };\n  }, [isVertical]);\n  const randomId = typeof react__WEBPACK_IMPORTED_MODULE_2__.useId === \"undefined\" ? \"volume-slider\" : react__WEBPACK_IMPORTED_MODULE_2__.useId();\n  const [randomClass] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(() => `__remotion-volume-slider-${(0,remotion__WEBPACK_IMPORTED_MODULE_1__.random)(randomId)}`.replace(\".\", \"\"));\n  const onVolumeChange = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((e) => {\n    setVolume(parseFloat(e.target.value));\n  }, [setVolume]);\n  const inputStyle = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    const commonStyle = {\n      WebkitAppearance: \"none\",\n      backgroundColor: \"rgba(255, 255, 255, 0.5)\",\n      borderRadius: BAR_HEIGHT / 2,\n      cursor: \"pointer\",\n      height: BAR_HEIGHT,\n      width: VOLUME_SLIDER_WIDTH,\n      backgroundImage: `linear-gradient(\n\t\t\t\tto right,\n\t\t\t\twhite ${volume * 100}%, rgba(255, 255, 255, 0) ${volume * 100}%\n\t\t\t)`\n    };\n    if (isVertical) {\n      return {\n        ...commonStyle,\n        bottom: ICON_SIZE + VOLUME_SLIDER_WIDTH / 2\n      };\n    }\n    return commonStyle;\n  }, [isVertical, volume]);\n  const sliderStyle = `\n\t.${randomClass}::-webkit-slider-thumb {\n\t\t-webkit-appearance: none;\n\t\tbackground-color: white;\n\t\tborder-radius: ${KNOB_SIZE / 2}px;\n\t\tbox-shadow: 0 0 2px black;\n\t\theight: ${KNOB_SIZE}px;\n\t\twidth: ${KNOB_SIZE}px;\n\t}\n\n\t.${randomClass}::-moz-range-thumb {\n\t\t-webkit-appearance: none;\n\t\tbackground-color: white;\n\t\tborder-radius: ${KNOB_SIZE / 2}px;\n\t\tbox-shadow: 0 0 2px black;\n\t\theight: ${KNOB_SIZE}px;\n\t\twidth: ${KNOB_SIZE}px;\n\t}\n`;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", {\n    style: sliderContainer,\n    children: [\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"style\", {\n        dangerouslySetInnerHTML: {\n          __html: sliderStyle\n        }\n      }),\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"input\", {\n        ref: inputRef,\n        \"aria-label\": \"Change volume\",\n        className: randomClass,\n        max: 1,\n        min: 0,\n        onBlur,\n        onChange: onVolumeChange,\n        step: 0.01,\n        type: \"range\",\n        value: volume,\n        style: inputStyle\n      })\n    ]\n  });\n};\nvar renderDefaultVolumeSlider = (props) => {\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DefaultVolumeSlider, {\n    ...props\n  });\n};\n\n// src/MediaVolumeSlider.tsx\n\nvar VOLUME_SLIDER_WIDTH = 100;\nvar MediaVolumeSlider = ({ displayVerticalVolumeSlider, renderMuteButton, renderVolumeSlider }) => {\n  const [mediaMuted, setMediaMuted] = remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.useMediaMutedState();\n  const [mediaVolume, setMediaVolume] = remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.useMediaVolumeState();\n  const [focused, setFocused] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n  const parentDivRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n  const inputRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n  const hover = useHoverState(parentDivRef, false);\n  const onBlur = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(() => {\n    setTimeout(() => {\n      if (inputRef.current && document.activeElement !== inputRef.current) {\n        setFocused(false);\n      }\n    }, 10);\n  }, []);\n  const isVolume0 = mediaVolume === 0;\n  const onClick = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(() => {\n    if (isVolume0) {\n      setMediaVolume(1);\n      setMediaMuted(false);\n      return;\n    }\n    setMediaMuted((mute) => !mute);\n  }, [isVolume0, setMediaMuted, setMediaVolume]);\n  const parentDivStyle = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    return {\n      display: \"inline-flex\",\n      background: \"none\",\n      border: \"none\",\n      justifyContent: \"center\",\n      alignItems: \"center\",\n      touchAction: \"none\",\n      ...displayVerticalVolumeSlider && { position: \"relative\" }\n    };\n  }, [displayVerticalVolumeSlider]);\n  const volumeContainer = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    return {\n      display: \"inline\",\n      width: ICON_SIZE,\n      height: ICON_SIZE,\n      cursor: \"pointer\",\n      appearance: \"none\",\n      background: \"none\",\n      border: \"none\",\n      padding: 0\n    };\n  }, []);\n  const renderDefaultMuteButton = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(({ muted, volume }) => {\n    const isMutedOrZero = muted || volume === 0;\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"button\", {\n      \"aria-label\": isMutedOrZero ? \"Unmute sound\" : \"Mute sound\",\n      title: isMutedOrZero ? \"Unmute sound\" : \"Mute sound\",\n      onClick,\n      onBlur,\n      onFocus: () => setFocused(true),\n      style: volumeContainer,\n      type: \"button\",\n      children: isMutedOrZero ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(VolumeOffIcon, {}) : /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(VolumeOnIcon, {})\n    });\n  }, [onBlur, onClick, volumeContainer]);\n  const muteButton = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    return renderMuteButton ? renderMuteButton({ muted: mediaMuted, volume: mediaVolume }) : renderDefaultMuteButton({ muted: mediaMuted, volume: mediaVolume });\n  }, [mediaMuted, mediaVolume, renderDefaultMuteButton, renderMuteButton]);\n  const volumeSlider = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    return (focused || hover) && !mediaMuted && !remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.isIosSafari() ? (renderVolumeSlider ?? renderDefaultVolumeSlider)({\n      isVertical: displayVerticalVolumeSlider,\n      volume: mediaVolume,\n      onBlur: () => setFocused(false),\n      inputRef,\n      setVolume: setMediaVolume\n    }) : null;\n  }, [\n    displayVerticalVolumeSlider,\n    focused,\n    hover,\n    mediaMuted,\n    mediaVolume,\n    renderVolumeSlider,\n    setMediaVolume\n  ]);\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", {\n    ref: parentDivRef,\n    style: parentDivStyle,\n    children: [\n      muteButton,\n      volumeSlider\n    ]\n  });\n};\n\n// src/PlaybackrateControl.tsx\n\n\n\n// src/utils/use-component-visible.ts\n\nfunction useComponentVisible(initialIsVisible) {\n  const [isComponentVisible, setIsComponentVisible] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(initialIsVisible);\n  const ref = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    const handleClickOutside = (event) => {\n      if (ref.current && !ref.current.contains(event.target)) {\n        setIsComponentVisible(false);\n      }\n    };\n    document.addEventListener(\"pointerup\", handleClickOutside, true);\n    return () => {\n      document.removeEventListener(\"pointerup\", handleClickOutside, true);\n    };\n  }, []);\n  return { ref, isComponentVisible, setIsComponentVisible };\n}\n\n// src/PlaybackrateControl.tsx\n\nvar BOTTOM = 35;\nvar THRESHOLD = 70;\nvar rateDiv = {\n  height: 30,\n  paddingRight: 15,\n  paddingLeft: 12,\n  display: \"flex\",\n  flexDirection: \"row\",\n  alignItems: \"center\"\n};\nvar checkmarkContainer = {\n  width: 22,\n  display: \"flex\",\n  alignItems: \"center\"\n};\nvar checkmarkStyle = {\n  width: 14,\n  height: 14,\n  color: \"black\"\n};\nvar Checkmark = () => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"svg\", {\n  viewBox: \"0 0 512 512\",\n  style: checkmarkStyle,\n  children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", {\n    fill: \"currentColor\",\n    d: \"M435.848 83.466L172.804 346.51l-96.652-96.652c-4.686-4.686-12.284-4.686-16.971 0l-28.284 28.284c-4.686 4.686-4.686 12.284 0 16.971l133.421 133.421c4.686 4.686 12.284 4.686 16.971 0l299.813-299.813c4.686-4.686 4.686-12.284 0-16.971l-28.284-28.284c-4.686-4.686-12.284-4.686-16.97 0z\"\n  })\n});\nvar formatPlaybackRate = (rate) => {\n  const str = rate.toString();\n  return str.includes(\".\") ? str : str + \".0\";\n};\nvar PlaybackrateOption = ({ rate, onSelect, selectedRate, keyboardSelectedRate }) => {\n  const onClick = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((e) => {\n    e.stopPropagation();\n    e.preventDefault();\n    onSelect(rate);\n  }, [onSelect, rate]);\n  const [hovered, setHovered] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n  const onMouseEnter = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(() => {\n    setHovered(true);\n  }, []);\n  const onMouseLeave = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(() => {\n    setHovered(false);\n  }, []);\n  const isFocused = keyboardSelectedRate === rate;\n  const actualStyle = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    return {\n      ...rateDiv,\n      backgroundColor: hovered || isFocused ? \"#eee\" : \"transparent\"\n    };\n  }, [hovered, isFocused]);\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", {\n    onPointerEnter: onMouseEnter,\n    onPointerLeave: onMouseLeave,\n    tabIndex: 0,\n    style: actualStyle,\n    onClick,\n    children: [\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n        style: checkmarkContainer,\n        children: rate === selectedRate ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Checkmark, {}) : null\n      }),\n      formatPlaybackRate(rate),\n      \"x\"\n    ]\n  }, rate);\n};\nvar PlaybackPopup = ({ setIsComponentVisible, playbackRates, canvasSize }) => {\n  const { setPlaybackRate, playbackRate } = (0,react__WEBPACK_IMPORTED_MODULE_2__.useContext)(remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.TimelineContext);\n  const [keyboardSelectedRate, setKeyboardSelectedRate] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(playbackRate);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    const listener = (e) => {\n      e.preventDefault();\n      if (e.key === \"ArrowUp\") {\n        const currentIndex = playbackRates.findIndex((rate) => rate === keyboardSelectedRate);\n        if (currentIndex === 0) {\n          return;\n        }\n        if (currentIndex === -1) {\n          setKeyboardSelectedRate(playbackRates[0]);\n        } else {\n          setKeyboardSelectedRate(playbackRates[currentIndex - 1]);\n        }\n      } else if (e.key === \"ArrowDown\") {\n        const currentIndex = playbackRates.findIndex((rate) => rate === keyboardSelectedRate);\n        if (currentIndex === playbackRates.length - 1) {\n          return;\n        }\n        if (currentIndex === -1) {\n          setKeyboardSelectedRate(playbackRates[playbackRates.length - 1]);\n        } else {\n          setKeyboardSelectedRate(playbackRates[currentIndex + 1]);\n        }\n      } else if (e.key === \"Enter\") {\n        setPlaybackRate(keyboardSelectedRate);\n        setIsComponentVisible(false);\n      }\n    };\n    window.addEventListener(\"keydown\", listener);\n    return () => {\n      window.removeEventListener(\"keydown\", listener);\n    };\n  }, [\n    playbackRates,\n    keyboardSelectedRate,\n    setPlaybackRate,\n    setIsComponentVisible\n  ]);\n  const onSelect = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((rate) => {\n    setPlaybackRate(rate);\n    setIsComponentVisible(false);\n  }, [setIsComponentVisible, setPlaybackRate]);\n  const playbackPopup = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    return {\n      position: \"absolute\",\n      right: 0,\n      width: 125,\n      maxHeight: canvasSize.height - THRESHOLD - BOTTOM,\n      bottom: 35,\n      background: \"#fff\",\n      borderRadius: 4,\n      overflow: \"auto\",\n      color: \"black\",\n      textAlign: \"left\"\n    };\n  }, [canvasSize.height]);\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n    style: playbackPopup,\n    children: playbackRates.map((rate) => {\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(PlaybackrateOption, {\n        selectedRate: playbackRate,\n        onSelect,\n        rate,\n        keyboardSelectedRate\n      }, rate);\n    })\n  });\n};\nvar label = {\n  fontSize: 13,\n  fontWeight: \"bold\",\n  color: \"white\",\n  border: \"2px solid white\",\n  borderRadius: 20,\n  paddingLeft: 8,\n  paddingRight: 8,\n  paddingTop: 2,\n  paddingBottom: 2\n};\nvar playerButtonStyle = {\n  appearance: \"none\",\n  backgroundColor: \"transparent\",\n  border: \"none\",\n  cursor: \"pointer\",\n  paddingLeft: 0,\n  paddingRight: 0,\n  paddingTop: 6,\n  paddingBottom: 6,\n  height: 37,\n  display: \"inline-flex\",\n  marginBottom: 0,\n  marginTop: 0,\n  alignItems: \"center\"\n};\nvar button = {\n  ...playerButtonStyle,\n  position: \"relative\"\n};\nvar PlaybackrateControl = ({ playbackRates, canvasSize }) => {\n  const { ref, isComponentVisible, setIsComponentVisible } = useComponentVisible(false);\n  const { playbackRate } = (0,react__WEBPACK_IMPORTED_MODULE_2__.useContext)(remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.TimelineContext);\n  const onClick = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((e) => {\n    e.stopPropagation();\n    e.preventDefault();\n    setIsComponentVisible((prevIsComponentVisible) => !prevIsComponentVisible);\n  }, [setIsComponentVisible]);\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n    ref,\n    children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"button\", {\n      type: \"button\",\n      \"aria-label\": \"Change playback rate\",\n      style: button,\n      onClick,\n      children: [\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", {\n          style: label,\n          children: [\n            playbackRate,\n            \"x\"\n          ]\n        }),\n        isComponentVisible && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(PlaybackPopup, {\n          canvasSize,\n          playbackRates,\n          setIsComponentVisible\n        })\n      ]\n    })\n  });\n};\n\n// src/PlayerSeekBar.tsx\n\n\n\nvar getFrameFromX = (clientX, durationInFrames, width) => {\n  const pos = clientX;\n  const frame = Math.round((0,remotion__WEBPACK_IMPORTED_MODULE_1__.interpolate)(pos, [0, width], [0, durationInFrames - 1], {\n    extrapolateLeft: \"clamp\",\n    extrapolateRight: \"clamp\"\n  }));\n  return frame;\n};\nvar BAR_HEIGHT2 = 5;\nvar KNOB_SIZE2 = 12;\nvar VERTICAL_PADDING = 4;\nvar containerStyle = {\n  userSelect: \"none\",\n  WebkitUserSelect: \"none\",\n  paddingTop: VERTICAL_PADDING,\n  paddingBottom: VERTICAL_PADDING,\n  boxSizing: \"border-box\",\n  cursor: \"pointer\",\n  position: \"relative\",\n  touchAction: \"none\"\n};\nvar barBackground = {\n  height: BAR_HEIGHT2,\n  backgroundColor: \"rgba(255, 255, 255, 0.25)\",\n  width: \"100%\",\n  borderRadius: BAR_HEIGHT2 / 2\n};\nvar findBodyInWhichDivIsLocated = (div) => {\n  let current = div;\n  while (current.parentElement) {\n    current = current.parentElement;\n  }\n  return current;\n};\nvar PlayerSeekBar = ({ durationInFrames, onSeekEnd, onSeekStart, inFrame, outFrame }) => {\n  const containerRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n  const barHovered = useHoverState(containerRef, false);\n  const size = useElementSize(containerRef, {\n    triggerOnWindowResize: true,\n    shouldApplyCssTransforms: true\n  });\n  const { seek, play, pause, playing } = usePlayer();\n  const frame = remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.Timeline.useTimelinePosition();\n  const [dragging, setDragging] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)({\n    dragging: false\n  });\n  const width = size?.width ?? 0;\n  const onPointerDown = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((e) => {\n    if (e.button !== 0) {\n      return;\n    }\n    const posLeft = containerRef.current?.getBoundingClientRect().left;\n    const _frame = getFrameFromX(e.clientX - posLeft, durationInFrames, width);\n    pause();\n    seek(_frame);\n    setDragging({\n      dragging: true,\n      wasPlaying: playing\n    });\n    onSeekStart();\n  }, [durationInFrames, width, pause, seek, playing, onSeekStart]);\n  const onPointerMove = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((e) => {\n    if (!size) {\n      throw new Error(\"Player has no size\");\n    }\n    if (!dragging.dragging) {\n      return;\n    }\n    const posLeft = containerRef.current?.getBoundingClientRect().left;\n    const _frame = getFrameFromX(e.clientX - posLeft, durationInFrames, size.width);\n    seek(_frame);\n  }, [dragging.dragging, durationInFrames, seek, size]);\n  const onPointerUp = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(() => {\n    setDragging({\n      dragging: false\n    });\n    if (!dragging.dragging) {\n      return;\n    }\n    if (dragging.wasPlaying) {\n      play();\n    } else {\n      pause();\n    }\n    onSeekEnd();\n  }, [dragging, onSeekEnd, pause, play]);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    if (!dragging.dragging) {\n      return;\n    }\n    const body = findBodyInWhichDivIsLocated(containerRef.current);\n    body.addEventListener(\"pointermove\", onPointerMove);\n    body.addEventListener(\"pointerup\", onPointerUp);\n    return () => {\n      body.removeEventListener(\"pointermove\", onPointerMove);\n      body.removeEventListener(\"pointerup\", onPointerUp);\n    };\n  }, [dragging.dragging, onPointerMove, onPointerUp]);\n  const knobStyle = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    return {\n      height: KNOB_SIZE2,\n      width: KNOB_SIZE2,\n      borderRadius: KNOB_SIZE2 / 2,\n      position: \"absolute\",\n      top: VERTICAL_PADDING - KNOB_SIZE2 / 2 + 5 / 2,\n      backgroundColor: \"white\",\n      left: Math.max(0, frame / Math.max(1, durationInFrames - 1) * width - KNOB_SIZE2 / 2),\n      boxShadow: \"0 0 2px black\",\n      opacity: Number(barHovered || dragging.dragging)\n    };\n  }, [barHovered, dragging.dragging, durationInFrames, frame, width]);\n  const fillStyle = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    return {\n      height: BAR_HEIGHT2,\n      backgroundColor: \"rgba(255, 255, 255, 1)\",\n      width: (frame - (inFrame ?? 0)) / (durationInFrames - 1) * width,\n      marginLeft: (inFrame ?? 0) / (durationInFrames - 1) * width,\n      borderRadius: BAR_HEIGHT2 / 2\n    };\n  }, [durationInFrames, frame, inFrame, width]);\n  const active = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    return {\n      height: BAR_HEIGHT2,\n      backgroundColor: \"rgba(255, 255, 255, 0.25)\",\n      width: ((outFrame ?? durationInFrames - 1) - (inFrame ?? 0)) / (durationInFrames - 1) * 100 + \"%\",\n      marginLeft: (inFrame ?? 0) / (durationInFrames - 1) * 100 + \"%\",\n      borderRadius: BAR_HEIGHT2 / 2,\n      position: \"absolute\"\n    };\n  }, [durationInFrames, inFrame, outFrame]);\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", {\n    ref: containerRef,\n    onPointerDown,\n    style: containerStyle,\n    children: [\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", {\n        style: barBackground,\n        children: [\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n            style: active\n          }),\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n            style: fillStyle\n          })\n        ]\n      }),\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n        style: knobStyle\n      })\n    ]\n  });\n};\n\n// src/PlayerTimeLabel.tsx\n\n\n\n// src/format-time.ts\nvar formatTime = (timeInSeconds) => {\n  const minutes = Math.floor(timeInSeconds / 60);\n  const seconds = Math.floor(timeInSeconds - minutes * 60);\n  return `${String(minutes)}:${String(seconds).padStart(2, \"0\")}`;\n};\n\n// src/PlayerTimeLabel.tsx\n\nvar PlayerTimeLabel = ({ durationInFrames, maxTimeLabelWidth, fps }) => {\n  const frame = remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.Timeline.useTimelinePosition();\n  const timeLabel = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    return {\n      color: \"white\",\n      fontFamily: \"sans-serif\",\n      fontSize: 14,\n      maxWidth: maxTimeLabelWidth === null ? undefined : maxTimeLabelWidth,\n      overflow: \"hidden\",\n      textOverflow: \"ellipsis\"\n    };\n  }, [maxTimeLabelWidth]);\n  const isLastFrame = frame === durationInFrames - 1;\n  const frameToDisplay = isLastFrame ? frame + 1 : frame;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", {\n    style: timeLabel,\n    children: [\n      formatTime(frameToDisplay / fps),\n      \" / \",\n      formatTime(durationInFrames / fps)\n    ]\n  });\n};\n\n// src/use-video-controls-resize.ts\n\nvar X_SPACER = 10;\nvar X_PADDING = 12;\nvar useVideoControlsResize = ({\n  allowFullscreen: allowFullScreen,\n  playerWidth\n}) => {\n  const resizeInfo = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    const playPauseIconSize = ICON_SIZE;\n    const volumeIconSize = ICON_SIZE;\n    const _fullscreenIconSize = allowFullScreen ? fullscreenIconSize : 0;\n    const elementsSize = volumeIconSize + playPauseIconSize + _fullscreenIconSize + X_PADDING * 2 + X_SPACER * 2;\n    const maxTimeLabelWidth = playerWidth - elementsSize;\n    const maxTimeLabelWidthWithoutNegativeValue = Math.max(maxTimeLabelWidth, 0);\n    const availableTimeLabelWidthIfVolumeOpen = maxTimeLabelWidthWithoutNegativeValue - VOLUME_SLIDER_WIDTH;\n    const computedLabelWidth = availableTimeLabelWidthIfVolumeOpen < VOLUME_SLIDER_WIDTH ? maxTimeLabelWidthWithoutNegativeValue : availableTimeLabelWidthIfVolumeOpen;\n    const minWidthForHorizontalDisplay = computedLabelWidth + elementsSize + VOLUME_SLIDER_WIDTH;\n    const displayVerticalVolumeSlider = playerWidth < minWidthForHorizontalDisplay;\n    return {\n      maxTimeLabelWidth: maxTimeLabelWidthWithoutNegativeValue === 0 ? null : maxTimeLabelWidthWithoutNegativeValue,\n      displayVerticalVolumeSlider\n    };\n  }, [allowFullScreen, playerWidth]);\n  return resizeInfo;\n};\n\n// src/PlayerControls.tsx\n\nvar gradientSteps = [\n  0,\n  0.013,\n  0.049,\n  0.104,\n  0.175,\n  0.259,\n  0.352,\n  0.45,\n  0.55,\n  0.648,\n  0.741,\n  0.825,\n  0.896,\n  0.951,\n  0.987\n];\nvar gradientOpacities = [\n  0,\n  8.1,\n  15.5,\n  22.5,\n  29,\n  35.3,\n  41.2,\n  47.1,\n  52.9,\n  58.8,\n  64.7,\n  71,\n  77.5,\n  84.5,\n  91.9\n];\nvar globalGradientOpacity = 1 / 0.7;\nvar containerStyle2 = {\n  boxSizing: \"border-box\",\n  position: \"absolute\",\n  bottom: 0,\n  width: \"100%\",\n  paddingTop: 40,\n  paddingBottom: 10,\n  backgroundImage: `linear-gradient(to bottom,${gradientSteps.map((g, i) => {\n    return `hsla(0, 0%, 0%, ${g}) ${gradientOpacities[i] * globalGradientOpacity}%`;\n  }).join(\", \")}, hsl(0, 0%, 0%) 100%)`,\n  backgroundSize: \"auto 145px\",\n  display: \"flex\",\n  paddingRight: X_PADDING,\n  paddingLeft: X_PADDING,\n  flexDirection: \"column\",\n  transition: \"opacity 0.3s\"\n};\nvar controlsRow = {\n  display: \"flex\",\n  flexDirection: \"row\",\n  width: \"100%\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  userSelect: \"none\",\n  WebkitUserSelect: \"none\"\n};\nvar leftPartStyle = {\n  display: \"flex\",\n  flexDirection: \"row\",\n  userSelect: \"none\",\n  WebkitUserSelect: \"none\",\n  alignItems: \"center\"\n};\nvar xSpacer = {\n  width: 12\n};\nvar ySpacer = {\n  height: 8\n};\nvar flex1 = {\n  flex: 1\n};\nvar fullscreen = {};\nvar Controls = ({\n  durationInFrames,\n  isFullscreen,\n  fps,\n  showVolumeControls,\n  onFullscreenButtonClick,\n  allowFullscreen,\n  onExitFullscreenButtonClick,\n  spaceKeyToPlayOrPause,\n  onSeekEnd,\n  onSeekStart,\n  inFrame,\n  outFrame,\n  initiallyShowControls,\n  canvasSize,\n  renderPlayPauseButton,\n  renderFullscreenButton,\n  alwaysShowControls,\n  showPlaybackRateControl,\n  containerRef,\n  buffering,\n  hideControlsWhenPointerDoesntMove,\n  onPointerDown,\n  onDoubleClick,\n  renderMuteButton,\n  renderVolumeSlider,\n  playing,\n  toggle\n}) => {\n  const playButtonRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n  const [supportsFullscreen, setSupportsFullscreen] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n  const hovered = useHoverState(containerRef, hideControlsWhenPointerDoesntMove);\n  const { maxTimeLabelWidth, displayVerticalVolumeSlider } = useVideoControlsResize({\n    allowFullscreen,\n    playerWidth: canvasSize?.width ?? 0\n  });\n  const [shouldShowInitially, setInitiallyShowControls] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(() => {\n    if (typeof initiallyShowControls === \"boolean\") {\n      return initiallyShowControls;\n    }\n    if (typeof initiallyShowControls === \"number\") {\n      if (initiallyShowControls % 1 !== 0) {\n        throw new Error(\"initiallyShowControls must be an integer or a boolean\");\n      }\n      if (Number.isNaN(initiallyShowControls)) {\n        throw new Error(\"initiallyShowControls must not be NaN\");\n      }\n      if (!Number.isFinite(initiallyShowControls)) {\n        throw new Error(\"initiallyShowControls must be finite\");\n      }\n      if (initiallyShowControls <= 0) {\n        throw new Error(\"initiallyShowControls must be a positive integer\");\n      }\n      return initiallyShowControls;\n    }\n    throw new TypeError(\"initiallyShowControls must be a number or a boolean\");\n  });\n  const containerCss = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    const shouldShow = hovered || !playing || shouldShowInitially || alwaysShowControls;\n    return {\n      ...containerStyle2,\n      opacity: Number(shouldShow)\n    };\n  }, [hovered, shouldShowInitially, playing, alwaysShowControls]);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    if (playButtonRef.current && spaceKeyToPlayOrPause) {\n      playButtonRef.current.focus({\n        preventScroll: true\n      });\n    }\n  }, [playing, spaceKeyToPlayOrPause]);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    setSupportsFullscreen((typeof document !== \"undefined\" && (document.fullscreenEnabled || document.webkitFullscreenEnabled)) ?? false);\n  }, []);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    if (shouldShowInitially === false) {\n      return;\n    }\n    const time = shouldShowInitially === true ? 2000 : shouldShowInitially;\n    const timeout = setTimeout(() => {\n      setInitiallyShowControls(false);\n    }, time);\n    return () => {\n      clearInterval(timeout);\n    };\n  }, [shouldShowInitially]);\n  const playbackRates = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    if (showPlaybackRateControl === true) {\n      return [0.5, 0.8, 1, 1.2, 1.5, 1.8, 2, 2.5, 3];\n    }\n    if (Array.isArray(showPlaybackRateControl)) {\n      for (const rate of showPlaybackRateControl) {\n        if (typeof rate !== \"number\") {\n          throw new Error(\"Every item in showPlaybackRateControl must be a number\");\n        }\n        if (rate <= 0) {\n          throw new Error(\"Every item in showPlaybackRateControl must be positive\");\n        }\n      }\n      return showPlaybackRateControl;\n    }\n    return null;\n  }, [showPlaybackRateControl]);\n  const ref = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n  const flexRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n  const onPointerDownIfContainer = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((e) => {\n    if (e.target === ref.current || e.target === flexRef.current) {\n      onPointerDown?.(e);\n    }\n  }, [onPointerDown]);\n  const onDoubleClickIfContainer = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((e) => {\n    if (e.target === ref.current || e.target === flexRef.current) {\n      onDoubleClick?.(e);\n    }\n  }, [onDoubleClick]);\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", {\n    ref,\n    style: containerCss,\n    onPointerDown: onPointerDownIfContainer,\n    onDoubleClick: onDoubleClickIfContainer,\n    children: [\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", {\n        ref: flexRef,\n        style: controlsRow,\n        children: [\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", {\n            style: leftPartStyle,\n            children: [\n              /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"button\", {\n                ref: playButtonRef,\n                type: \"button\",\n                style: playerButtonStyle,\n                onClick: toggle,\n                \"aria-label\": playing ? \"Pause video\" : \"Play video\",\n                title: playing ? \"Pause video\" : \"Play video\",\n                children: renderPlayPauseButton === null ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DefaultPlayPauseButton, {\n                  buffering,\n                  playing\n                }) : renderPlayPauseButton({\n                  playing,\n                  isBuffering: buffering\n                }) ?? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DefaultPlayPauseButton, {\n                  buffering,\n                  playing\n                })\n              }),\n              showVolumeControls ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                children: [\n                  /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n                    style: xSpacer\n                  }),\n                  /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(MediaVolumeSlider, {\n                    renderMuteButton,\n                    renderVolumeSlider,\n                    displayVerticalVolumeSlider\n                  })\n                ]\n              }) : null,\n              /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n                style: xSpacer\n              }),\n              /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(PlayerTimeLabel, {\n                durationInFrames,\n                fps,\n                maxTimeLabelWidth\n              }),\n              /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n                style: xSpacer\n              })\n            ]\n          }),\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n            style: flex1\n          }),\n          playbackRates && canvasSize && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(PlaybackrateControl, {\n            canvasSize,\n            playbackRates\n          }),\n          playbackRates && supportsFullscreen && allowFullscreen ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n            style: xSpacer\n          }) : null,\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n            style: fullscreen,\n            children: supportsFullscreen && allowFullscreen ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"button\", {\n              type: \"button\",\n              \"aria-label\": isFullscreen ? \"Exit fullscreen\" : \"Enter Fullscreen\",\n              title: isFullscreen ? \"Exit fullscreen\" : \"Enter Fullscreen\",\n              style: playerButtonStyle,\n              onClick: isFullscreen ? onExitFullscreenButtonClick : onFullscreenButtonClick,\n              children: renderFullscreenButton === null ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(FullscreenIcon, {\n                isFullscreen\n              }) : renderFullscreenButton({ isFullscreen })\n            }) : null\n          })\n        ]\n      }),\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n        style: ySpacer\n      }),\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(PlayerSeekBar, {\n        onSeekEnd,\n        onSeekStart,\n        durationInFrames,\n        inFrame,\n        outFrame\n      })\n    ]\n  });\n};\n\n// src/error-boundary.tsx\n\n\nvar errorStyle = {\n  display: \"flex\",\n  justifyContent: \"center\",\n  alignItems: \"center\",\n  flex: 1,\n  height: \"100%\",\n  width: \"100%\"\n};\n\nclass ErrorBoundary extends react__WEBPACK_IMPORTED_MODULE_2__.Component {\n  state = { hasError: null };\n  static getDerivedStateFromError(error) {\n    return { hasError: error };\n  }\n  componentDidCatch(error) {\n    this.props.onError(error);\n  }\n  render() {\n    if (this.state.hasError) {\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n        style: errorStyle,\n        children: this.props.errorFallback({\n          error: this.state.hasError\n        })\n      });\n    }\n    return this.props.children;\n  }\n}\n\n// src/license-blacklist.tsx\n\n\nvar getHashOfDomain = async () => {\n  if (typeof window === \"undefined\") {\n    return null;\n  }\n  if (typeof window.crypto === \"undefined\") {\n    return null;\n  }\n  if (typeof window.crypto.subtle === \"undefined\") {\n    return null;\n  }\n  try {\n    const hashBuffer = await crypto.subtle.digest(\"SHA-256\", new TextEncoder().encode(window.location.hostname));\n    return Array.from(new Uint8Array(hashBuffer)).map((b) => b.toString(16).padStart(2, \"0\")).join(\"\");\n  } catch {\n    return null;\n  }\n};\nvar style = {\n  backgroundColor: \"red\",\n  position: \"absolute\",\n  padding: 12,\n  fontFamily: \"Arial\"\n};\nvar DOMAIN_BLACKLIST = [\n  \"28d262b44cc61fa750f1686b16ad0604dabfe193fbc263eec05c89b7ad4c2cd6\",\n  \"4db1b0a94be33165dfefcb3ba03d04c7a2666dd27c496d3dc9fa41858e94925e\",\n  \"fbc48530bbf245da790f63675e84e06bab38c3b114fab07eb350025119922bdc\",\n  \"7baf10a8932757b1b3a22b3fce10a048747ac2f8eaf638603487e3705b07eb83\",\n  \"8a6c21a598d8c667272b5207c051b85997bf5b45d5fb712378be3f27cd72c6a6\",\n  \"a2f7aaac9c50a9255e7fc376110c4e0bfe153722dc66ed3c5d3bf2a135f65518\"\n];\nvar ran = false;\nvar RenderWarningIfBlacklist = () => {\n  const [unlicensed, setUnlicensed] = react__WEBPACK_IMPORTED_MODULE_2__.useState(false);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    if (ran) {\n      return;\n    }\n    ran = true;\n    getHashOfDomain().then((hash) => {\n      if (hash && DOMAIN_BLACKLIST.includes(hash)) {\n        setUnlicensed(true);\n      }\n    }).catch(() => {});\n  }, []);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    if (!unlicensed) {\n      return;\n    }\n    const ensureBanner = () => {\n      const banner = document.querySelector(\".warning-banner\");\n      if (!banner) {\n        const div = document.createElement(\"div\");\n        div.className = \"warning-banner\";\n        Object.assign(div.style, style, {\n          zIndex: \"9999\",\n          cssText: `${style.cssText} !important;`\n        });\n        div.innerHTML = `\n\t        <a href=\"https://github.com/remotion-dev/remotion/pull/4589\" style=\"color: white;\">\n\t          Remotion Unlicensed  Contact hi@remotion.dev\n\t        </a>\n\t      `;\n        document.body.appendChild(div);\n      }\n    };\n    const observer = new MutationObserver(() => ensureBanner());\n    observer.observe(document.body, { childList: true, subtree: true });\n    return () => {\n      observer.disconnect();\n    };\n  }, [unlicensed]);\n  if (!unlicensed) {\n    return null;\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n    style,\n    className: \"warning-banner\",\n    children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"a\", {\n      style: { color: \"white\" },\n      href: \"https://github.com/remotion-dev/remotion/pull/4589\",\n      children: \"Remotion Unlicensed  Contact hi@remotion.dev\"\n    })\n  });\n};\n\n// src/player-css-classname.ts\nvar playerCssClassname = (override) => {\n  return override ?? \"__remotion-player\";\n};\n\n// src/utils/is-node.ts\nvar IS_NODE = typeof document === \"undefined\";\n\n// src/utils/use-click-prevention-on-double-click.ts\n\n\n// src/utils/cancellable-promise.ts\nvar cancellablePromise = (promise) => {\n  let isCanceled = false;\n  const wrappedPromise = new Promise((resolve, reject) => {\n    promise.then((value) => {\n      if (isCanceled) {\n        reject({ isCanceled, value });\n        return;\n      }\n      resolve(value);\n    }).catch((error) => {\n      reject({ isCanceled, error });\n    });\n  });\n  return {\n    promise: wrappedPromise,\n    cancel: () => {\n      isCanceled = true;\n    }\n  };\n};\n\n// src/utils/delay.ts\nvar delay = (n) => new Promise((resolve) => setTimeout(resolve, n));\n\n// src/utils/use-cancellable-promises.ts\n\nvar useCancellablePromises = () => {\n  const pendingPromises = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)([]);\n  const appendPendingPromise = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((promise) => {\n    pendingPromises.current = [...pendingPromises.current, promise];\n  }, []);\n  const removePendingPromise = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((promise) => {\n    pendingPromises.current = pendingPromises.current.filter((p) => p !== promise);\n  }, []);\n  const clearPendingPromises = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(() => pendingPromises.current.map((p) => p.cancel()), []);\n  const api = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => ({\n    appendPendingPromise,\n    removePendingPromise,\n    clearPendingPromises\n  }), [appendPendingPromise, clearPendingPromises, removePendingPromise]);\n  return api;\n};\n\n// src/utils/use-click-prevention-on-double-click.ts\nvar useClickPreventionOnDoubleClick = (onClick, onDoubleClick, doubleClickToFullscreen) => {\n  const api = useCancellablePromises();\n  const handleClick = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(async (e) => {\n    if (e instanceof PointerEvent ? e.pointerType === \"touch\" : e.nativeEvent.pointerType === \"touch\") {\n      onClick(e);\n      return;\n    }\n    api.clearPendingPromises();\n    const waitForClick = cancellablePromise(delay(200));\n    api.appendPendingPromise(waitForClick);\n    try {\n      await waitForClick.promise;\n      api.removePendingPromise(waitForClick);\n      onClick(e);\n    } catch (errorInfo) {\n      const info = errorInfo;\n      api.removePendingPromise(waitForClick);\n      if (!info.isCanceled) {\n        throw info.error;\n      }\n    }\n  }, [api, onClick]);\n  const handlePointerDown = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(() => {\n    document.addEventListener(\"pointerup\", (newEvt) => {\n      handleClick(newEvt);\n    }, {\n      once: true\n    });\n  }, [handleClick]);\n  const handleDoubleClick = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(() => {\n    api.clearPendingPromises();\n    onDoubleClick();\n  }, [api, onDoubleClick]);\n  const returnValue = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    if (!doubleClickToFullscreen) {\n      return { handlePointerDown: onClick, handleDoubleClick: () => {\n        return;\n      } };\n    }\n    return { handlePointerDown, handleDoubleClick };\n  }, [doubleClickToFullscreen, handleDoubleClick, handlePointerDown, onClick]);\n  return returnValue;\n};\n\n// src/PlayerUI.tsx\n\nvar reactVersion = react__WEBPACK_IMPORTED_MODULE_2__.version.split(\".\")[0];\nif (reactVersion === \"0\") {\n  throw new Error(`Version ${reactVersion} of \"react\" is not supported by Remotion`);\n}\nvar doesReactVersionSupportSuspense = parseInt(reactVersion, 10) >= 18;\nvar PlayerUI = ({\n  controls,\n  style: style2,\n  loop,\n  autoPlay,\n  allowFullscreen,\n  inputProps,\n  clickToPlay,\n  showVolumeControls,\n  doubleClickToFullscreen,\n  spaceKeyToPlayOrPause,\n  errorFallback,\n  playbackRate,\n  renderLoading,\n  renderPoster,\n  className: className2,\n  moveToBeginningWhenEnded,\n  showPosterWhenUnplayed,\n  showPosterWhenEnded,\n  showPosterWhenPaused,\n  showPosterWhenBuffering,\n  showPosterWhenBufferingAndPaused,\n  inFrame,\n  outFrame,\n  initiallyShowControls,\n  renderFullscreen: renderFullscreenButton,\n  renderPlayPauseButton,\n  renderMuteButton,\n  renderVolumeSlider,\n  alwaysShowControls,\n  showPlaybackRateControl,\n  posterFillMode,\n  bufferStateDelayInMilliseconds,\n  hideControlsWhenPointerDoesntMove,\n  overflowVisible,\n  browserMediaControlsBehavior,\n  overrideInternalClassName,\n  noSuspense\n}, ref) => {\n  const config = remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.useUnsafeVideoConfig();\n  const video = remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.useVideo();\n  const container = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n  const canvasSize = useElementSize(container, {\n    triggerOnWindowResize: false,\n    shouldApplyCssTransforms: false\n  });\n  const [hasPausedToResume, setHasPausedToResume] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n  const [shouldAutoplay, setShouldAutoPlay] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(autoPlay);\n  const [isFullscreen, setIsFullscreen] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(() => false);\n  const [seeking, setSeeking] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n  const supportsFullScreen = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    if (typeof document === \"undefined\") {\n      return false;\n    }\n    return Boolean(document.fullscreenEnabled || document.webkitFullscreenEnabled);\n  }, []);\n  const player = usePlayer();\n  const playerToggle = player.toggle;\n  usePlayback({\n    loop,\n    playbackRate,\n    moveToBeginningWhenEnded,\n    inFrame,\n    outFrame,\n    getCurrentFrame: player.getCurrentFrame,\n    browserMediaControlsBehavior\n  });\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    if (hasPausedToResume && !player.playing) {\n      setHasPausedToResume(false);\n      player.play();\n    }\n  }, [hasPausedToResume, player]);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    const { current } = container;\n    if (!current) {\n      return;\n    }\n    const onFullscreenChange = () => {\n      const newValue = document.fullscreenElement === current || document.webkitFullscreenElement === current;\n      setIsFullscreen(newValue);\n    };\n    document.addEventListener(\"fullscreenchange\", onFullscreenChange);\n    document.addEventListener(\"webkitfullscreenchange\", onFullscreenChange);\n    return () => {\n      document.removeEventListener(\"fullscreenchange\", onFullscreenChange);\n      document.removeEventListener(\"webkitfullscreenchange\", onFullscreenChange);\n    };\n  }, []);\n  const toggle = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((e) => {\n    playerToggle(e);\n  }, [playerToggle]);\n  const requestFullscreen = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(() => {\n    if (!allowFullscreen) {\n      throw new Error(\"allowFullscreen is false\");\n    }\n    if (!supportsFullScreen) {\n      throw new Error(\"Browser doesnt support fullscreen\");\n    }\n    if (!container.current) {\n      throw new Error(\"No player ref found\");\n    }\n    if (container.current.webkitRequestFullScreen) {\n      container.current.webkitRequestFullScreen();\n    } else {\n      container.current.requestFullscreen();\n    }\n  }, [allowFullscreen, supportsFullScreen]);\n  const exitFullscreen = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(() => {\n    if (document.webkitExitFullscreen) {\n      document.webkitExitFullscreen();\n    } else {\n      document.exitFullscreen();\n    }\n  }, []);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    const { current } = container;\n    if (!current) {\n      return;\n    }\n    const fullscreenChange = () => {\n      const element = document.webkitFullscreenElement ?? document.fullscreenElement;\n      if (element && element === container.current) {\n        player.emitter.dispatchFullscreenChange({\n          isFullscreen: true\n        });\n      } else {\n        player.emitter.dispatchFullscreenChange({\n          isFullscreen: false\n        });\n      }\n    };\n    current.addEventListener(\"webkitfullscreenchange\", fullscreenChange);\n    current.addEventListener(\"fullscreenchange\", fullscreenChange);\n    return () => {\n      current.removeEventListener(\"webkitfullscreenchange\", fullscreenChange);\n      current.removeEventListener(\"fullscreenchange\", fullscreenChange);\n    };\n  }, [player.emitter]);\n  const durationInFrames = config?.durationInFrames ?? 1;\n  const layout = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    if (!config || !canvasSize) {\n      return null;\n    }\n    return calculateCanvasTransformation({\n      canvasSize,\n      compositionHeight: config.height,\n      compositionWidth: config.width,\n      previewSize: \"auto\"\n    });\n  }, [canvasSize, config]);\n  const scale = layout?.scale ?? 1;\n  const initialScaleIgnored = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(false);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    if (!initialScaleIgnored.current) {\n      initialScaleIgnored.current = true;\n      return;\n    }\n    player.emitter.dispatchScaleChange(scale);\n  }, [player.emitter, scale]);\n  const { setMediaVolume, setMediaMuted } = (0,react__WEBPACK_IMPORTED_MODULE_2__.useContext)(remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.SetMediaVolumeContext);\n  const { mediaMuted, mediaVolume } = (0,react__WEBPACK_IMPORTED_MODULE_2__.useContext)(remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.MediaVolumeContext);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    player.emitter.dispatchVolumeChange(mediaVolume);\n  }, [player.emitter, mediaVolume]);\n  const isMuted = mediaMuted || mediaVolume === 0;\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    player.emitter.dispatchMuteChange({\n      isMuted\n    });\n  }, [player.emitter, isMuted]);\n  const [showBufferIndicator, setShowBufferState] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    let timeout = null;\n    let stopped = false;\n    const onBuffer = () => {\n      stopped = false;\n      requestAnimationFrame(() => {\n        if (bufferStateDelayInMilliseconds === 0) {\n          setShowBufferState(true);\n        } else {\n          timeout = setTimeout(() => {\n            if (!stopped) {\n              setShowBufferState(true);\n            }\n          }, bufferStateDelayInMilliseconds);\n        }\n      });\n    };\n    const onResume = () => {\n      requestAnimationFrame(() => {\n        stopped = true;\n        setShowBufferState(false);\n        if (timeout) {\n          clearTimeout(timeout);\n        }\n      });\n    };\n    player.emitter.addEventListener(\"waiting\", onBuffer);\n    player.emitter.addEventListener(\"resume\", onResume);\n    return () => {\n      player.emitter.removeEventListener(\"waiting\", onBuffer);\n      player.emitter.removeEventListener(\"resume\", onResume);\n      setShowBufferState(false);\n      if (timeout) {\n        clearTimeout(timeout);\n      }\n      stopped = true;\n    };\n  }, [bufferStateDelayInMilliseconds, player.emitter]);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useImperativeHandle)(ref, () => {\n    const methods = {\n      play: player.play,\n      pause: () => {\n        setHasPausedToResume(false);\n        player.pause();\n      },\n      toggle,\n      getContainerNode: () => container.current,\n      getCurrentFrame: player.getCurrentFrame,\n      isPlaying: player.isPlaying,\n      seekTo: (f) => {\n        const lastFrame = durationInFrames - 1;\n        const frameToSeekTo = Math.max(0, Math.min(lastFrame, f));\n        if (player.isPlaying()) {\n          const pauseToResume = frameToSeekTo !== lastFrame || loop;\n          setHasPausedToResume(pauseToResume);\n          player.pause();\n        }\n        if (frameToSeekTo === lastFrame && !loop) {\n          player.emitter.dispatchEnded();\n        }\n        player.seek(frameToSeekTo);\n      },\n      isFullscreen: () => {\n        const { current } = container;\n        if (!current) {\n          return false;\n        }\n        return document.fullscreenElement === current || document.webkitFullscreenElement === current;\n      },\n      requestFullscreen,\n      exitFullscreen,\n      getVolume: () => {\n        if (mediaMuted) {\n          return 0;\n        }\n        return mediaVolume;\n      },\n      setVolume: (vol) => {\n        if (typeof vol !== \"number\") {\n          throw new TypeError(`setVolume() takes a number, got value of type ${typeof vol}`);\n        }\n        if (isNaN(vol)) {\n          throw new TypeError(`setVolume() got a number that is NaN. Volume must be between 0 and 1.`);\n        }\n        if (vol < 0 || vol > 1) {\n          throw new TypeError(`setVolume() got a number that is out of range. Must be between 0 and 1, got ${typeof vol}`);\n        }\n        setMediaVolume(vol);\n      },\n      isMuted: () => isMuted,\n      mute: () => {\n        setMediaMuted(true);\n      },\n      unmute: () => {\n        setMediaMuted(false);\n      },\n      getScale: () => scale,\n      pauseAndReturnToPlayStart: () => {\n        player.pauseAndReturnToPlayStart();\n      }\n    };\n    return Object.assign(player.emitter, methods);\n  }, [\n    durationInFrames,\n    exitFullscreen,\n    loop,\n    mediaMuted,\n    isMuted,\n    mediaVolume,\n    player,\n    requestFullscreen,\n    setMediaMuted,\n    setMediaVolume,\n    toggle,\n    scale\n  ]);\n  const VideoComponent = video ? video.component : null;\n  const outerStyle = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    return calculateOuterStyle({\n      canvasSize,\n      config,\n      style: style2,\n      overflowVisible,\n      layout\n    });\n  }, [canvasSize, config, layout, overflowVisible, style2]);\n  const outer = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    return calculateOuter({ config, layout, scale, overflowVisible });\n  }, [config, layout, overflowVisible, scale]);\n  const containerStyle3 = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    return calculateContainerStyle({\n      config,\n      layout,\n      scale,\n      overflowVisible\n    });\n  }, [config, layout, overflowVisible, scale]);\n  const playerPause = player.pause;\n  const playerDispatchError = player.emitter.dispatchError;\n  const onError = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((error) => {\n    playerPause();\n    playerDispatchError(error);\n  }, [playerDispatchError, playerPause]);\n  const onFullscreenButtonClick = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((e) => {\n    e.stopPropagation();\n    requestFullscreen();\n  }, [requestFullscreen]);\n  const onExitFullscreenButtonClick = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((e) => {\n    e.stopPropagation();\n    exitFullscreen();\n  }, [exitFullscreen]);\n  const onSingleClick = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((e) => {\n    const rightClick = e instanceof MouseEvent ? e.button === 2 : e.nativeEvent.button;\n    if (rightClick) {\n      return;\n    }\n    toggle(e);\n  }, [toggle]);\n  const onSeekStart = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(() => {\n    setSeeking(true);\n  }, []);\n  const onSeekEnd = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(() => {\n    setSeeking(false);\n  }, []);\n  const onDoubleClick = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(() => {\n    if (isFullscreen) {\n      exitFullscreen();\n    } else {\n      requestFullscreen();\n    }\n  }, [exitFullscreen, isFullscreen, requestFullscreen]);\n  const { handlePointerDown, handleDoubleClick } = useClickPreventionOnDoubleClick(onSingleClick, onDoubleClick, doubleClickToFullscreen && allowFullscreen && supportsFullScreen);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    if (shouldAutoplay) {\n      player.play();\n      setShouldAutoPlay(false);\n    }\n  }, [shouldAutoplay, player]);\n  const loadingMarkup = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    return renderLoading ? renderLoading({\n      height: outerStyle.height,\n      width: outerStyle.width,\n      isBuffering: showBufferIndicator\n    }) : null;\n  }, [outerStyle.height, outerStyle.width, renderLoading, showBufferIndicator]);\n  const currentScale = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    return {\n      type: \"scale\",\n      scale\n    };\n  }, [scale]);\n  if (!config) {\n    return null;\n  }\n  const poster = renderPoster ? renderPoster({\n    height: posterFillMode === \"player-size\" ? outerStyle.height : config.height,\n    width: posterFillMode === \"player-size\" ? outerStyle.width : config.width,\n    isBuffering: showBufferIndicator\n  }) : null;\n  if (poster === undefined) {\n    throw new TypeError(\"renderPoster() must return a React element, but undefined was returned\");\n  }\n  const shouldShowPoster = poster && [\n    showPosterWhenPaused && !player.isPlaying() && !seeking,\n    showPosterWhenEnded && player.isLastFrame && !player.isPlaying(),\n    showPosterWhenUnplayed && !player.hasPlayed && !player.isPlaying(),\n    showPosterWhenBuffering && showBufferIndicator && player.isPlaying(),\n    showPosterWhenBufferingAndPaused && showBufferIndicator && !player.isPlaying()\n  ].some(Boolean);\n  const { left, top, width, height, ...outerWithoutScale } = outer;\n  const content = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n    children: [\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", {\n        style: outer,\n        onPointerDown: clickToPlay ? handlePointerDown : undefined,\n        onDoubleClick: doubleClickToFullscreen ? handleDoubleClick : undefined,\n        children: [\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", {\n            style: containerStyle3,\n            className: playerCssClassname(overrideInternalClassName),\n            children: [\n              VideoComponent ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ErrorBoundary, {\n                onError,\n                errorFallback,\n                children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.CurrentScaleContext.Provider, {\n                  value: currentScale,\n                  children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(VideoComponent, {\n                    ...video?.props ?? {},\n                    ...inputProps ?? {}\n                  })\n                })\n              }) : null,\n              shouldShowPoster && posterFillMode === \"composition-size\" ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n                style: {\n                  ...outerWithoutScale,\n                  width: config.width,\n                  height: config.height\n                },\n                onPointerDown: clickToPlay ? handlePointerDown : undefined,\n                onDoubleClick: doubleClickToFullscreen ? handleDoubleClick : undefined,\n                children: poster\n              }) : null\n            ]\n          }),\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(RenderWarningIfBlacklist, {})\n        ]\n      }),\n      shouldShowPoster && posterFillMode === \"player-size\" ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n        style: outer,\n        onPointerDown: clickToPlay ? handlePointerDown : undefined,\n        onDoubleClick: doubleClickToFullscreen ? handleDoubleClick : undefined,\n        children: poster\n      }) : null,\n      controls ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Controls, {\n        fps: config.fps,\n        playing: player.playing,\n        toggle: player.toggle,\n        durationInFrames: config.durationInFrames,\n        containerRef: container,\n        onFullscreenButtonClick,\n        isFullscreen,\n        allowFullscreen,\n        showVolumeControls,\n        onExitFullscreenButtonClick,\n        spaceKeyToPlayOrPause,\n        onSeekEnd,\n        onSeekStart,\n        inFrame,\n        outFrame,\n        initiallyShowControls,\n        canvasSize,\n        renderFullscreenButton,\n        renderPlayPauseButton,\n        alwaysShowControls,\n        showPlaybackRateControl,\n        buffering: showBufferIndicator,\n        hideControlsWhenPointerDoesntMove,\n        onDoubleClick: doubleClickToFullscreen ? handleDoubleClick : undefined,\n        onPointerDown: clickToPlay ? handlePointerDown : undefined,\n        renderMuteButton,\n        renderVolumeSlider\n      }) : null\n    ]\n  });\n  if (noSuspense || IS_NODE && !doesReactVersionSupportSuspense) {\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n      ref: container,\n      style: outerStyle,\n      className: className2,\n      children: content\n    });\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n    ref: container,\n    style: outerStyle,\n    className: className2,\n    children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react__WEBPACK_IMPORTED_MODULE_2__.Suspense, {\n      fallback: loadingMarkup,\n      children: content\n    })\n  });\n};\nvar PlayerUI_default = (0,react__WEBPACK_IMPORTED_MODULE_2__.forwardRef)(PlayerUI);\n\n// src/SharedPlayerContext.tsx\n\n\n\n// src/volume-persistance.ts\n\nvar DEFAULT_VOLUME_PERSISTANCE_KEY = \"remotion.volumePreference\";\nvar persistVolume = (volume, logLevel, volumePersistenceKey) => {\n  if (typeof window === \"undefined\") {\n    return;\n  }\n  try {\n    window.localStorage.setItem(volumePersistenceKey ?? DEFAULT_VOLUME_PERSISTANCE_KEY, String(volume));\n  } catch (e) {\n    remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.Log.error({ logLevel, tag: null }, \"Could not persist volume\", e);\n  }\n};\nvar getPreferredVolume = (volumePersistenceKey) => {\n  if (typeof window === \"undefined\") {\n    return 1;\n  }\n  try {\n    const val = window.localStorage.getItem(volumePersistenceKey ?? DEFAULT_VOLUME_PERSISTANCE_KEY);\n    return val ? Number(val) : 1;\n  } catch {\n    return 1;\n  }\n};\n\n// src/SharedPlayerContext.tsx\n\nvar PLAYER_COMP_ID = \"player-comp\";\nvar SharedPlayerContexts = ({\n  children,\n  timelineContext,\n  fps,\n  compositionHeight,\n  compositionWidth,\n  durationInFrames,\n  component,\n  numberOfSharedAudioTags,\n  initiallyMuted,\n  logLevel,\n  audioLatencyHint,\n  volumePersistenceKey,\n  inputProps\n}) => {\n  const compositionManagerContext = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    const context = {\n      compositions: [\n        {\n          component,\n          durationInFrames,\n          height: compositionHeight,\n          width: compositionWidth,\n          fps,\n          id: PLAYER_COMP_ID,\n          nonce: 777,\n          folderName: null,\n          parentFolderName: null,\n          schema: null,\n          calculateMetadata: null\n        }\n      ],\n      folders: [],\n      currentCompositionMetadata: {\n        defaultCodec: null,\n        defaultOutName: null,\n        defaultPixelFormat: null,\n        defaultProResProfile: null,\n        defaultVideoImageFormat: null,\n        durationInFrames,\n        fps,\n        height: compositionHeight,\n        width: compositionWidth,\n        props: inputProps\n      },\n      canvasContent: { type: \"composition\", compositionId: \"player-comp\" }\n    };\n    return context;\n  }, [\n    component,\n    durationInFrames,\n    compositionHeight,\n    compositionWidth,\n    fps,\n    inputProps\n  ]);\n  const [mediaMuted, setMediaMuted] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(() => initiallyMuted);\n  const [mediaVolume, setMediaVolume] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(() => getPreferredVolume(volumePersistenceKey ?? null));\n  const mediaVolumeContextValue = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    return {\n      mediaMuted,\n      mediaVolume\n    };\n  }, [mediaMuted, mediaVolume]);\n  const setMediaVolumeAndPersist = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((vol) => {\n    setMediaVolume(vol);\n    persistVolume(vol, logLevel, volumePersistenceKey ?? null);\n  }, [logLevel, volumePersistenceKey]);\n  const setMediaVolumeContextValue = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    return {\n      setMediaMuted,\n      setMediaVolume: setMediaVolumeAndPersist\n    };\n  }, [setMediaVolumeAndPersist]);\n  const logLevelContext = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    return {\n      logLevel,\n      mountTime: Date.now()\n    };\n  }, [logLevel]);\n  const env = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    return {\n      isPlayer: true,\n      isRendering: false,\n      isStudio: false,\n      isClientSideRendering: false,\n      isReadOnlyStudio: false\n    };\n  }, []);\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.RemotionEnvironmentContext.Provider, {\n    value: env,\n    children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.LogLevelContext.Provider, {\n      value: logLevelContext,\n      children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.CanUseRemotionHooksProvider, {\n        children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.TimelineContext.Provider, {\n          value: timelineContext,\n          children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.CompositionManager.Provider, {\n            value: compositionManagerContext,\n            children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.PrefetchProvider, {\n              children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.DurationsContextProvider, {\n                children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.MediaVolumeContext.Provider, {\n                  value: mediaVolumeContextValue,\n                  children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.SetMediaVolumeContext.Provider, {\n                    value: setMediaVolumeContextValue,\n                    children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.SharedAudioContextProvider, {\n                      numberOfAudioTags: numberOfSharedAudioTags,\n                      audioLatencyHint,\n                      children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.BufferingProvider, {\n                        children\n                      })\n                    })\n                  })\n                })\n              })\n            })\n          })\n        })\n      })\n    })\n  });\n};\n\n// src/use-remotion-license-acknowledge.ts\n\nvar warningShown = false;\nvar acknowledgeRemotionLicenseMessage = (acknowledge, logLevel) => {\n  if (acknowledge) {\n    return;\n  }\n  if (warningShown) {\n    return;\n  }\n  warningShown = true;\n  remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.Log.warn({ logLevel, tag: null }, \"Note: Some companies are required to obtain a license to use Remotion. See: https://remotion.dev/license\\nPass the `acknowledgeRemotionLicense` prop to `<Player />` function to make this message disappear.\");\n};\n\n// src/utils/validate-in-out-frame.ts\nvar validateSingleFrame = (frame, variableName) => {\n  if (typeof frame === \"undefined\" || frame === null) {\n    return frame ?? null;\n  }\n  if (typeof frame !== \"number\") {\n    throw new TypeError(`\"${variableName}\" must be a number, but is ${JSON.stringify(frame)}`);\n  }\n  if (Number.isNaN(frame)) {\n    throw new TypeError(`\"${variableName}\" must not be NaN, but is ${JSON.stringify(frame)}`);\n  }\n  if (!Number.isFinite(frame)) {\n    throw new TypeError(`\"${variableName}\" must be finite, but is ${JSON.stringify(frame)}`);\n  }\n  if (frame % 1 !== 0) {\n    throw new TypeError(`\"${variableName}\" must be an integer, but is ${JSON.stringify(frame)}`);\n  }\n  return frame;\n};\nvar validateInOutFrames = ({\n  inFrame,\n  durationInFrames,\n  outFrame\n}) => {\n  const validatedInFrame = validateSingleFrame(inFrame, \"inFrame\");\n  const validatedOutFrame = validateSingleFrame(outFrame, \"outFrame\");\n  if (validatedInFrame === null && validatedOutFrame === null) {\n    return;\n  }\n  if (validatedInFrame !== null && validatedInFrame > durationInFrames - 1) {\n    throw new Error(\"inFrame must be less than (durationInFrames - 1), but is \" + validatedInFrame);\n  }\n  if (validatedOutFrame !== null && validatedOutFrame > durationInFrames - 1) {\n    throw new Error(\"outFrame must be less than (durationInFrames - 1), but is \" + validatedOutFrame);\n  }\n  if (validatedInFrame !== null && validatedInFrame < 0) {\n    throw new Error(\"inFrame must be greater than 0, but is \" + validatedInFrame);\n  }\n  if (validatedOutFrame !== null && validatedOutFrame <= 0) {\n    throw new Error(`outFrame must be greater than 0, but is ${validatedOutFrame}. If you want to render a single frame, use <Thumbnail /> instead.`);\n  }\n  if (validatedOutFrame !== null && validatedInFrame !== null && validatedOutFrame <= validatedInFrame) {\n    throw new Error(\"outFrame must be greater than inFrame, but is \" + validatedOutFrame + \" <= \" + validatedInFrame);\n  }\n};\n\n// src/utils/validate-initial-frame.ts\nvar validateInitialFrame = ({\n  initialFrame,\n  durationInFrames\n}) => {\n  if (typeof durationInFrames !== \"number\") {\n    throw new Error(`\\`durationInFrames\\` must be a number, but is ${JSON.stringify(durationInFrames)}`);\n  }\n  if (typeof initialFrame === \"undefined\") {\n    return;\n  }\n  if (typeof initialFrame !== \"number\") {\n    throw new Error(`\\`initialFrame\\` must be a number, but is ${JSON.stringify(initialFrame)}`);\n  }\n  if (Number.isNaN(initialFrame)) {\n    throw new Error(`\\`initialFrame\\` must be a number, but is NaN`);\n  }\n  if (!Number.isFinite(initialFrame)) {\n    throw new Error(`\\`initialFrame\\` must be a number, but is Infinity`);\n  }\n  if (initialFrame % 1 !== 0) {\n    throw new Error(`\\`initialFrame\\` must be an integer, but is ${JSON.stringify(initialFrame)}`);\n  }\n  if (initialFrame > durationInFrames - 1) {\n    throw new Error(`\\`initialFrame\\` must be less or equal than \\`durationInFrames - 1\\`, but is ${JSON.stringify(initialFrame)}`);\n  }\n};\n\n// src/utils/validate-playbackrate.ts\nvar validatePlaybackRate = (playbackRate) => {\n  if (playbackRate === undefined) {\n    return;\n  }\n  if (playbackRate > 4) {\n    throw new Error(`The highest possible playback rate is 4. You passed: ${playbackRate}`);\n  }\n  if (playbackRate < -4) {\n    throw new Error(`The lowest possible playback rate is -4. You passed: ${playbackRate}`);\n  }\n  if (playbackRate === 0) {\n    throw new Error(`A playback rate of 0 is not supported.`);\n  }\n};\n\n// src/validate.ts\n\nvar validateFps = remotion_no_react__WEBPACK_IMPORTED_MODULE_3__.NoReactInternals.validateFps;\nvar validateDimension = remotion_no_react__WEBPACK_IMPORTED_MODULE_3__.NoReactInternals.validateDimension;\nvar validateDurationInFrames = remotion_no_react__WEBPACK_IMPORTED_MODULE_3__.NoReactInternals.validateDurationInFrames;\nvar validateDefaultAndInputProps = remotion_no_react__WEBPACK_IMPORTED_MODULE_3__.NoReactInternals.validateDefaultAndInputProps;\n\n// src/Player.tsx\n\nvar componentOrNullIfLazy = (props) => {\n  if (\"component\" in props) {\n    return props.component;\n  }\n  return null;\n};\nvar PlayerFn = ({\n  durationInFrames,\n  compositionHeight,\n  compositionWidth,\n  fps,\n  inputProps,\n  style: style2,\n  controls = false,\n  loop = false,\n  autoPlay = false,\n  showVolumeControls = true,\n  allowFullscreen = true,\n  clickToPlay,\n  doubleClickToFullscreen = false,\n  spaceKeyToPlayOrPause = true,\n  moveToBeginningWhenEnded = true,\n  numberOfSharedAudioTags = 5,\n  errorFallback = () => \"\",\n  playbackRate = 1,\n  renderLoading,\n  className: className2,\n  showPosterWhenUnplayed,\n  showPosterWhenEnded,\n  showPosterWhenPaused,\n  showPosterWhenBuffering,\n  showPosterWhenBufferingAndPaused,\n  initialFrame,\n  renderPoster,\n  inFrame,\n  outFrame,\n  initiallyShowControls,\n  renderFullscreenButton,\n  renderPlayPauseButton,\n  renderVolumeSlider,\n  alwaysShowControls = false,\n  initiallyMuted = false,\n  showPlaybackRateControl = false,\n  posterFillMode = \"player-size\",\n  bufferStateDelayInMilliseconds,\n  hideControlsWhenPointerDoesntMove = true,\n  overflowVisible = false,\n  renderMuteButton,\n  browserMediaControlsBehavior: passedBrowserMediaControlsBehavior,\n  overrideInternalClassName,\n  logLevel = \"info\",\n  noSuspense,\n  acknowledgeRemotionLicense,\n  audioLatencyHint = \"interactive\",\n  volumePersistenceKey,\n  ...componentProps\n}, ref) => {\n  if (typeof window !== \"undefined\") {\n    window.remotion_isPlayer = true;\n  }\n  if (componentProps.defaultProps !== undefined) {\n    throw new Error(\"The <Player /> component does not accept `defaultProps`, but some were passed. Use `inputProps` instead.\");\n  }\n  const componentForValidation = componentOrNullIfLazy(componentProps);\n  if (componentForValidation?.type === remotion__WEBPACK_IMPORTED_MODULE_1__.Composition) {\n    throw new TypeError(`'component' should not be an instance of <Composition/>. Pass the React component directly, and set the duration, fps and dimensions as separate props. See https://www.remotion.dev/docs/player/examples for an example.`);\n  }\n  if (componentForValidation === remotion__WEBPACK_IMPORTED_MODULE_1__.Composition) {\n    throw new TypeError(`'component' must not be the 'Composition' component. Pass your own React component directly, and set the duration, fps and dimensions as separate props. See https://www.remotion.dev/docs/player/examples for an example.`);\n  }\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(() => acknowledgeRemotionLicenseMessage(Boolean(acknowledgeRemotionLicense), logLevel));\n  const component = remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.useLazyComponent({\n    compProps: componentProps,\n    componentName: \"Player\",\n    noSuspense: Boolean(noSuspense)\n  });\n  validateInitialFrame({ initialFrame, durationInFrames });\n  const [frame, setFrame] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(() => ({\n    [PLAYER_COMP_ID]: initialFrame ?? 0\n  }));\n  const [playing, setPlaying] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n  const [rootId] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(\"player-comp\");\n  const rootRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n  const audioAndVideoTags = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)([]);\n  const imperativePlaying = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(false);\n  const [currentPlaybackRate, setCurrentPlaybackRate] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(playbackRate);\n  if (typeof compositionHeight !== \"number\") {\n    throw new TypeError(`'compositionHeight' must be a number but got '${typeof compositionHeight}' instead`);\n  }\n  if (typeof compositionWidth !== \"number\") {\n    throw new TypeError(`'compositionWidth' must be a number but got '${typeof compositionWidth}' instead`);\n  }\n  validateDimension(compositionHeight, \"compositionHeight\", \"of the <Player /> component\");\n  validateDimension(compositionWidth, \"compositionWidth\", \"of the <Player /> component\");\n  validateDurationInFrames(durationInFrames, {\n    component: \"of the <Player/> component\",\n    allowFloats: false\n  });\n  validateFps(fps, \"as a prop of the <Player/> component\", false);\n  validateDefaultAndInputProps(inputProps, \"inputProps\", null);\n  validateInOutFrames({\n    durationInFrames,\n    inFrame,\n    outFrame\n  });\n  if (typeof controls !== \"boolean\" && typeof controls !== \"undefined\") {\n    throw new TypeError(`'controls' must be a boolean or undefined but got '${typeof controls}' instead`);\n  }\n  if (typeof autoPlay !== \"boolean\" && typeof autoPlay !== \"undefined\") {\n    throw new TypeError(`'autoPlay' must be a boolean or undefined but got '${typeof autoPlay}' instead`);\n  }\n  if (typeof loop !== \"boolean\" && typeof loop !== \"undefined\") {\n    throw new TypeError(`'loop' must be a boolean or undefined but got '${typeof loop}' instead`);\n  }\n  if (typeof doubleClickToFullscreen !== \"boolean\" && typeof doubleClickToFullscreen !== \"undefined\") {\n    throw new TypeError(`'doubleClickToFullscreen' must be a boolean or undefined but got '${typeof doubleClickToFullscreen}' instead`);\n  }\n  if (typeof showVolumeControls !== \"boolean\" && typeof showVolumeControls !== \"undefined\") {\n    throw new TypeError(`'showVolumeControls' must be a boolean or undefined but got '${typeof showVolumeControls}' instead`);\n  }\n  if (typeof allowFullscreen !== \"boolean\" && typeof allowFullscreen !== \"undefined\") {\n    throw new TypeError(`'allowFullscreen' must be a boolean or undefined but got '${typeof allowFullscreen}' instead`);\n  }\n  if (typeof clickToPlay !== \"boolean\" && typeof clickToPlay !== \"undefined\") {\n    throw new TypeError(`'clickToPlay' must be a boolean or undefined but got '${typeof clickToPlay}' instead`);\n  }\n  if (typeof spaceKeyToPlayOrPause !== \"boolean\" && typeof spaceKeyToPlayOrPause !== \"undefined\") {\n    throw new TypeError(`'spaceKeyToPlayOrPause' must be a boolean or undefined but got '${typeof spaceKeyToPlayOrPause}' instead`);\n  }\n  if (typeof numberOfSharedAudioTags !== \"number\" || numberOfSharedAudioTags % 1 !== 0 || !Number.isFinite(numberOfSharedAudioTags) || Number.isNaN(numberOfSharedAudioTags) || numberOfSharedAudioTags < 0) {\n    throw new TypeError(`'numberOfSharedAudioTags' must be an integer but got '${numberOfSharedAudioTags}' instead`);\n  }\n  validatePlaybackRate(currentPlaybackRate);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    setCurrentPlaybackRate(playbackRate);\n  }, [playbackRate]);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useImperativeHandle)(ref, () => rootRef.current, []);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(() => {\n    remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.playbackLogging({\n      logLevel,\n      message: `[player] Mounting <Player>. User agent = ${typeof navigator === \"undefined\" ? \"server\" : navigator.userAgent}`,\n      tag: \"player\",\n      mountTime: Date.now()\n    });\n  });\n  const timelineContextValue = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    return {\n      frame,\n      playing,\n      rootId,\n      playbackRate: currentPlaybackRate,\n      imperativePlaying,\n      setPlaybackRate: (rate) => {\n        setCurrentPlaybackRate(rate);\n      },\n      audioAndVideoTags\n    };\n  }, [frame, currentPlaybackRate, playing, rootId]);\n  const setTimelineContextValue = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    return {\n      setFrame,\n      setPlaying\n    };\n  }, [setFrame]);\n  if (typeof window !== \"undefined\") {\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useLayoutEffect)(() => {\n      remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.CSSUtils.injectCSS(remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.CSSUtils.makeDefaultPreviewCSS(`.${playerCssClassname(overrideInternalClassName)}`, \"#fff\"));\n    }, [overrideInternalClassName]);\n  }\n  const actualInputProps = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => inputProps ?? {}, [inputProps]);\n  const browserMediaControlsBehavior = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    return passedBrowserMediaControlsBehavior ?? {\n      mode: \"prevent-media-session\"\n    };\n  }, [passedBrowserMediaControlsBehavior]);\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.IsPlayerContextProvider, {\n    children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SharedPlayerContexts, {\n      timelineContext: timelineContextValue,\n      component,\n      compositionHeight,\n      compositionWidth,\n      durationInFrames,\n      fps,\n      numberOfSharedAudioTags,\n      initiallyMuted,\n      logLevel,\n      audioLatencyHint,\n      volumePersistenceKey,\n      inputProps: actualInputProps,\n      children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.SetTimelineContext.Provider, {\n        value: setTimelineContextValue,\n        children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(PlayerEmitterProvider, {\n          currentPlaybackRate,\n          children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(PlayerUI_default, {\n            ref: rootRef,\n            posterFillMode,\n            renderLoading,\n            autoPlay: Boolean(autoPlay),\n            loop: Boolean(loop),\n            controls: Boolean(controls),\n            errorFallback,\n            style: style2,\n            inputProps: actualInputProps,\n            allowFullscreen: Boolean(allowFullscreen),\n            moveToBeginningWhenEnded: Boolean(moveToBeginningWhenEnded),\n            clickToPlay: typeof clickToPlay === \"boolean\" ? clickToPlay : Boolean(controls),\n            showVolumeControls: Boolean(showVolumeControls),\n            doubleClickToFullscreen: Boolean(doubleClickToFullscreen),\n            spaceKeyToPlayOrPause: Boolean(spaceKeyToPlayOrPause),\n            playbackRate: currentPlaybackRate,\n            className: className2 ?? undefined,\n            showPosterWhenUnplayed: Boolean(showPosterWhenUnplayed),\n            showPosterWhenEnded: Boolean(showPosterWhenEnded),\n            showPosterWhenPaused: Boolean(showPosterWhenPaused),\n            showPosterWhenBuffering: Boolean(showPosterWhenBuffering),\n            showPosterWhenBufferingAndPaused: Boolean(showPosterWhenBufferingAndPaused),\n            renderPoster,\n            inFrame: inFrame ?? null,\n            outFrame: outFrame ?? null,\n            initiallyShowControls: initiallyShowControls ?? true,\n            renderFullscreen: renderFullscreenButton ?? null,\n            renderPlayPauseButton: renderPlayPauseButton ?? null,\n            renderMuteButton: renderMuteButton ?? null,\n            renderVolumeSlider: renderVolumeSlider ?? null,\n            alwaysShowControls,\n            showPlaybackRateControl,\n            bufferStateDelayInMilliseconds: bufferStateDelayInMilliseconds ?? 300,\n            hideControlsWhenPointerDoesntMove,\n            overflowVisible,\n            browserMediaControlsBehavior,\n            overrideInternalClassName: overrideInternalClassName ?? undefined,\n            noSuspense: Boolean(noSuspense)\n          })\n        })\n      })\n    })\n  });\n};\nvar forward = react__WEBPACK_IMPORTED_MODULE_2__.forwardRef;\nvar Player = forward(PlayerFn);\n// src/Thumbnail.tsx\n\n\n\n// src/ThumbnailUI.tsx\n\n\n\n// src/use-thumbnail.ts\n\nvar useThumbnail = () => {\n  const emitter = (0,react__WEBPACK_IMPORTED_MODULE_2__.useContext)(ThumbnailEmitterContext);\n  if (!emitter) {\n    throw new TypeError(\"Expected Player event emitter context\");\n  }\n  const returnValue = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    return {\n      emitter\n    };\n  }, [emitter]);\n  return returnValue;\n};\n\n// src/ThumbnailUI.tsx\n\nvar reactVersion2 = react__WEBPACK_IMPORTED_MODULE_2__.version.split(\".\")[0];\nif (reactVersion2 === \"0\") {\n  throw new Error(`Version ${reactVersion2} of \"react\" is not supported by Remotion`);\n}\nvar doesReactVersionSupportSuspense2 = parseInt(reactVersion2, 10) >= 18;\nvar ThumbnailUI = ({\n  style: style2,\n  inputProps,\n  errorFallback,\n  renderLoading,\n  className: className2,\n  overflowVisible,\n  noSuspense,\n  overrideInternalClassName\n}, ref) => {\n  const config = remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.useUnsafeVideoConfig();\n  const video = remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.useVideo();\n  const container = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n  const canvasSize = useElementSize(container, {\n    triggerOnWindowResize: false,\n    shouldApplyCssTransforms: false\n  });\n  const layout = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    if (!config || !canvasSize) {\n      return null;\n    }\n    return calculateCanvasTransformation({\n      canvasSize,\n      compositionHeight: config.height,\n      compositionWidth: config.width,\n      previewSize: \"auto\"\n    });\n  }, [canvasSize, config]);\n  const scale = layout?.scale ?? 1;\n  const thumbnail = useThumbnail();\n  useBufferStateEmitter(thumbnail.emitter);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useImperativeHandle)(ref, () => {\n    const methods = {\n      getContainerNode: () => container.current,\n      getScale: () => scale\n    };\n    return Object.assign(thumbnail.emitter, methods);\n  }, [scale, thumbnail.emitter]);\n  const VideoComponent = video ? video.component : null;\n  const outerStyle = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    return calculateOuterStyle({\n      config,\n      style: style2,\n      canvasSize,\n      overflowVisible,\n      layout\n    });\n  }, [canvasSize, config, layout, overflowVisible, style2]);\n  const outer = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    return calculateOuter({ config, layout, scale, overflowVisible });\n  }, [config, layout, overflowVisible, scale]);\n  const containerStyle3 = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    return calculateContainerStyle({\n      config,\n      layout,\n      scale,\n      overflowVisible\n    });\n  }, [config, layout, overflowVisible, scale]);\n  const onError = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((error) => {\n    thumbnail.emitter.dispatchError(error);\n  }, [thumbnail.emitter]);\n  const loadingMarkup = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    return renderLoading ? renderLoading({\n      height: outerStyle.height,\n      width: outerStyle.width,\n      isBuffering: false\n    }) : null;\n  }, [outerStyle.height, outerStyle.width, renderLoading]);\n  const currentScaleContext = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    return {\n      type: \"scale\",\n      scale\n    };\n  }, [scale]);\n  if (!config) {\n    return null;\n  }\n  const content = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n    style: outer,\n    children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n      style: containerStyle3,\n      className: playerCssClassname(overrideInternalClassName),\n      children: VideoComponent ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ErrorBoundary, {\n        onError,\n        errorFallback,\n        children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.CurrentScaleContext.Provider, {\n          value: currentScaleContext,\n          children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(VideoComponent, {\n            ...video?.props ?? {},\n            ...inputProps ?? {}\n          })\n        })\n      }) : null\n    })\n  });\n  if (noSuspense || IS_NODE && !doesReactVersionSupportSuspense2) {\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n      ref: container,\n      style: outerStyle,\n      className: className2,\n      children: content\n    });\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n    ref: container,\n    style: outerStyle,\n    className: className2,\n    children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react__WEBPACK_IMPORTED_MODULE_2__.Suspense, {\n      fallback: loadingMarkup,\n      children: content\n    })\n  });\n};\nvar ThumbnailUI_default = (0,react__WEBPACK_IMPORTED_MODULE_2__.forwardRef)(ThumbnailUI);\n\n// src/Thumbnail.tsx\n\nvar ThumbnailFn = ({\n  frameToDisplay,\n  style: style2,\n  inputProps,\n  compositionHeight,\n  compositionWidth,\n  durationInFrames,\n  fps,\n  className: className2,\n  errorFallback = () => \"\",\n  renderLoading,\n  overflowVisible = false,\n  overrideInternalClassName,\n  logLevel = \"info\",\n  noSuspense,\n  ...componentProps\n}, ref) => {\n  if (typeof window !== \"undefined\") {\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useLayoutEffect)(() => {\n      window.remotion_isPlayer = true;\n    }, []);\n  }\n  const [thumbnailId] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(() => String((0,remotion__WEBPACK_IMPORTED_MODULE_1__.random)(null)));\n  const rootRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n  const timelineState = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    const value = {\n      playing: false,\n      frame: {\n        [PLAYER_COMP_ID]: frameToDisplay\n      },\n      rootId: thumbnailId,\n      imperativePlaying: {\n        current: false\n      },\n      playbackRate: 1,\n      setPlaybackRate: () => {\n        throw new Error(\"thumbnail\");\n      },\n      audioAndVideoTags: { current: [] }\n    };\n    return value;\n  }, [frameToDisplay, thumbnailId]);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useImperativeHandle)(ref, () => rootRef.current, []);\n  const Component = remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.useLazyComponent({\n    compProps: componentProps,\n    componentName: \"Thumbnail\",\n    noSuspense: Boolean(noSuspense)\n  });\n  const [emitter] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(() => new ThumbnailEmitter);\n  const passedInputProps = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    return inputProps ?? {};\n  }, [inputProps]);\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(remotion__WEBPACK_IMPORTED_MODULE_1__.Internals.IsPlayerContextProvider, {\n    children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SharedPlayerContexts, {\n      timelineContext: timelineState,\n      component: Component,\n      compositionHeight,\n      compositionWidth,\n      durationInFrames,\n      fps,\n      numberOfSharedAudioTags: 0,\n      initiallyMuted: true,\n      logLevel,\n      audioLatencyHint: \"playback\",\n      inputProps: passedInputProps,\n      children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ThumbnailEmitterContext.Provider, {\n        value: emitter,\n        children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ThumbnailUI_default, {\n          ref: rootRef,\n          className: className2,\n          errorFallback,\n          inputProps: passedInputProps,\n          renderLoading,\n          style: style2,\n          overflowVisible,\n          overrideInternalClassName,\n          noSuspense: Boolean(noSuspense)\n        })\n      })\n    })\n  });\n};\nvar forward2 = react__WEBPACK_IMPORTED_MODULE_2__.forwardRef;\nvar Thumbnail = forward2(ThumbnailFn);\n\n// src/index.ts\nvar PlayerInternals = {\n  PlayerEventEmitterContext,\n  PlayerEmitter,\n  usePlayer,\n  usePlayback,\n  useElementSize,\n  calculateCanvasTransformation,\n  useHoverState,\n  updateAllElementsSizes,\n  PlayerEmitterProvider,\n  BufferingIndicator,\n  useFrameImperative\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHJlbW90aW9uL3BsYXllci9kaXN0L2VzbS9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDOEM7QUFDOUM7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHNEQUFHO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLHNEQUFHO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQSx5QkFBeUIsdURBQUk7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0Isc0RBQUc7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1Asc0JBQXNCLHNEQUFHO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVEQUFJO0FBQzdCLG9CQUFvQixVQUFVLEVBQUUsU0FBUztBQUN6QztBQUNBO0FBQ0E7QUFDQSxzQkFBc0Isc0RBQUc7QUFDekI7QUFDQSxRQUFRLEtBQUssRUFBRTtBQUNmLFFBQVEsYUFBYSxFQUFFO0FBQ3ZCLFFBQVEsT0FBTyxFQUFFO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLHNCQUFzQixzREFBRztBQUN6QjtBQUNBLFFBQVEsZ0JBQWdCLEVBQUU7QUFDMUIsUUFBUSx3QkFBd0IsRUFBRTtBQUNsQyxRQUFRLGtCQUFrQixFQUFFO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLHNCQUFzQixzREFBRztBQUN6QjtBQUNBLFFBQVEsS0FBSyxFQUFFO0FBQ2YsUUFBUSxhQUFhLEVBQUU7QUFDdkIsUUFBUSxPQUFPLEVBQUU7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1As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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxzREFBSztBQUNyQztBQUNBLGtDQUFrQyxzREFBSztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQSxlQUFlLDZDQUFXO0FBQzFCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLRSIsInNvdXJjZXMiOlsid2VicGFjazovL2NhcHRpb24tZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvQHJlbW90aW9uL3BsYXllci9kaXN0L2VzbS9pbmRleC5tanM/YTM0ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBjbGllbnRcIjtcbi8vIHNyYy9pY29ucy50c3hcbmltcG9ydCB7IGpzeCwganN4cyB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xudmFyIElDT05fU0laRSA9IDI1O1xudmFyIGZ1bGxzY3JlZW5JY29uU2l6ZSA9IDE2O1xudmFyIFBsYXlJY29uID0gKCkgPT4ge1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeChcInN2Z1wiLCB7XG4gICAgd2lkdGg6IElDT05fU0laRSxcbiAgICBoZWlnaHQ6IElDT05fU0laRSxcbiAgICB2aWV3Qm94OiBcIjAgMCAyNSAyNVwiLFxuICAgIGZpbGw6IFwibm9uZVwiLFxuICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4KFwicGF0aFwiLCB7XG4gICAgICBkOiBcIk04IDYuMzc1QzcuNDA5MDQgOC4xNzU3NiA3LjA2OTIxIDEwLjI0ODYgNy4wMTQzOCAxMi4zODcxQzYuOTU5NTUgMTQuNTI1NSA3LjE5MTYzIDE2LjY1NDcgNy42ODc1IDE4LjU2MjVDOS45NTM2NCAxOC4yOTk1IDEyLjExNiAxNy42MTY0IDE0LjAwOSAxNi41NjU1QzE1LjkwMiAxNS41MTQ3IDE3LjQ3NTUgMTQuMTI0IDE4LjYwODggMTIuNUMxNy41MTU4IDEwLjg5NDkgMTUuOTk0OSA5LjUxMTAzIDE0LjE1ODUgOC40NTA4MkMxMi4zMjIyIDcuMzkwNiAxMC4yMTc0IDYuNjgxMTYgOCA2LjM3NVpcIixcbiAgICAgIGZpbGw6IFwid2hpdGVcIixcbiAgICAgIHN0cm9rZTogXCJ3aGl0ZVwiLFxuICAgICAgc3Ryb2tlV2lkdGg6IFwiNi4yNVwiLFxuICAgICAgc3Ryb2tlTGluZWpvaW46IFwicm91bmRcIlxuICAgIH0pXG4gIH0pO1xufTtcbnZhciBQYXVzZUljb24gPSAoKSA9PiB7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4cyhcInN2Z1wiLCB7XG4gICAgdmlld0JveDogXCIwIDAgMTAwIDEwMFwiLFxuICAgIHdpZHRoOiBJQ09OX1NJWkUsXG4gICAgaGVpZ2h0OiBJQ09OX1NJWkUsXG4gICAgY2hpbGRyZW46IFtcbiAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goXCJyZWN0XCIsIHtcbiAgICAgICAgeDogXCIyNVwiLFxuICAgICAgICB5OiBcIjIwXCIsXG4gICAgICAgIHdpZHRoOiBcIjIwXCIsXG4gICAgICAgIGhlaWdodDogXCI2MFwiLFxuICAgICAgICBmaWxsOiBcIiNmZmZcIixcbiAgICAgICAgcnk6IFwiNVwiLFxuICAgICAgICByeDogXCI1XCJcbiAgICAgIH0pLFxuICAgICAgLyogQF9fUFVSRV9fICovIGpzeChcInJlY3RcIiwge1xuICAgICAgICB4OiBcIjU1XCIsXG4gICAgICAgIHk6IFwiMjBcIixcbiAgICAgICAgd2lkdGg6IFwiMjBcIixcbiAgICAgICAgaGVpZ2h0OiBcIjYwXCIsXG4gICAgICAgIGZpbGw6IFwiI2ZmZlwiLFxuICAgICAgICByeTogXCI1XCIsXG4gICAgICAgIHJ4OiBcIjVcIlxuICAgICAgfSlcbiAgICBdXG4gIH0pO1xufTtcbnZhciBGdWxsc2NyZWVuSWNvbiA9ICh7XG4gIGlzRnVsbHNjcmVlblxufSkgPT4ge1xuICBjb25zdCBzdHJva2VXaWR0aCA9IDY7XG4gIGNvbnN0IHZpZXdTaXplID0gMzI7XG4gIGNvbnN0IG91dCA9IGlzRnVsbHNjcmVlbiA/IDAgOiBzdHJva2VXaWR0aCAvIDI7XG4gIGNvbnN0IG1pZGRsZUluc2V0ID0gaXNGdWxsc2NyZWVuID8gc3Ryb2tlV2lkdGggKiAxLjYgOiBzdHJva2VXaWR0aCAvIDI7XG4gIGNvbnN0IGluc2V0ID0gaXNGdWxsc2NyZWVuID8gc3Ryb2tlV2lkdGggKiAxLjYgOiBzdHJva2VXaWR0aCAqIDI7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4cyhcInN2Z1wiLCB7XG4gICAgdmlld0JveDogYDAgMCAke3ZpZXdTaXplfSAke3ZpZXdTaXplfWAsXG4gICAgaGVpZ2h0OiBmdWxsc2NyZWVuSWNvblNpemUsXG4gICAgd2lkdGg6IGZ1bGxzY3JlZW5JY29uU2l6ZSxcbiAgICBjaGlsZHJlbjogW1xuICAgICAgLyogQF9fUFVSRV9fICovIGpzeChcInBhdGhcIiwge1xuICAgICAgICBkOiBgXG5cdFx0XHRcdE0gJHtvdXR9ICR7aW5zZXR9XG5cdFx0XHRcdEwgJHttaWRkbGVJbnNldH0gJHttaWRkbGVJbnNldH1cblx0XHRcdFx0TCAke2luc2V0fSAke291dH1cblx0XHRcdFx0YCxcbiAgICAgICAgc3Ryb2tlOiBcIiNmZmZcIixcbiAgICAgICAgc3Ryb2tlV2lkdGgsXG4gICAgICAgIGZpbGw6IFwibm9uZVwiXG4gICAgICB9KSxcbiAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goXCJwYXRoXCIsIHtcbiAgICAgICAgZDogYFxuXHRcdFx0XHRNICR7dmlld1NpemUgLSBvdXR9ICR7aW5zZXR9XG5cdFx0XHRcdEwgJHt2aWV3U2l6ZSAtIG1pZGRsZUluc2V0fSAke21pZGRsZUluc2V0fVxuXHRcdFx0XHRMICR7dmlld1NpemUgLSBpbnNldH0gJHtvdXR9XG5cdFx0XHRcdGAsXG4gICAgICAgIHN0cm9rZTogXCIjZmZmXCIsXG4gICAgICAgIHN0cm9rZVdpZHRoLFxuICAgICAgICBmaWxsOiBcIm5vbmVcIlxuICAgICAgfSksXG4gICAgICAvKiBAX19QVVJFX18gKi8ganN4KFwicGF0aFwiLCB7XG4gICAgICAgIGQ6IGBcblx0XHRcdFx0TSAke291dH0gJHt2aWV3U2l6ZSAtIGluc2V0fVxuXHRcdFx0XHRMICR7bWlkZGxlSW5zZXR9ICR7dmlld1NpemUgLSBtaWRkbGVJbnNldH1cblx0XHRcdFx0TCAke2luc2V0fSAke3ZpZXdTaXplIC0gb3V0fVxuXHRcdFx0XHRgLFxuICAgICAgICBzdHJva2U6IFwiI2ZmZlwiLFxuICAgICAgICBzdHJva2VXaWR0aCxcbiAgICAgICAgZmlsbDogXCJub25lXCJcbiAgICAgIH0pLFxuICAgICAgLyogQF9fUFVSRV9fICovIGpzeChcInBhdGhcIiwge1xuICAgICAgICBkOiBgXG5cdFx0XHRcdE0gJHt2aWV3U2l6ZSAtIG91dH0gJHt2aWV3U2l6ZSAtIGluc2V0fVxuXHRcdFx0XHRMICR7dmlld1NpemUgLSBtaWRkbGVJbnNldH0gJHt2aWV3U2l6ZSAtIG1pZGRsZUluc2V0fVxuXHRcdFx0XHRMICR7dmlld1NpemUgLSBpbnNldH0gJHt2aWV3U2l6ZSAtIG91dH1cblx0XHRcdFx0YCxcbiAgICAgICAgc3Ryb2tlOiBcIiNmZmZcIixcbiAgICAgICAgc3Ryb2tlV2lkdGgsXG4gICAgICAgIGZpbGw6IFwibm9uZVwiXG4gICAgICB9KVxuICAgIF1cbiAgfSk7XG59O1xudmFyIFZvbHVtZU9mZkljb24gPSAoKSA9PiB7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4KFwic3ZnXCIsIHtcbiAgICB3aWR0aDogSUNPTl9TSVpFLFxuICAgIGhlaWdodDogSUNPTl9TSVpFLFxuICAgIHZpZXdCb3g6IFwiMCAwIDI0IDI0XCIsXG4gICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3goXCJwYXRoXCIsIHtcbiAgICAgIGQ6IFwiTTMuNjMgMy42M2EuOTk2Ljk5NiAwIDAwMCAxLjQxTDcuMjkgOC43IDcgOUg0Yy0uNTUgMC0xIC40NS0xIDF2NGMwIC41NS40NSAxIDEgMWgzbDMuMjkgMy4yOWMuNjMuNjMgMS43MS4xOCAxLjcxLS43MXYtNC4xN2w0LjE4IDQuMThjLS40OS4zNy0xLjAyLjY4LTEuNi45MS0uMzYuMTUtLjU4LjUzLS41OC45MiAwIC43Mi43MyAxLjE4IDEuMzkuOTEuOC0uMzMgMS41NS0uNzcgMi4yMi0xLjMxbDEuMzQgMS4zNGEuOTk2Ljk5NiAwIDEwMS40MS0xLjQxTDUuMDUgMy42M2MtLjM5LS4zOS0xLjAyLS4zOS0xLjQyIDB6TTE5IDEyYzAgLjgyLS4xNSAxLjYxLS40MSAyLjM0bDEuNTMgMS41M2MuNTYtMS4xNy44OC0yLjQ4Ljg4LTMuODcgMC0zLjgzLTIuNC03LjExLTUuNzgtOC40LS41OS0uMjMtMS4yMi4yMy0xLjIyLjg2di4xOWMwIC4zOC4yNS43MS42MS44NUMxNy4xOCA2LjU0IDE5IDkuMDYgMTkgMTJ6bS04LjcxLTYuMjlsLS4xNy4xN0wxMiA3Ljc2VjYuNDFjMC0uODktMS4wOC0xLjMzLTEuNzEtLjd6TTE2LjUgMTJBNC41IDQuNSAwIDAwMTQgNy45N3YxLjc5bDIuNDggMi40OGMuMDEtLjA4LjAyLS4xNi4wMi0uMjR6XCIsXG4gICAgICBmaWxsOiBcIiNmZmZcIlxuICAgIH0pXG4gIH0pO1xufTtcbnZhciBWb2x1bWVPbkljb24gPSAoKSA9PiB7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4KFwic3ZnXCIsIHtcbiAgICB3aWR0aDogSUNPTl9TSVpFLFxuICAgIGhlaWdodDogSUNPTl9TSVpFLFxuICAgIHZpZXdCb3g6IFwiMCAwIDI0IDI0XCIsXG4gICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3goXCJwYXRoXCIsIHtcbiAgICAgIGQ6IFwiTTMgMTB2NGMwIC41NS40NSAxIDEgMWgzbDMuMjkgMy4yOWMuNjMuNjMgMS43MS4xOCAxLjcxLS43MVY2LjQxYzAtLjg5LTEuMDgtMS4zNC0xLjcxLS43MUw3IDlINGMtLjU1IDAtMSAuNDUtMSAxem0xMy41IDJBNC41IDQuNSAwIDAwMTQgNy45N3Y4LjA1YzEuNDgtLjczIDIuNS0yLjI1IDIuNS00LjAyek0xNCA0LjQ1di4yYzAgLjM4LjI1LjcxLjYuODVDMTcuMTggNi41MyAxOSA5LjA2IDE5IDEycy0xLjgyIDUuNDctNC40IDYuNWMtLjM2LjE0LS42LjQ3LS42Ljg1di4yYzAgLjYzLjYzIDEuMDcgMS4yMS44NUMxOC42IDE5LjExIDIxIDE1Ljg0IDIxIDEycy0yLjQtNy4xMS01Ljc5LTguNGMtLjU4LS4yMy0xLjIxLjIyLTEuMjEuODV6XCIsXG4gICAgICBmaWxsOiBcIiNmZmZcIlxuICAgIH0pXG4gIH0pO1xufTtcblxuLy8gc3JjL0J1ZmZlcmluZ0luZGljYXRvci50c3hcbmltcG9ydCB7IGpzeCBhcyBqc3gyLCBqc3hzIGFzIGpzeHMyLCBGcmFnbWVudCB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xudmFyIGNsYXNzTmFtZSA9IFwiX19yZW1vdGlvbl9idWZmZXJpbmdfaW5kaWNhdG9yXCI7XG52YXIgcmVtb3Rpb25CdWZmZXJpbmdBbmltYXRpb24gPSBcIl9fcmVtb3Rpb25fYnVmZmVyaW5nX2FuaW1hdGlvblwiO1xudmFyIHBsYXllclN0eWxlID0ge1xuICB3aWR0aDogSUNPTl9TSVpFLFxuICBoZWlnaHQ6IElDT05fU0laRSxcbiAgb3ZlcmZsb3c6IFwiaGlkZGVuXCIsXG4gIGxpbmVIZWlnaHQ6IFwibm9ybWFsXCIsXG4gIGZvbnRTaXplOiBcImluaGVyaXRcIlxufTtcbnZhciBzdHVkaW9TdHlsZSA9IHtcbiAgd2lkdGg6IDE0LFxuICBoZWlnaHQ6IDE0LFxuICBvdmVyZmxvdzogXCJoaWRkZW5cIixcbiAgbGluZUhlaWdodDogXCJub3JtYWxcIixcbiAgZm9udFNpemU6IFwiaW5oZXJpdFwiXG59O1xudmFyIEJ1ZmZlcmluZ0luZGljYXRvciA9ICh7IHR5cGUgfSkgPT4ge1xuICBjb25zdCBzdHlsZSA9IHR5cGUgPT09IFwicGxheWVyXCIgPyBwbGF5ZXJTdHlsZSA6IHN0dWRpb1N0eWxlO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeHMyKEZyYWdtZW50LCB7XG4gICAgY2hpbGRyZW46IFtcbiAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3gyKFwic3R5bGVcIiwge1xuICAgICAgICB0eXBlOiBcInRleHQvY3NzXCIsXG4gICAgICAgIGNoaWxkcmVuOiBgXG5cdFx0XHRcdEBrZXlmcmFtZXMgJHtyZW1vdGlvbkJ1ZmZlcmluZ0FuaW1hdGlvbn0ge1xuICAgICAgICAgIDAlIHtcbiAgICAgICAgICAgIHJvdGF0ZTogMGRlZztcbiAgICAgICAgICB9XG4gICAgICAgICAgMTAwJSB7XG4gICAgICAgICAgICByb3RhdGU6IDM2MGRlZztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC4ke2NsYXNzTmFtZX0ge1xuICAgICAgICAgICAgYW5pbWF0aW9uOiAke3JlbW90aW9uQnVmZmVyaW5nQW5pbWF0aW9ufSAxcyBsaW5lYXIgaW5maW5pdGU7XG4gICAgICAgIH0gICAgICAgIFxuXHRcdFx0YFxuICAgICAgfSksXG4gICAgICAvKiBAX19QVVJFX18gKi8ganN4MihcImRpdlwiLCB7XG4gICAgICAgIHN0eWxlLFxuICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDIoXCJzdmdcIiwge1xuICAgICAgICAgIHZpZXdCb3g6IHR5cGUgPT09IFwicGxheWVyXCIgPyBcIjAgMCAyMiAyMlwiIDogXCIwIDAgMTggMThcIixcbiAgICAgICAgICBzdHlsZSxcbiAgICAgICAgICBjbGFzc05hbWUsXG4gICAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gyKFwicGF0aFwiLCB7XG4gICAgICAgICAgICBkOiB0eXBlID09PSBcInBsYXllclwiID8gXCJNIDExIDQgQSA3IDcgMCAwIDEgMTUuMTE0NSAxNi42NjMxMlwiIDogXCJNIDkgMiBBIDcgNyAwIDAgMSAxMy4xMTQ1IDE0LjY2MzEyXCIsXG4gICAgICAgICAgICBzdHJva2U6IFwid2hpdGVcIixcbiAgICAgICAgICAgIHN0cm9rZUxpbmVjYXA6IFwicm91bmRcIixcbiAgICAgICAgICAgIGZpbGw6IFwibm9uZVwiLFxuICAgICAgICAgICAgc3Ryb2tlV2lkdGg6IDNcbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICBdXG4gIH0pO1xufTtcblxuLy8gc3JjL2NhbGN1bGF0ZS1zY2FsZS50c1xuaW1wb3J0IHsgSW50ZXJuYWxzIH0gZnJvbSBcInJlbW90aW9uXCI7XG5cbi8vIHNyYy91dGlscy9jYWxjdWxhdGUtcGxheWVyLXNpemUudHNcbnZhciBjYWxjdWxhdGVQbGF5ZXJTaXplID0gKHtcbiAgY3VycmVudFNpemUsXG4gIHdpZHRoLFxuICBoZWlnaHQsXG4gIGNvbXBvc2l0aW9uV2lkdGgsXG4gIGNvbXBvc2l0aW9uSGVpZ2h0XG59KSA9PiB7XG4gIGlmICh3aWR0aCAhPT0gdW5kZWZpbmVkICYmIGhlaWdodCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGFzcGVjdFJhdGlvOiBbY29tcG9zaXRpb25XaWR0aCwgY29tcG9zaXRpb25IZWlnaHRdLmpvaW4oXCIvXCIpXG4gICAgfTtcbiAgfVxuICBpZiAoaGVpZ2h0ICE9PSB1bmRlZmluZWQgJiYgd2lkdGggPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiB7XG4gICAgICBhc3BlY3RSYXRpbzogW2NvbXBvc2l0aW9uV2lkdGgsIGNvbXBvc2l0aW9uSGVpZ2h0XS5qb2luKFwiL1wiKVxuICAgIH07XG4gIH1cbiAgaWYgKCFjdXJyZW50U2l6ZSkge1xuICAgIHJldHVybiB7XG4gICAgICB3aWR0aDogY29tcG9zaXRpb25XaWR0aCxcbiAgICAgIGhlaWdodDogY29tcG9zaXRpb25IZWlnaHRcbiAgICB9O1xuICB9XG4gIHJldHVybiB7XG4gICAgd2lkdGg6IGNvbXBvc2l0aW9uV2lkdGgsXG4gICAgaGVpZ2h0OiBjb21wb3NpdGlvbkhlaWdodFxuICB9O1xufTtcblxuLy8gc3JjL2NhbGN1bGF0ZS1zY2FsZS50c1xudmFyIGNhbGN1bGF0ZUNhbnZhc1RyYW5zZm9ybWF0aW9uID0gKHtcbiAgcHJldmlld1NpemUsXG4gIGNvbXBvc2l0aW9uV2lkdGgsXG4gIGNvbXBvc2l0aW9uSGVpZ2h0LFxuICBjYW52YXNTaXplXG59KSA9PiB7XG4gIGNvbnN0IHNjYWxlID0gSW50ZXJuYWxzLmNhbGN1bGF0ZVNjYWxlKHtcbiAgICBjYW52YXNTaXplLFxuICAgIGNvbXBvc2l0aW9uSGVpZ2h0LFxuICAgIGNvbXBvc2l0aW9uV2lkdGgsXG4gICAgcHJldmlld1NpemVcbiAgfSk7XG4gIGNvbnN0IGNvcnJlY3Rpb24gPSAwIC0gKDEgLSBzY2FsZSkgLyAyO1xuICBjb25zdCB4Q29ycmVjdGlvbiA9IGNvcnJlY3Rpb24gKiBjb21wb3NpdGlvbldpZHRoO1xuICBjb25zdCB5Q29ycmVjdGlvbiA9IGNvcnJlY3Rpb24gKiBjb21wb3NpdGlvbkhlaWdodDtcbiAgY29uc3Qgd2lkdGggPSBjb21wb3NpdGlvbldpZHRoICogc2NhbGU7XG4gIGNvbnN0IGhlaWdodCA9IGNvbXBvc2l0aW9uSGVpZ2h0ICogc2NhbGU7XG4gIGNvbnN0IGNlbnRlclggPSBjYW52YXNTaXplLndpZHRoIC8gMiAtIHdpZHRoIC8gMjtcbiAgY29uc3QgY2VudGVyWSA9IGNhbnZhc1NpemUuaGVpZ2h0IC8gMiAtIGhlaWdodCAvIDI7XG4gIHJldHVybiB7XG4gICAgY2VudGVyWCxcbiAgICBjZW50ZXJZLFxuICAgIHhDb3JyZWN0aW9uLFxuICAgIHlDb3JyZWN0aW9uLFxuICAgIHNjYWxlXG4gIH07XG59O1xudmFyIGNhbGN1bGF0ZU91dGVyU3R5bGUgPSAoe1xuICBjb25maWcsXG4gIHN0eWxlLFxuICBjYW52YXNTaXplLFxuICBvdmVyZmxvd1Zpc2libGUsXG4gIGxheW91dFxufSkgPT4ge1xuICBpZiAoIWNvbmZpZykge1xuICAgIHJldHVybiB7fTtcbiAgfVxuICByZXR1cm4ge1xuICAgIHBvc2l0aW9uOiBcInJlbGF0aXZlXCIsXG4gICAgb3ZlcmZsb3c6IG92ZXJmbG93VmlzaWJsZSA/IFwidmlzaWJsZVwiIDogXCJoaWRkZW5cIixcbiAgICAuLi5jYWxjdWxhdGVQbGF5ZXJTaXplKHtcbiAgICAgIGNvbXBvc2l0aW9uSGVpZ2h0OiBjb25maWcuaGVpZ2h0LFxuICAgICAgY29tcG9zaXRpb25XaWR0aDogY29uZmlnLndpZHRoLFxuICAgICAgY3VycmVudFNpemU6IGNhbnZhc1NpemUsXG4gICAgICBoZWlnaHQ6IHN0eWxlPy5oZWlnaHQsXG4gICAgICB3aWR0aDogc3R5bGU/LndpZHRoXG4gICAgfSksXG4gICAgb3BhY2l0eTogbGF5b3V0ID8gMSA6IDAsXG4gICAgLi4uc3R5bGVcbiAgfTtcbn07XG52YXIgY2FsY3VsYXRlQ29udGFpbmVyU3R5bGUgPSAoe1xuICBjb25maWcsXG4gIGxheW91dCxcbiAgc2NhbGUsXG4gIG92ZXJmbG93VmlzaWJsZVxufSkgPT4ge1xuICBpZiAoIWNvbmZpZykge1xuICAgIHJldHVybiB7fTtcbiAgfVxuICBpZiAoIWxheW91dCkge1xuICAgIHJldHVybiB7XG4gICAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxuICAgICAgd2lkdGg6IGNvbmZpZy53aWR0aCxcbiAgICAgIGhlaWdodDogY29uZmlnLmhlaWdodCxcbiAgICAgIGRpc3BsYXk6IFwiZmxleFwiLFxuICAgICAgdHJhbnNmb3JtOiBgc2NhbGUoJHtzY2FsZX0pYCxcbiAgICAgIG92ZXJmbG93OiBvdmVyZmxvd1Zpc2libGUgPyBcInZpc2libGVcIiA6IFwiaGlkZGVuXCJcbiAgICB9O1xuICB9XG4gIHJldHVybiB7XG4gICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcbiAgICB3aWR0aDogY29uZmlnLndpZHRoLFxuICAgIGhlaWdodDogY29uZmlnLmhlaWdodCxcbiAgICBkaXNwbGF5OiBcImZsZXhcIixcbiAgICB0cmFuc2Zvcm06IGBzY2FsZSgke3NjYWxlfSlgLFxuICAgIG1hcmdpbkxlZnQ6IGxheW91dC54Q29ycmVjdGlvbixcbiAgICBtYXJnaW5Ub3A6IGxheW91dC55Q29ycmVjdGlvbixcbiAgICBvdmVyZmxvdzogb3ZlcmZsb3dWaXNpYmxlID8gXCJ2aXNpYmxlXCIgOiBcImhpZGRlblwiXG4gIH07XG59O1xudmFyIGNhbGN1bGF0ZU91dGVyID0gKHtcbiAgbGF5b3V0LFxuICBzY2FsZSxcbiAgY29uZmlnLFxuICBvdmVyZmxvd1Zpc2libGVcbn0pID0+IHtcbiAgaWYgKCFjb25maWcpIHtcbiAgICByZXR1cm4ge307XG4gIH1cbiAgaWYgKCFsYXlvdXQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgd2lkdGg6IGNvbmZpZy53aWR0aCAqIHNjYWxlLFxuICAgICAgaGVpZ2h0OiBjb25maWcuaGVpZ2h0ICogc2NhbGUsXG4gICAgICBkaXNwbGF5OiBcImZsZXhcIixcbiAgICAgIGZsZXhEaXJlY3Rpb246IFwiY29sdW1uXCIsXG4gICAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxuICAgICAgb3ZlcmZsb3c6IG92ZXJmbG93VmlzaWJsZSA/IFwidmlzaWJsZVwiIDogXCJoaWRkZW5cIlxuICAgIH07XG4gIH1cbiAgY29uc3QgeyBjZW50ZXJYLCBjZW50ZXJZIH0gPSBsYXlvdXQ7XG4gIHJldHVybiB7XG4gICAgd2lkdGg6IGNvbmZpZy53aWR0aCAqIHNjYWxlLFxuICAgIGhlaWdodDogY29uZmlnLmhlaWdodCAqIHNjYWxlLFxuICAgIGRpc3BsYXk6IFwiZmxleFwiLFxuICAgIGZsZXhEaXJlY3Rpb246IFwiY29sdW1uXCIsXG4gICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcbiAgICBsZWZ0OiBjZW50ZXJYLFxuICAgIHRvcDogY2VudGVyWSxcbiAgICBvdmVyZmxvdzogb3ZlcmZsb3dWaXNpYmxlID8gXCJ2aXNpYmxlXCIgOiBcImhpZGRlblwiXG4gIH07XG59O1xuXG4vLyBzcmMvZW1pdHRlci1jb250ZXh0LnRzXG5pbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG52YXIgUGxheWVyRXZlbnRFbWl0dGVyQ29udGV4dCA9IFJlYWN0LmNyZWF0ZUNvbnRleHQodW5kZWZpbmVkKTtcbnZhciBUaHVtYm5haWxFbWl0dGVyQ29udGV4dCA9IFJlYWN0LmNyZWF0ZUNvbnRleHQodW5kZWZpbmVkKTtcblxuLy8gc3JjL0VtaXR0ZXJQcm92aWRlci50c3hcbmltcG9ydCB7IHVzZUNvbnRleHQgYXMgdXNlQ29udGV4dDIsIHVzZUVmZmVjdCBhcyB1c2VFZmZlY3QyLCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgSW50ZXJuYWxzIGFzIEludGVybmFsczMgfSBmcm9tIFwicmVtb3Rpb25cIjtcblxuLy8gc3JjL2V2ZW50LWVtaXR0ZXIudHNcbmNsYXNzIFBsYXllckVtaXR0ZXIge1xuICBsaXN0ZW5lcnMgPSB7XG4gICAgZW5kZWQ6IFtdLFxuICAgIGVycm9yOiBbXSxcbiAgICBwYXVzZTogW10sXG4gICAgcGxheTogW10sXG4gICAgcmF0ZWNoYW5nZTogW10sXG4gICAgc2NhbGVjaGFuZ2U6IFtdLFxuICAgIHNlZWtlZDogW10sXG4gICAgdGltZXVwZGF0ZTogW10sXG4gICAgZnJhbWV1cGRhdGU6IFtdLFxuICAgIGZ1bGxzY3JlZW5jaGFuZ2U6IFtdLFxuICAgIHZvbHVtZWNoYW5nZTogW10sXG4gICAgbXV0ZWNoYW5nZTogW10sXG4gICAgd2FpdGluZzogW10sXG4gICAgcmVzdW1lOiBbXVxuICB9O1xuICBhZGRFdmVudExpc3RlbmVyKG5hbWUsIGNhbGxiYWNrKSB7XG4gICAgdGhpcy5saXN0ZW5lcnNbbmFtZV0ucHVzaChjYWxsYmFjayk7XG4gIH1cbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcihuYW1lLCBjYWxsYmFjaykge1xuICAgIHRoaXMubGlzdGVuZXJzW25hbWVdID0gdGhpcy5saXN0ZW5lcnNbbmFtZV0uZmlsdGVyKChsKSA9PiBsICE9PSBjYWxsYmFjayk7XG4gIH1cbiAgZGlzcGF0Y2hFdmVudChkaXNwYXRjaE5hbWUsIGNvbnRleHQpIHtcbiAgICB0aGlzLmxpc3RlbmVyc1tkaXNwYXRjaE5hbWVdLmZvckVhY2goKGNhbGxiYWNrKSA9PiB7XG4gICAgICBjYWxsYmFjayh7IGRldGFpbDogY29udGV4dCB9KTtcbiAgICB9KTtcbiAgfVxuICBkaXNwYXRjaFNlZWsgPSAoZnJhbWUpID0+IHtcbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQoXCJzZWVrZWRcIiwge1xuICAgICAgZnJhbWVcbiAgICB9KTtcbiAgfTtcbiAgZGlzcGF0Y2hWb2x1bWVDaGFuZ2UgPSAodm9sdW1lKSA9PiB7XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KFwidm9sdW1lY2hhbmdlXCIsIHtcbiAgICAgIHZvbHVtZVxuICAgIH0pO1xuICB9O1xuICBkaXNwYXRjaFBhdXNlID0gKCkgPT4ge1xuICAgIHRoaXMuZGlzcGF0Y2hFdmVudChcInBhdXNlXCIsIHVuZGVmaW5lZCk7XG4gIH07XG4gIGRpc3BhdGNoUGxheSA9ICgpID0+IHtcbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQoXCJwbGF5XCIsIHVuZGVmaW5lZCk7XG4gIH07XG4gIGRpc3BhdGNoRW5kZWQgPSAoKSA9PiB7XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KFwiZW5kZWRcIiwgdW5kZWZpbmVkKTtcbiAgfTtcbiAgZGlzcGF0Y2hSYXRlQ2hhbmdlID0gKHBsYXliYWNrUmF0ZSkgPT4ge1xuICAgIHRoaXMuZGlzcGF0Y2hFdmVudChcInJhdGVjaGFuZ2VcIiwge1xuICAgICAgcGxheWJhY2tSYXRlXG4gICAgfSk7XG4gIH07XG4gIGRpc3BhdGNoU2NhbGVDaGFuZ2UgPSAoc2NhbGUpID0+IHtcbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQoXCJzY2FsZWNoYW5nZVwiLCB7XG4gICAgICBzY2FsZVxuICAgIH0pO1xuICB9O1xuICBkaXNwYXRjaEVycm9yID0gKGVycm9yKSA9PiB7XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KFwiZXJyb3JcIiwge1xuICAgICAgZXJyb3JcbiAgICB9KTtcbiAgfTtcbiAgZGlzcGF0Y2hUaW1lVXBkYXRlID0gKGV2ZW50KSA9PiB7XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KFwidGltZXVwZGF0ZVwiLCBldmVudCk7XG4gIH07XG4gIGRpc3BhdGNoRnJhbWVVcGRhdGUgPSAoZXZlbnQpID0+IHtcbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQoXCJmcmFtZXVwZGF0ZVwiLCBldmVudCk7XG4gIH07XG4gIGRpc3BhdGNoRnVsbHNjcmVlbkNoYW5nZSA9IChldmVudCkgPT4ge1xuICAgIHRoaXMuZGlzcGF0Y2hFdmVudChcImZ1bGxzY3JlZW5jaGFuZ2VcIiwgZXZlbnQpO1xuICB9O1xuICBkaXNwYXRjaE11dGVDaGFuZ2UgPSAoZXZlbnQpID0+IHtcbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQoXCJtdXRlY2hhbmdlXCIsIGV2ZW50KTtcbiAgfTtcbiAgZGlzcGF0Y2hXYWl0aW5nID0gKGV2ZW50KSA9PiB7XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KFwid2FpdGluZ1wiLCBldmVudCk7XG4gIH07XG4gIGRpc3BhdGNoUmVzdW1lID0gKGV2ZW50KSA9PiB7XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KFwicmVzdW1lXCIsIGV2ZW50KTtcbiAgfTtcbn1cblxuY2xhc3MgVGh1bWJuYWlsRW1pdHRlciB7XG4gIGxpc3RlbmVycyA9IHtcbiAgICBlcnJvcjogW10sXG4gICAgd2FpdGluZzogW10sXG4gICAgcmVzdW1lOiBbXVxuICB9O1xuICBhZGRFdmVudExpc3RlbmVyKG5hbWUsIGNhbGxiYWNrKSB7XG4gICAgdGhpcy5saXN0ZW5lcnNbbmFtZV0ucHVzaChjYWxsYmFjayk7XG4gIH1cbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcihuYW1lLCBjYWxsYmFjaykge1xuICAgIHRoaXMubGlzdGVuZXJzW25hbWVdID0gdGhpcy5saXN0ZW5lcnNbbmFtZV0uZmlsdGVyKChsKSA9PiBsICE9PSBjYWxsYmFjayk7XG4gIH1cbiAgZGlzcGF0Y2hFdmVudChkaXNwYXRjaE5hbWUsIGNvbnRleHQpIHtcbiAgICB0aGlzLmxpc3RlbmVyc1tkaXNwYXRjaE5hbWVdLmZvckVhY2goKGNhbGxiYWNrKSA9PiB7XG4gICAgICBjYWxsYmFjayh7IGRldGFpbDogY29udGV4dCB9KTtcbiAgICB9KTtcbiAgfVxuICBkaXNwYXRjaEVycm9yID0gKGVycm9yKSA9PiB7XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KFwiZXJyb3JcIiwge1xuICAgICAgZXJyb3JcbiAgICB9KTtcbiAgfTtcbiAgZGlzcGF0Y2hXYWl0aW5nID0gKGV2ZW50KSA9PiB7XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KFwid2FpdGluZ1wiLCBldmVudCk7XG4gIH07XG4gIGRpc3BhdGNoUmVzdW1lID0gKGV2ZW50KSA9PiB7XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KFwicmVzdW1lXCIsIGV2ZW50KTtcbiAgfTtcbn1cblxuLy8gc3JjL3VzZS1idWZmZXItc3RhdGUtZW1pdHRlci50c1xuaW1wb3J0IHsgdXNlQ29udGV4dCwgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBJbnRlcm5hbHMgYXMgSW50ZXJuYWxzMiB9IGZyb20gXCJyZW1vdGlvblwiO1xudmFyIHVzZUJ1ZmZlclN0YXRlRW1pdHRlciA9IChlbWl0dGVyKSA9PiB7XG4gIGNvbnN0IGJ1ZmZlck1hbmFnZXIgPSB1c2VDb250ZXh0KEludGVybmFsczIuQnVmZmVyaW5nQ29udGV4dFJlYWN0KTtcbiAgaWYgKCFidWZmZXJNYW5hZ2VyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQnVmZmVyaW5nQ29udGV4dFJlYWN0IG5vdCBmb3VuZFwiKTtcbiAgfVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGNsZWFyMSA9IGJ1ZmZlck1hbmFnZXIubGlzdGVuRm9yQnVmZmVyaW5nKCgpID0+IHtcbiAgICAgIGJ1ZmZlck1hbmFnZXIuYnVmZmVyaW5nLmN1cnJlbnQgPSB0cnVlO1xuICAgICAgZW1pdHRlci5kaXNwYXRjaFdhaXRpbmcoe30pO1xuICAgIH0pO1xuICAgIGNvbnN0IGNsZWFyMiA9IGJ1ZmZlck1hbmFnZXIubGlzdGVuRm9yUmVzdW1lKCgpID0+IHtcbiAgICAgIGJ1ZmZlck1hbmFnZXIuYnVmZmVyaW5nLmN1cnJlbnQgPSBmYWxzZTtcbiAgICAgIGVtaXR0ZXIuZGlzcGF0Y2hSZXN1bWUoe30pO1xuICAgIH0pO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjbGVhcjEucmVtb3ZlKCk7XG4gICAgICBjbGVhcjIucmVtb3ZlKCk7XG4gICAgfTtcbiAgfSwgW2J1ZmZlck1hbmFnZXIsIGVtaXR0ZXJdKTtcbn07XG5cbi8vIHNyYy9FbWl0dGVyUHJvdmlkZXIudHN4XG5pbXBvcnQgeyBqc3ggYXMganN4MyB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xudmFyIFBsYXllckVtaXR0ZXJQcm92aWRlciA9ICh7IGNoaWxkcmVuLCBjdXJyZW50UGxheWJhY2tSYXRlIH0pID0+IHtcbiAgY29uc3QgW2VtaXR0ZXJdID0gdXNlU3RhdGUoKCkgPT4gbmV3IFBsYXllckVtaXR0ZXIpO1xuICBjb25zdCBidWZmZXJNYW5hZ2VyID0gdXNlQ29udGV4dDIoSW50ZXJuYWxzMy5CdWZmZXJpbmdDb250ZXh0UmVhY3QpO1xuICBpZiAoIWJ1ZmZlck1hbmFnZXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJCdWZmZXJpbmdDb250ZXh0UmVhY3Qgbm90IGZvdW5kXCIpO1xuICB9XG4gIHVzZUVmZmVjdDIoKCkgPT4ge1xuICAgIGlmIChjdXJyZW50UGxheWJhY2tSYXRlKSB7XG4gICAgICBlbWl0dGVyLmRpc3BhdGNoUmF0ZUNoYW5nZShjdXJyZW50UGxheWJhY2tSYXRlKTtcbiAgICB9XG4gIH0sIFtlbWl0dGVyLCBjdXJyZW50UGxheWJhY2tSYXRlXSk7XG4gIHVzZUJ1ZmZlclN0YXRlRW1pdHRlcihlbWl0dGVyKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gzKFBsYXllckV2ZW50RW1pdHRlckNvbnRleHQuUHJvdmlkZXIsIHtcbiAgICB2YWx1ZTogZW1pdHRlcixcbiAgICBjaGlsZHJlblxuICB9KTtcbn07XG5cbi8vIHNyYy91c2UtZnJhbWUtaW1wZXJhdGl2ZS50c1xuaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZVJlZiB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgSW50ZXJuYWxzIGFzIEludGVybmFsczQgfSBmcm9tIFwicmVtb3Rpb25cIjtcbnZhciB1c2VGcmFtZUltcGVyYXRpdmUgPSAoKSA9PiB7XG4gIGNvbnN0IGZyYW1lID0gSW50ZXJuYWxzNC5UaW1lbGluZS51c2VUaW1lbGluZVBvc2l0aW9uKCk7XG4gIGNvbnN0IGZyYW1lUmVmID0gdXNlUmVmKGZyYW1lKTtcbiAgZnJhbWVSZWYuY3VycmVudCA9IGZyYW1lO1xuICBjb25zdCBnZXRDdXJyZW50RnJhbWUgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgcmV0dXJuIGZyYW1lUmVmLmN1cnJlbnQ7XG4gIH0sIFtdKTtcbiAgcmV0dXJuIGdldEN1cnJlbnRGcmFtZTtcbn07XG5cbi8vIHNyYy91c2UtaG92ZXItc3RhdGUudHNcbmltcG9ydCB7IHVzZUVmZmVjdCBhcyB1c2VFZmZlY3QzLCB1c2VTdGF0ZSBhcyB1c2VTdGF0ZTIgfSBmcm9tIFwicmVhY3RcIjtcbnZhciB1c2VIb3ZlclN0YXRlID0gKHJlZiwgaGlkZUNvbnRyb2xzV2hlblBvaW50ZXJEb2VzbnRNb3ZlKSA9PiB7XG4gIGNvbnN0IFtob3ZlcmVkLCBzZXRIb3ZlcmVkXSA9IHVzZVN0YXRlMihmYWxzZSk7XG4gIHVzZUVmZmVjdDMoKCkgPT4ge1xuICAgIGNvbnN0IHsgY3VycmVudCB9ID0gcmVmO1xuICAgIGlmICghY3VycmVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsZXQgaG92ZXJUaW1lb3V0O1xuICAgIGNvbnN0IGFkZEhvdmVyVGltZW91dCA9ICgpID0+IHtcbiAgICAgIGlmIChoaWRlQ29udHJvbHNXaGVuUG9pbnRlckRvZXNudE1vdmUpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KGhvdmVyVGltZW91dCk7XG4gICAgICAgIGhvdmVyVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIHNldEhvdmVyZWQoZmFsc2UpO1xuICAgICAgICB9LCBoaWRlQ29udHJvbHNXaGVuUG9pbnRlckRvZXNudE1vdmUgPT09IHRydWUgPyAzMDAwIDogaGlkZUNvbnRyb2xzV2hlblBvaW50ZXJEb2VzbnRNb3ZlKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IG9uSG92ZXIgPSAoKSA9PiB7XG4gICAgICBzZXRIb3ZlcmVkKHRydWUpO1xuICAgICAgYWRkSG92ZXJUaW1lb3V0KCk7XG4gICAgfTtcbiAgICBjb25zdCBvbkxlYXZlID0gKCkgPT4ge1xuICAgICAgc2V0SG92ZXJlZChmYWxzZSk7XG4gICAgICBjbGVhclRpbWVvdXQoaG92ZXJUaW1lb3V0KTtcbiAgICB9O1xuICAgIGNvbnN0IG9uTW92ZSA9ICgpID0+IHtcbiAgICAgIHNldEhvdmVyZWQodHJ1ZSk7XG4gICAgICBhZGRIb3ZlclRpbWVvdXQoKTtcbiAgICB9O1xuICAgIGN1cnJlbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZW50ZXJcIiwgb25Ib3Zlcik7XG4gICAgY3VycmVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2VsZWF2ZVwiLCBvbkxlYXZlKTtcbiAgICBjdXJyZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgb25Nb3ZlKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgY3VycmVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2VlbnRlclwiLCBvbkhvdmVyKTtcbiAgICAgIGN1cnJlbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbGVhdmVcIiwgb25MZWF2ZSk7XG4gICAgICBjdXJyZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgb25Nb3ZlKTtcbiAgICAgIGNsZWFyVGltZW91dChob3ZlclRpbWVvdXQpO1xuICAgIH07XG4gIH0sIFtoaWRlQ29udHJvbHNXaGVuUG9pbnRlckRvZXNudE1vdmUsIHJlZl0pO1xuICByZXR1cm4gaG92ZXJlZDtcbn07XG5cbi8vIHNyYy91c2UtcGxheWJhY2sudHNcbmltcG9ydCB7IHVzZUNvbnRleHQgYXMgdXNlQ29udGV4dDQsIHVzZUVmZmVjdCBhcyB1c2VFZmZlY3Q2LCB1c2VSZWYgYXMgdXNlUmVmNCB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgSW50ZXJuYWxzIGFzIEludGVybmFsczYgfSBmcm9tIFwicmVtb3Rpb25cIjtcblxuLy8gc3JjL2Jyb3dzZXItbWVkaWFzZXNzaW9uLnRzXG5pbXBvcnQgeyB1c2VFZmZlY3QgYXMgdXNlRWZmZWN0NCB9IGZyb20gXCJyZWFjdFwiO1xuXG4vLyBzcmMvdXNlLXBsYXllci50c1xuaW1wb3J0IHsgdXNlQ2FsbGJhY2sgYXMgdXNlQ2FsbGJhY2syLCB1c2VDb250ZXh0IGFzIHVzZUNvbnRleHQzLCB1c2VNZW1vLCB1c2VSZWYgYXMgdXNlUmVmMiwgdXNlU3RhdGUgYXMgdXNlU3RhdGUzIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBJbnRlcm5hbHMgYXMgSW50ZXJuYWxzNSB9IGZyb20gXCJyZW1vdGlvblwiO1xudmFyIHVzZVBsYXllciA9ICgpID0+IHtcbiAgY29uc3QgW3BsYXlpbmcsIHNldFBsYXlpbmcsIGltcGVyYXRpdmVQbGF5aW5nXSA9IEludGVybmFsczUuVGltZWxpbmUudXNlUGxheWluZ1N0YXRlKCk7XG4gIGNvbnN0IFtoYXNQbGF5ZWQsIHNldEhhc1BsYXllZF0gPSB1c2VTdGF0ZTMoZmFsc2UpO1xuICBjb25zdCBmcmFtZSA9IEludGVybmFsczUuVGltZWxpbmUudXNlVGltZWxpbmVQb3NpdGlvbigpO1xuICBjb25zdCBwbGF5U3RhcnQgPSB1c2VSZWYyKGZyYW1lKTtcbiAgY29uc3Qgc2V0RnJhbWUgPSBJbnRlcm5hbHM1LlRpbWVsaW5lLnVzZVRpbWVsaW5lU2V0RnJhbWUoKTtcbiAgY29uc3Qgc2V0VGltZWxpbmVQb3NpdGlvbiA9IEludGVybmFsczUuVGltZWxpbmUudXNlVGltZWxpbmVTZXRGcmFtZSgpO1xuICBjb25zdCBhdWRpb0NvbnRleHQgPSB1c2VDb250ZXh0MyhJbnRlcm5hbHM1LlNoYXJlZEF1ZGlvQ29udGV4dCk7XG4gIGNvbnN0IHsgYXVkaW9BbmRWaWRlb1RhZ3MgfSA9IHVzZUNvbnRleHQzKEludGVybmFsczUuVGltZWxpbmVDb250ZXh0KTtcbiAgY29uc3QgZnJhbWVSZWYgPSB1c2VSZWYyKGZyYW1lKTtcbiAgZnJhbWVSZWYuY3VycmVudCA9IGZyYW1lO1xuICBjb25zdCB2aWRlbyA9IEludGVybmFsczUudXNlVmlkZW8oKTtcbiAgY29uc3QgY29uZmlnID0gSW50ZXJuYWxzNS51c2VVbnNhZmVWaWRlb0NvbmZpZygpO1xuICBjb25zdCBlbWl0dGVyID0gdXNlQ29udGV4dDMoUGxheWVyRXZlbnRFbWl0dGVyQ29udGV4dCk7XG4gIGNvbnN0IGxhc3RGcmFtZSA9IChjb25maWc/LmR1cmF0aW9uSW5GcmFtZXMgPz8gMSkgLSAxO1xuICBjb25zdCBpc0xhc3RGcmFtZSA9IGZyYW1lID09PSBsYXN0RnJhbWU7XG4gIGNvbnN0IGlzRmlyc3RGcmFtZSA9IGZyYW1lID09PSAwO1xuICBpZiAoIWVtaXR0ZXIpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRXhwZWN0ZWQgUGxheWVyIGV2ZW50IGVtaXR0ZXIgY29udGV4dFwiKTtcbiAgfVxuICBjb25zdCBidWZmZXJpbmdDb250ZXh0ID0gdXNlQ29udGV4dDMoSW50ZXJuYWxzNS5CdWZmZXJpbmdDb250ZXh0UmVhY3QpO1xuICBpZiAoIWJ1ZmZlcmluZ0NvbnRleHQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIHRoZSBidWZmZXJpbmcgY29udGV4dC4gTW9zdCBsaWtlbHkgeW91IGhhdmUgYSBSZW1vdGlvbiB2ZXJzaW9uIG1pc21hdGNoLlwiKTtcbiAgfVxuICBjb25zdCB7IGJ1ZmZlcmluZyB9ID0gYnVmZmVyaW5nQ29udGV4dDtcbiAgY29uc3Qgc2VlayA9IHVzZUNhbGxiYWNrMigobmV3RnJhbWUpID0+IHtcbiAgICBpZiAodmlkZW8/LmlkKSB7XG4gICAgICBzZXRUaW1lbGluZVBvc2l0aW9uKChjKSA9PiAoeyAuLi5jLCBbdmlkZW8uaWRdOiBuZXdGcmFtZSB9KSk7XG4gICAgfVxuICAgIGZyYW1lUmVmLmN1cnJlbnQgPSBuZXdGcmFtZTtcbiAgICBlbWl0dGVyLmRpc3BhdGNoU2VlayhuZXdGcmFtZSk7XG4gIH0sIFtlbWl0dGVyLCBzZXRUaW1lbGluZVBvc2l0aW9uLCB2aWRlbz8uaWRdKTtcbiAgY29uc3QgcGxheSA9IHVzZUNhbGxiYWNrMigoZSkgPT4ge1xuICAgIGlmIChpbXBlcmF0aXZlUGxheWluZy5jdXJyZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHNldEhhc1BsYXllZCh0cnVlKTtcbiAgICBpZiAoaXNMYXN0RnJhbWUpIHtcbiAgICAgIHNlZWsoMCk7XG4gICAgfVxuICAgIGF1ZGlvQ29udGV4dD8uYXVkaW9Db250ZXh0Py5yZXN1bWUoKTtcbiAgICBpZiAoYXVkaW9Db250ZXh0ICYmIGF1ZGlvQ29udGV4dC5udW1iZXJPZkF1ZGlvVGFncyA+IDAgJiYgZSkge1xuICAgICAgYXVkaW9Db250ZXh0LnBsYXlBbGxBdWRpb3MoKTtcbiAgICB9XG4gICAgYXVkaW9BbmRWaWRlb1RhZ3MuY3VycmVudC5mb3JFYWNoKChhKSA9PiBhLnBsYXkoXCJwbGF5ZXIgcGxheSgpIHdhcyBjYWxsZWQgYW5kIHBsYXlpbmcgYXVkaW8gZnJvbSBhIGNsaWNrXCIpKTtcbiAgICBpbXBlcmF0aXZlUGxheWluZy5jdXJyZW50ID0gdHJ1ZTtcbiAgICBzZXRQbGF5aW5nKHRydWUpO1xuICAgIHBsYXlTdGFydC5jdXJyZW50ID0gZnJhbWVSZWYuY3VycmVudDtcbiAgICBlbWl0dGVyLmRpc3BhdGNoUGxheSgpO1xuICB9LCBbXG4gICAgaW1wZXJhdGl2ZVBsYXlpbmcsXG4gICAgaXNMYXN0RnJhbWUsXG4gICAgYXVkaW9Db250ZXh0LFxuICAgIHNldFBsYXlpbmcsXG4gICAgZW1pdHRlcixcbiAgICBzZWVrLFxuICAgIGF1ZGlvQW5kVmlkZW9UYWdzXG4gIF0pO1xuICBjb25zdCBwYXVzZSA9IHVzZUNhbGxiYWNrMigoKSA9PiB7XG4gICAgaWYgKGltcGVyYXRpdmVQbGF5aW5nLmN1cnJlbnQpIHtcbiAgICAgIGltcGVyYXRpdmVQbGF5aW5nLmN1cnJlbnQgPSBmYWxzZTtcbiAgICAgIHNldFBsYXlpbmcoZmFsc2UpO1xuICAgICAgZW1pdHRlci5kaXNwYXRjaFBhdXNlKCk7XG4gICAgICBhdWRpb0NvbnRleHQ/LmF1ZGlvQ29udGV4dD8uc3VzcGVuZCgpO1xuICAgIH1cbiAgfSwgW2VtaXR0ZXIsIGltcGVyYXRpdmVQbGF5aW5nLCBzZXRQbGF5aW5nLCBhdWRpb0NvbnRleHRdKTtcbiAgY29uc3QgcGF1c2VBbmRSZXR1cm5Ub1BsYXlTdGFydCA9IHVzZUNhbGxiYWNrMigoKSA9PiB7XG4gICAgaWYgKGltcGVyYXRpdmVQbGF5aW5nLmN1cnJlbnQpIHtcbiAgICAgIGltcGVyYXRpdmVQbGF5aW5nLmN1cnJlbnQgPSBmYWxzZTtcbiAgICAgIGZyYW1lUmVmLmN1cnJlbnQgPSBwbGF5U3RhcnQuY3VycmVudDtcbiAgICAgIGlmIChjb25maWcpIHtcbiAgICAgICAgc2V0VGltZWxpbmVQb3NpdGlvbigoYykgPT4gKHtcbiAgICAgICAgICAuLi5jLFxuICAgICAgICAgIFtjb25maWcuaWRdOiBwbGF5U3RhcnQuY3VycmVudFxuICAgICAgICB9KSk7XG4gICAgICAgIHNldFBsYXlpbmcoZmFsc2UpO1xuICAgICAgICBlbWl0dGVyLmRpc3BhdGNoUGF1c2UoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtjb25maWcsIGVtaXR0ZXIsIGltcGVyYXRpdmVQbGF5aW5nLCBzZXRQbGF5aW5nLCBzZXRUaW1lbGluZVBvc2l0aW9uXSk7XG4gIGNvbnN0IHZpZGVvSWQgPSB2aWRlbz8uaWQ7XG4gIGNvbnN0IGZyYW1lQmFjayA9IHVzZUNhbGxiYWNrMigoZnJhbWVzKSA9PiB7XG4gICAgaWYgKCF2aWRlb0lkKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaWYgKGltcGVyYXRpdmVQbGF5aW5nLmN1cnJlbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc2V0RnJhbWUoKGMpID0+IHtcbiAgICAgIGNvbnN0IHByZXZGcmFtZSA9IGNbdmlkZW9JZF0gPz8gd2luZG93LnJlbW90aW9uX2luaXRpYWxGcmFtZSA/PyAwO1xuICAgICAgY29uc3QgbmV3RnJhbWUgPSBNYXRoLm1heCgwLCBwcmV2RnJhbWUgLSBmcmFtZXMpO1xuICAgICAgaWYgKHByZXZGcmFtZSA9PT0gbmV3RnJhbWUpIHtcbiAgICAgICAgcmV0dXJuIGM7XG4gICAgICB9XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5jLFxuICAgICAgICBbdmlkZW9JZF06IG5ld0ZyYW1lXG4gICAgICB9O1xuICAgIH0pO1xuICB9LCBbaW1wZXJhdGl2ZVBsYXlpbmcsIHNldEZyYW1lLCB2aWRlb0lkXSk7XG4gIGNvbnN0IGZyYW1lRm9yd2FyZCA9IHVzZUNhbGxiYWNrMigoZnJhbWVzKSA9PiB7XG4gICAgaWYgKCF2aWRlb0lkKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaWYgKGltcGVyYXRpdmVQbGF5aW5nLmN1cnJlbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc2V0RnJhbWUoKGMpID0+IHtcbiAgICAgIGNvbnN0IHByZXZGcmFtZSA9IGNbdmlkZW9JZF0gPz8gd2luZG93LnJlbW90aW9uX2luaXRpYWxGcmFtZSA/PyAwO1xuICAgICAgY29uc3QgbmV3RnJhbWUgPSBNYXRoLm1pbihsYXN0RnJhbWUsIHByZXZGcmFtZSArIGZyYW1lcyk7XG4gICAgICBpZiAocHJldkZyYW1lID09PSBuZXdGcmFtZSkge1xuICAgICAgICByZXR1cm4gYztcbiAgICAgIH1cbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLmMsXG4gICAgICAgIFt2aWRlb0lkXTogbmV3RnJhbWVcbiAgICAgIH07XG4gICAgfSk7XG4gIH0sIFt2aWRlb0lkLCBpbXBlcmF0aXZlUGxheWluZywgbGFzdEZyYW1lLCBzZXRGcmFtZV0pO1xuICBjb25zdCB0b2dnbGUgPSB1c2VDYWxsYmFjazIoKGUpID0+IHtcbiAgICBpZiAoaW1wZXJhdGl2ZVBsYXlpbmcuY3VycmVudCkge1xuICAgICAgcGF1c2UoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcGxheShlKTtcbiAgICB9XG4gIH0sIFtpbXBlcmF0aXZlUGxheWluZywgcGF1c2UsIHBsYXldKTtcbiAgY29uc3QgcmV0dXJuVmFsdWUgPSB1c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgZnJhbWVCYWNrLFxuICAgICAgZnJhbWVGb3J3YXJkLFxuICAgICAgaXNMYXN0RnJhbWUsXG4gICAgICBlbWl0dGVyLFxuICAgICAgcGxheWluZyxcbiAgICAgIHBsYXksXG4gICAgICBwYXVzZSxcbiAgICAgIHNlZWssXG4gICAgICBpc0ZpcnN0RnJhbWUsXG4gICAgICBnZXRDdXJyZW50RnJhbWU6ICgpID0+IGZyYW1lUmVmLmN1cnJlbnQsXG4gICAgICBpc1BsYXlpbmc6ICgpID0+IGltcGVyYXRpdmVQbGF5aW5nLmN1cnJlbnQsXG4gICAgICBpc0J1ZmZlcmluZzogKCkgPT4gYnVmZmVyaW5nLmN1cnJlbnQsXG4gICAgICBwYXVzZUFuZFJldHVyblRvUGxheVN0YXJ0LFxuICAgICAgaGFzUGxheWVkLFxuICAgICAgdG9nZ2xlXG4gICAgfTtcbiAgfSwgW1xuICAgIGJ1ZmZlcmluZyxcbiAgICBlbWl0dGVyLFxuICAgIGZyYW1lQmFjayxcbiAgICBmcmFtZUZvcndhcmQsXG4gICAgaGFzUGxheWVkLFxuICAgIGltcGVyYXRpdmVQbGF5aW5nLFxuICAgIGlzRmlyc3RGcmFtZSxcbiAgICBpc0xhc3RGcmFtZSxcbiAgICBwYXVzZSxcbiAgICBwYXVzZUFuZFJldHVyblRvUGxheVN0YXJ0LFxuICAgIHBsYXksXG4gICAgcGxheWluZyxcbiAgICBzZWVrLFxuICAgIHRvZ2dsZVxuICBdKTtcbiAgcmV0dXJuIHJldHVyblZhbHVlO1xufTtcblxuLy8gc3JjL2Jyb3dzZXItbWVkaWFzZXNzaW9uLnRzXG52YXIgdXNlQnJvd3Nlck1lZGlhU2Vzc2lvbiA9ICh7XG4gIGJyb3dzZXJNZWRpYUNvbnRyb2xzQmVoYXZpb3IsXG4gIHZpZGVvQ29uZmlnLFxuICBwbGF5YmFja1JhdGVcbn0pID0+IHtcbiAgY29uc3QgeyBwbGF5aW5nLCBwYXVzZSwgcGxheSwgZW1pdHRlciwgZ2V0Q3VycmVudEZyYW1lLCBzZWVrIH0gPSB1c2VQbGF5ZXIoKTtcbiAgdXNlRWZmZWN0NCgoKSA9PiB7XG4gICAgaWYgKCFuYXZpZ2F0b3IubWVkaWFTZXNzaW9uKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChicm93c2VyTWVkaWFDb250cm9sc0JlaGF2aW9yLm1vZGUgPT09IFwiZG8tbm90aGluZ1wiKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChwbGF5aW5nKSB7XG4gICAgICBuYXZpZ2F0b3IubWVkaWFTZXNzaW9uLnBsYXliYWNrU3RhdGUgPSBcInBsYXlpbmdcIjtcbiAgICB9IGVsc2Uge1xuICAgICAgbmF2aWdhdG9yLm1lZGlhU2Vzc2lvbi5wbGF5YmFja1N0YXRlID0gXCJwYXVzZWRcIjtcbiAgICB9XG4gIH0sIFticm93c2VyTWVkaWFDb250cm9sc0JlaGF2aW9yLm1vZGUsIHBsYXlpbmddKTtcbiAgdXNlRWZmZWN0NCgoKSA9PiB7XG4gICAgaWYgKCFuYXZpZ2F0b3IubWVkaWFTZXNzaW9uKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChicm93c2VyTWVkaWFDb250cm9sc0JlaGF2aW9yLm1vZGUgPT09IFwiZG8tbm90aGluZ1wiKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IG9uVGltZVVwZGF0ZSA9ICgpID0+IHtcbiAgICAgIGlmICghdmlkZW9Db25maWcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKG5hdmlnYXRvci5tZWRpYVNlc3Npb24pIHtcbiAgICAgICAgbmF2aWdhdG9yLm1lZGlhU2Vzc2lvbi5zZXRQb3NpdGlvblN0YXRlKHtcbiAgICAgICAgICBkdXJhdGlvbjogdmlkZW9Db25maWcuZHVyYXRpb25JbkZyYW1lcyAvIHZpZGVvQ29uZmlnLmZwcyxcbiAgICAgICAgICBwbGF5YmFja1JhdGUsXG4gICAgICAgICAgcG9zaXRpb246IGdldEN1cnJlbnRGcmFtZSgpIC8gdmlkZW9Db25maWcuZnBzXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG4gICAgZW1pdHRlci5hZGRFdmVudExpc3RlbmVyKFwidGltZXVwZGF0ZVwiLCBvblRpbWVVcGRhdGUpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBlbWl0dGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0aW1ldXBkYXRlXCIsIG9uVGltZVVwZGF0ZSk7XG4gICAgfTtcbiAgfSwgW1xuICAgIGJyb3dzZXJNZWRpYUNvbnRyb2xzQmVoYXZpb3IubW9kZSxcbiAgICBlbWl0dGVyLFxuICAgIGdldEN1cnJlbnRGcmFtZSxcbiAgICBwbGF5YmFja1JhdGUsXG4gICAgdmlkZW9Db25maWdcbiAgXSk7XG4gIHVzZUVmZmVjdDQoKCkgPT4ge1xuICAgIGlmICghbmF2aWdhdG9yLm1lZGlhU2Vzc2lvbikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoYnJvd3Nlck1lZGlhQ29udHJvbHNCZWhhdmlvci5tb2RlID09PSBcImRvLW5vdGhpbmdcIikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBuYXZpZ2F0b3IubWVkaWFTZXNzaW9uLnNldEFjdGlvbkhhbmRsZXIoXCJwbGF5XCIsICgpID0+IHtcbiAgICAgIGlmIChicm93c2VyTWVkaWFDb250cm9sc0JlaGF2aW9yLm1vZGUgPT09IFwicmVnaXN0ZXItbWVkaWEtc2Vzc2lvblwiKSB7XG4gICAgICAgIHBsYXkoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBuYXZpZ2F0b3IubWVkaWFTZXNzaW9uLnNldEFjdGlvbkhhbmRsZXIoXCJwYXVzZVwiLCAoKSA9PiB7XG4gICAgICBpZiAoYnJvd3Nlck1lZGlhQ29udHJvbHNCZWhhdmlvci5tb2RlID09PSBcInJlZ2lzdGVyLW1lZGlhLXNlc3Npb25cIikge1xuICAgICAgICBwYXVzZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIG5hdmlnYXRvci5tZWRpYVNlc3Npb24uc2V0QWN0aW9uSGFuZGxlcihcInNlZWt0b1wiLCAoZXZlbnQpID0+IHtcbiAgICAgIGlmIChicm93c2VyTWVkaWFDb250cm9sc0JlaGF2aW9yLm1vZGUgPT09IFwicmVnaXN0ZXItbWVkaWEtc2Vzc2lvblwiICYmIGV2ZW50LnNlZWtUaW1lICE9PSB1bmRlZmluZWQgJiYgdmlkZW9Db25maWcpIHtcbiAgICAgICAgc2VlayhNYXRoLnJvdW5kKGV2ZW50LnNlZWtUaW1lICogdmlkZW9Db25maWcuZnBzKSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgbmF2aWdhdG9yLm1lZGlhU2Vzc2lvbi5zZXRBY3Rpb25IYW5kbGVyKFwic2Vla2JhY2t3YXJkXCIsICgpID0+IHtcbiAgICAgIGlmIChicm93c2VyTWVkaWFDb250cm9sc0JlaGF2aW9yLm1vZGUgPT09IFwicmVnaXN0ZXItbWVkaWEtc2Vzc2lvblwiICYmIHZpZGVvQ29uZmlnKSB7XG4gICAgICAgIHNlZWsoTWF0aC5tYXgoMCwgTWF0aC5yb3VuZCgoZ2V0Q3VycmVudEZyYW1lKCkgLSAxMCkgKiB2aWRlb0NvbmZpZy5mcHMpKSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgbmF2aWdhdG9yLm1lZGlhU2Vzc2lvbi5zZXRBY3Rpb25IYW5kbGVyKFwic2Vla2ZvcndhcmRcIiwgKCkgPT4ge1xuICAgICAgaWYgKGJyb3dzZXJNZWRpYUNvbnRyb2xzQmVoYXZpb3IubW9kZSA9PT0gXCJyZWdpc3Rlci1tZWRpYS1zZXNzaW9uXCIgJiYgdmlkZW9Db25maWcpIHtcbiAgICAgICAgc2VlayhNYXRoLm1heCh2aWRlb0NvbmZpZy5kdXJhdGlvbkluRnJhbWVzIC0gMSwgTWF0aC5yb3VuZCgoZ2V0Q3VycmVudEZyYW1lKCkgKyAxMCkgKiB2aWRlb0NvbmZpZy5mcHMpKSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgbmF2aWdhdG9yLm1lZGlhU2Vzc2lvbi5zZXRBY3Rpb25IYW5kbGVyKFwicHJldmlvdXN0cmFja1wiLCAoKSA9PiB7XG4gICAgICBpZiAoYnJvd3Nlck1lZGlhQ29udHJvbHNCZWhhdmlvci5tb2RlID09PSBcInJlZ2lzdGVyLW1lZGlhLXNlc3Npb25cIikge1xuICAgICAgICBzZWVrKDApO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBuYXZpZ2F0b3IubWVkaWFTZXNzaW9uLm1ldGFkYXRhID0gbnVsbDtcbiAgICAgIG5hdmlnYXRvci5tZWRpYVNlc3Npb24uc2V0QWN0aW9uSGFuZGxlcihcInBsYXlcIiwgbnVsbCk7XG4gICAgICBuYXZpZ2F0b3IubWVkaWFTZXNzaW9uLnNldEFjdGlvbkhhbmRsZXIoXCJwYXVzZVwiLCBudWxsKTtcbiAgICAgIG5hdmlnYXRvci5tZWRpYVNlc3Npb24uc2V0QWN0aW9uSGFuZGxlcihcInNlZWt0b1wiLCBudWxsKTtcbiAgICAgIG5hdmlnYXRvci5tZWRpYVNlc3Npb24uc2V0QWN0aW9uSGFuZGxlcihcInNlZWtiYWNrd2FyZFwiLCBudWxsKTtcbiAgICAgIG5hdmlnYXRvci5tZWRpYVNlc3Npb24uc2V0QWN0aW9uSGFuZGxlcihcInNlZWtmb3J3YXJkXCIsIG51bGwpO1xuICAgICAgbmF2aWdhdG9yLm1lZGlhU2Vzc2lvbi5zZXRBY3Rpb25IYW5kbGVyKFwicHJldmlvdXN0cmFja1wiLCBudWxsKTtcbiAgICB9O1xuICB9LCBbXG4gICAgYnJvd3Nlck1lZGlhQ29udHJvbHNCZWhhdmlvci5tb2RlLFxuICAgIGdldEN1cnJlbnRGcmFtZSxcbiAgICBwYXVzZSxcbiAgICBwbGF5LFxuICAgIHNlZWssXG4gICAgdmlkZW9Db25maWdcbiAgXSk7XG59O1xuXG4vLyBzcmMvY2FsY3VsYXRlLW5leHQtZnJhbWUudHNcbnZhciBjYWxjdWxhdGVOZXh0RnJhbWUgPSAoe1xuICB0aW1lLFxuICBjdXJyZW50RnJhbWU6IHN0YXJ0RnJhbWUsXG4gIHBsYXliYWNrU3BlZWQsXG4gIGZwcyxcbiAgYWN0dWFsTGFzdEZyYW1lLFxuICBhY3R1YWxGaXJzdEZyYW1lLFxuICBmcmFtZXNBZHZhbmNlZCxcbiAgc2hvdWxkTG9vcFxufSkgPT4ge1xuICBjb25zdCBvcCA9IHBsYXliYWNrU3BlZWQgPCAwID8gTWF0aC5jZWlsIDogTWF0aC5mbG9vcjtcbiAgY29uc3QgZnJhbWVzVG9BZHZhbmNlID0gb3AodGltZSAqIHBsYXliYWNrU3BlZWQgLyAoMTAwMCAvIGZwcykpIC0gZnJhbWVzQWR2YW5jZWQ7XG4gIGNvbnN0IG5leHRGcmFtZSA9IGZyYW1lc1RvQWR2YW5jZSArIHN0YXJ0RnJhbWU7XG4gIGNvbnN0IGlzQ3VycmVudEZyYW1lT3V0c2lkZSA9IHN0YXJ0RnJhbWUgPiBhY3R1YWxMYXN0RnJhbWUgfHwgc3RhcnRGcmFtZSA8IGFjdHVhbEZpcnN0RnJhbWU7XG4gIGNvbnN0IGlzTmV4dEZyYW1lT3V0c2lkZSA9IG5leHRGcmFtZSA+IGFjdHVhbExhc3RGcmFtZSB8fCBuZXh0RnJhbWUgPCBhY3R1YWxGaXJzdEZyYW1lO1xuICBjb25zdCBoYXNFbmRlZCA9ICFzaG91bGRMb29wICYmIGlzTmV4dEZyYW1lT3V0c2lkZSAmJiAhaXNDdXJyZW50RnJhbWVPdXRzaWRlO1xuICBpZiAocGxheWJhY2tTcGVlZCA+IDApIHtcbiAgICBpZiAoaXNOZXh0RnJhbWVPdXRzaWRlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBuZXh0RnJhbWU6IGFjdHVhbEZpcnN0RnJhbWUsXG4gICAgICAgIGZyYW1lc1RvQWR2YW5jZSxcbiAgICAgICAgaGFzRW5kZWRcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7IG5leHRGcmFtZSwgZnJhbWVzVG9BZHZhbmNlLCBoYXNFbmRlZCB9O1xuICB9XG4gIGlmIChpc05leHRGcmFtZU91dHNpZGUpIHtcbiAgICByZXR1cm4geyBuZXh0RnJhbWU6IGFjdHVhbExhc3RGcmFtZSwgZnJhbWVzVG9BZHZhbmNlLCBoYXNFbmRlZCB9O1xuICB9XG4gIHJldHVybiB7IG5leHRGcmFtZSwgZnJhbWVzVG9BZHZhbmNlLCBoYXNFbmRlZCB9O1xufTtcblxuLy8gc3JjL2lzLWJhY2tncm91bmRlZC50c1xuaW1wb3J0IHsgdXNlRWZmZWN0IGFzIHVzZUVmZmVjdDUsIHVzZVJlZiBhcyB1c2VSZWYzIH0gZnJvbSBcInJlYWN0XCI7XG52YXIgZ2V0SXNCYWNrZ3JvdW5kZWQgPSAoKSA9PiB7XG4gIGlmICh0eXBlb2YgZG9jdW1lbnQgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIGRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSA9PT0gXCJoaWRkZW5cIjtcbn07XG52YXIgdXNlSXNCYWNrZ3JvdW5kZWQgPSAoKSA9PiB7XG4gIGNvbnN0IGlzQmFja2dyb3VuZGVkID0gdXNlUmVmMyhnZXRJc0JhY2tncm91bmRlZCgpKTtcbiAgdXNlRWZmZWN0NSgoKSA9PiB7XG4gICAgY29uc3Qgb25WaXNpYmlsaXR5Q2hhbmdlID0gKCkgPT4ge1xuICAgICAgaXNCYWNrZ3JvdW5kZWQuY3VycmVudCA9IGdldElzQmFja2dyb3VuZGVkKCk7XG4gICAgfTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCBvblZpc2liaWxpdHlDaGFuZ2UpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCBvblZpc2liaWxpdHlDaGFuZ2UpO1xuICAgIH07XG4gIH0sIFtdKTtcbiAgcmV0dXJuIGlzQmFja2dyb3VuZGVkO1xufTtcblxuLy8gc3JjL3VzZS1wbGF5YmFjay50c1xudmFyIHVzZVBsYXliYWNrID0gKHtcbiAgbG9vcCxcbiAgcGxheWJhY2tSYXRlLFxuICBtb3ZlVG9CZWdpbm5pbmdXaGVuRW5kZWQsXG4gIGluRnJhbWUsXG4gIG91dEZyYW1lLFxuICBicm93c2VyTWVkaWFDb250cm9sc0JlaGF2aW9yLFxuICBnZXRDdXJyZW50RnJhbWVcbn0pID0+IHtcbiAgY29uc3QgY29uZmlnID0gSW50ZXJuYWxzNi51c2VVbnNhZmVWaWRlb0NvbmZpZygpO1xuICBjb25zdCBmcmFtZSA9IEludGVybmFsczYuVGltZWxpbmUudXNlVGltZWxpbmVQb3NpdGlvbigpO1xuICBjb25zdCB7IHBsYXlpbmcsIHBhdXNlLCBlbWl0dGVyIH0gPSB1c2VQbGF5ZXIoKTtcbiAgY29uc3Qgc2V0RnJhbWUgPSBJbnRlcm5hbHM2LlRpbWVsaW5lLnVzZVRpbWVsaW5lU2V0RnJhbWUoKTtcbiAgY29uc3QgaXNCYWNrZ3JvdW5kZWRSZWYgPSB1c2VJc0JhY2tncm91bmRlZCgpO1xuICBjb25zdCBsYXN0VGltZVVwZGF0ZUV2ZW50ID0gdXNlUmVmNChudWxsKTtcbiAgY29uc3QgY29udGV4dCA9IHVzZUNvbnRleHQ0KEludGVybmFsczYuQnVmZmVyaW5nQ29udGV4dFJlYWN0KTtcbiAgaWYgKCFjb250ZXh0KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyB0aGUgYnVmZmVyaW5nIGNvbnRleHQuIE1vc3QgbGlrZWx5IHlvdSBoYXZlIGEgUmVtb3Rpb24gdmVyc2lvbiBtaXNtYXRjaC5cIik7XG4gIH1cbiAgdXNlQnJvd3Nlck1lZGlhU2Vzc2lvbih7XG4gICAgYnJvd3Nlck1lZGlhQ29udHJvbHNCZWhhdmlvcixcbiAgICBwbGF5YmFja1JhdGUsXG4gICAgdmlkZW9Db25maWc6IGNvbmZpZ1xuICB9KTtcbiAgdXNlRWZmZWN0NigoKSA9PiB7XG4gICAgaWYgKCFjb25maWcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCFwbGF5aW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGxldCBoYXNCZWVuU3RvcHBlZCA9IGZhbHNlO1xuICAgIGxldCByZXFBbmltRnJhbWVDYWxsID0gbnVsbDtcbiAgICBsZXQgc3RhcnRlZFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICBsZXQgZnJhbWVzQWR2YW5jZWQgPSAwO1xuICAgIGNvbnN0IGNhbmNlbFF1ZXVlZEZyYW1lID0gKCkgPT4ge1xuICAgICAgaWYgKHJlcUFuaW1GcmFtZUNhbGwgIT09IG51bGwpIHtcbiAgICAgICAgaWYgKHJlcUFuaW1GcmFtZUNhbGwudHlwZSA9PT0gXCJyYWZcIikge1xuICAgICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHJlcUFuaW1GcmFtZUNhbGwuaWQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNsZWFyVGltZW91dChyZXFBbmltRnJhbWVDYWxsLmlkKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgc3RvcCA9ICgpID0+IHtcbiAgICAgIGhhc0JlZW5TdG9wcGVkID0gdHJ1ZTtcbiAgICAgIGNhbmNlbFF1ZXVlZEZyYW1lKCk7XG4gICAgfTtcbiAgICBjb25zdCBjYWxsYmFjayA9ICgpID0+IHtcbiAgICAgIGlmIChoYXNCZWVuU3RvcHBlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCB0aW1lID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydGVkVGltZTtcbiAgICAgIGNvbnN0IGFjdHVhbExhc3RGcmFtZSA9IG91dEZyYW1lID8/IGNvbmZpZy5kdXJhdGlvbkluRnJhbWVzIC0gMTtcbiAgICAgIGNvbnN0IGFjdHVhbEZpcnN0RnJhbWUgPSBpbkZyYW1lID8/IDA7XG4gICAgICBjb25zdCBjdXJyZW50RnJhbWUgPSBnZXRDdXJyZW50RnJhbWUoKTtcbiAgICAgIGNvbnN0IHsgbmV4dEZyYW1lLCBmcmFtZXNUb0FkdmFuY2UsIGhhc0VuZGVkIH0gPSBjYWxjdWxhdGVOZXh0RnJhbWUoe1xuICAgICAgICB0aW1lLFxuICAgICAgICBjdXJyZW50RnJhbWUsXG4gICAgICAgIHBsYXliYWNrU3BlZWQ6IHBsYXliYWNrUmF0ZSxcbiAgICAgICAgZnBzOiBjb25maWcuZnBzLFxuICAgICAgICBhY3R1YWxGaXJzdEZyYW1lLFxuICAgICAgICBhY3R1YWxMYXN0RnJhbWUsXG4gICAgICAgIGZyYW1lc0FkdmFuY2VkLFxuICAgICAgICBzaG91bGRMb29wOiBsb29wXG4gICAgICB9KTtcbiAgICAgIGZyYW1lc0FkdmFuY2VkICs9IGZyYW1lc1RvQWR2YW5jZTtcbiAgICAgIGlmIChuZXh0RnJhbWUgIT09IGdldEN1cnJlbnRGcmFtZSgpICYmICghaGFzRW5kZWQgfHwgbW92ZVRvQmVnaW5uaW5nV2hlbkVuZGVkKSkge1xuICAgICAgICBzZXRGcmFtZSgoYykgPT4gKHsgLi4uYywgW2NvbmZpZy5pZF06IG5leHRGcmFtZSB9KSk7XG4gICAgICB9XG4gICAgICBpZiAoaGFzRW5kZWQpIHtcbiAgICAgICAgc3RvcCgpO1xuICAgICAgICBwYXVzZSgpO1xuICAgICAgICBlbWl0dGVyLmRpc3BhdGNoRW5kZWQoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgcXVldWVOZXh0RnJhbWUoKTtcbiAgICB9O1xuICAgIGNvbnN0IHF1ZXVlTmV4dEZyYW1lID0gKCkgPT4ge1xuICAgICAgaWYgKGNvbnRleHQuYnVmZmVyaW5nLmN1cnJlbnQpIHtcbiAgICAgICAgY29uc3Qgc3RvcExpc3RlbmluZyA9IGNvbnRleHQubGlzdGVuRm9yUmVzdW1lKCgpID0+IHtcbiAgICAgICAgICBzdG9wTGlzdGVuaW5nLnJlbW92ZSgpO1xuICAgICAgICAgIHN0YXJ0ZWRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICAgICAgZnJhbWVzQWR2YW5jZWQgPSAwO1xuICAgICAgICAgIHF1ZXVlTmV4dEZyYW1lKCk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoaXNCYWNrZ3JvdW5kZWRSZWYuY3VycmVudCkge1xuICAgICAgICByZXFBbmltRnJhbWVDYWxsID0ge1xuICAgICAgICAgIHR5cGU6IFwidGltZW91dFwiLFxuICAgICAgICAgIGlkOiBzZXRUaW1lb3V0KGNhbGxiYWNrLCAxMDAwIC8gY29uZmlnLmZwcylcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgcmVxQW5pbUZyYW1lQ2FsbCA9IHsgdHlwZTogXCJyYWZcIiwgaWQ6IHJlcXVlc3RBbmltYXRpb25GcmFtZShjYWxsYmFjaykgfTtcbiAgICB9O1xuICAgIHF1ZXVlTmV4dEZyYW1lKCk7XG4gICAgY29uc3Qgb25WaXNpYmlsaXR5Q2hhbmdlID0gKCkgPT4ge1xuICAgICAgaWYgKGRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSA9PT0gXCJ2aXNpYmxlXCIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY2FuY2VsUXVldWVkRnJhbWUoKTtcbiAgICAgIGNhbGxiYWNrKCk7XG4gICAgfTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIiwgb25WaXNpYmlsaXR5Q2hhbmdlKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIG9uVmlzaWJpbGl0eUNoYW5nZSk7XG4gICAgICBzdG9wKCk7XG4gICAgfTtcbiAgfSwgW1xuICAgIGNvbmZpZyxcbiAgICBsb29wLFxuICAgIHBhdXNlLFxuICAgIHBsYXlpbmcsXG4gICAgc2V0RnJhbWUsXG4gICAgZW1pdHRlcixcbiAgICBwbGF5YmFja1JhdGUsXG4gICAgaW5GcmFtZSxcbiAgICBvdXRGcmFtZSxcbiAgICBtb3ZlVG9CZWdpbm5pbmdXaGVuRW5kZWQsXG4gICAgaXNCYWNrZ3JvdW5kZWRSZWYsXG4gICAgZ2V0Q3VycmVudEZyYW1lLFxuICAgIGNvbnRleHRcbiAgXSk7XG4gIHVzZUVmZmVjdDYoKCkgPT4ge1xuICAgIGNvbnN0IGludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgaWYgKGxhc3RUaW1lVXBkYXRlRXZlbnQuY3VycmVudCA9PT0gZ2V0Q3VycmVudEZyYW1lKCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZW1pdHRlci5kaXNwYXRjaFRpbWVVcGRhdGUoeyBmcmFtZTogZ2V0Q3VycmVudEZyYW1lKCkgfSk7XG4gICAgICBsYXN0VGltZVVwZGF0ZUV2ZW50LmN1cnJlbnQgPSBnZXRDdXJyZW50RnJhbWUoKTtcbiAgICB9LCAyNTApO1xuICAgIHJldHVybiAoKSA9PiBjbGVhckludGVydmFsKGludGVydmFsKTtcbiAgfSwgW2VtaXR0ZXIsIGdldEN1cnJlbnRGcmFtZV0pO1xuICB1c2VFZmZlY3Q2KCgpID0+IHtcbiAgICBlbWl0dGVyLmRpc3BhdGNoRnJhbWVVcGRhdGUoeyBmcmFtZSB9KTtcbiAgfSwgW2VtaXR0ZXIsIGZyYW1lXSk7XG59O1xuXG4vLyBzcmMvdXRpbHMvdXNlLWVsZW1lbnQtc2l6ZS50c1xuaW1wb3J0IHsgdXNlQ2FsbGJhY2sgYXMgdXNlQ2FsbGJhY2szLCB1c2VFZmZlY3QgYXMgdXNlRWZmZWN0NywgdXNlTWVtbyBhcyB1c2VNZW1vMiwgdXNlU3RhdGUgYXMgdXNlU3RhdGU0IH0gZnJvbSBcInJlYWN0XCI7XG52YXIgZWxlbWVudFNpemVIb29rcyA9IFtdO1xudmFyIHVwZGF0ZUFsbEVsZW1lbnRzU2l6ZXMgPSAoKSA9PiB7XG4gIGZvciAoY29uc3QgbGlzdGVuZXIgb2YgZWxlbWVudFNpemVIb29rcykge1xuICAgIGxpc3RlbmVyKCk7XG4gIH1cbn07XG52YXIgdXNlRWxlbWVudFNpemUgPSAocmVmLCBvcHRpb25zKSA9PiB7XG4gIGNvbnN0IFtzaXplLCBzZXRTaXplXSA9IHVzZVN0YXRlNCgoKSA9PiB7XG4gICAgaWYgKCFyZWYuY3VycmVudCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IHJlY3QgPSByZWYuY3VycmVudC5nZXRDbGllbnRSZWN0cygpO1xuICAgIGlmICghcmVjdFswXSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICB3aWR0aDogcmVjdFswXS53aWR0aCxcbiAgICAgIGhlaWdodDogcmVjdFswXS5oZWlnaHQsXG4gICAgICBsZWZ0OiByZWN0WzBdLngsXG4gICAgICB0b3A6IHJlY3RbMF0ueSxcbiAgICAgIHdpbmRvd1NpemU6IHtcbiAgICAgICAgaGVpZ2h0OiB3aW5kb3cuaW5uZXJIZWlnaHQsXG4gICAgICAgIHdpZHRoOiB3aW5kb3cuaW5uZXJXaWR0aFxuICAgICAgfVxuICAgIH07XG4gIH0pO1xuICBjb25zdCBvYnNlcnZlciA9IHVzZU1lbW8yKCgpID0+IHtcbiAgICBpZiAodHlwZW9mIFJlc2l6ZU9ic2VydmVyID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBSZXNpemVPYnNlcnZlcigoZW50cmllcykgPT4ge1xuICAgICAgY29uc3QgeyBjb250ZW50UmVjdCwgdGFyZ2V0IH0gPSBlbnRyaWVzWzBdO1xuICAgICAgY29uc3QgbmV3U2l6ZSA9IHRhcmdldC5nZXRDbGllbnRSZWN0cygpO1xuICAgICAgaWYgKCFuZXdTaXplPy5bMF0pIHtcbiAgICAgICAgc2V0U2l6ZShudWxsKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgcHJvYmFibGVDc3NQYXJlbnRTY2FsZSA9IGNvbnRlbnRSZWN0LndpZHRoID09PSAwID8gMSA6IG5ld1NpemVbMF0ud2lkdGggLyBjb250ZW50UmVjdC53aWR0aDtcbiAgICAgIGNvbnN0IHdpZHRoID0gb3B0aW9ucy5zaG91bGRBcHBseUNzc1RyYW5zZm9ybXMgfHwgcHJvYmFibGVDc3NQYXJlbnRTY2FsZSA9PT0gMCA/IG5ld1NpemVbMF0ud2lkdGggOiBuZXdTaXplWzBdLndpZHRoICogKDEgLyBwcm9iYWJsZUNzc1BhcmVudFNjYWxlKTtcbiAgICAgIGNvbnN0IGhlaWdodCA9IG9wdGlvbnMuc2hvdWxkQXBwbHlDc3NUcmFuc2Zvcm1zIHx8IHByb2JhYmxlQ3NzUGFyZW50U2NhbGUgPT09IDAgPyBuZXdTaXplWzBdLmhlaWdodCA6IG5ld1NpemVbMF0uaGVpZ2h0ICogKDEgLyBwcm9iYWJsZUNzc1BhcmVudFNjYWxlKTtcbiAgICAgIHNldFNpemUoKHByZXZTdGF0ZSkgPT4ge1xuICAgICAgICBjb25zdCBpc1NhbWUgPSBwcmV2U3RhdGUgJiYgcHJldlN0YXRlLndpZHRoID09PSB3aWR0aCAmJiBwcmV2U3RhdGUuaGVpZ2h0ID09PSBoZWlnaHQgJiYgcHJldlN0YXRlLmxlZnQgPT09IG5ld1NpemVbMF0ueCAmJiBwcmV2U3RhdGUudG9wID09PSBuZXdTaXplWzBdLnkgJiYgcHJldlN0YXRlLndpbmRvd1NpemUuaGVpZ2h0ID09PSB3aW5kb3cuaW5uZXJIZWlnaHQgJiYgcHJldlN0YXRlLndpbmRvd1NpemUud2lkdGggPT09IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgICBpZiAoaXNTYW1lKSB7XG4gICAgICAgICAgcmV0dXJuIHByZXZTdGF0ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHdpZHRoLFxuICAgICAgICAgIGhlaWdodCxcbiAgICAgICAgICBsZWZ0OiBuZXdTaXplWzBdLngsXG4gICAgICAgICAgdG9wOiBuZXdTaXplWzBdLnksXG4gICAgICAgICAgd2luZG93U2l6ZToge1xuICAgICAgICAgICAgaGVpZ2h0OiB3aW5kb3cuaW5uZXJIZWlnaHQsXG4gICAgICAgICAgICB3aWR0aDogd2luZG93LmlubmVyV2lkdGhcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSwgW29wdGlvbnMuc2hvdWxkQXBwbHlDc3NUcmFuc2Zvcm1zXSk7XG4gIGNvbnN0IHVwZGF0ZVNpemUgPSB1c2VDYWxsYmFjazMoKCkgPT4ge1xuICAgIGlmICghcmVmLmN1cnJlbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgcmVjdCA9IHJlZi5jdXJyZW50LmdldENsaWVudFJlY3RzKCk7XG4gICAgaWYgKCFyZWN0WzBdKSB7XG4gICAgICBzZXRTaXplKG51bGwpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzZXRTaXplKChwcmV2U3RhdGUpID0+IHtcbiAgICAgIGNvbnN0IGlzU2FtZSA9IHByZXZTdGF0ZSAmJiBwcmV2U3RhdGUud2lkdGggPT09IHJlY3RbMF0ud2lkdGggJiYgcHJldlN0YXRlLmhlaWdodCA9PT0gcmVjdFswXS5oZWlnaHQgJiYgcHJldlN0YXRlLmxlZnQgPT09IHJlY3RbMF0ueCAmJiBwcmV2U3RhdGUudG9wID09PSByZWN0WzBdLnkgJiYgcHJldlN0YXRlLndpbmRvd1NpemUuaGVpZ2h0ID09PSB3aW5kb3cuaW5uZXJIZWlnaHQgJiYgcHJldlN0YXRlLndpbmRvd1NpemUud2lkdGggPT09IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgaWYgKGlzU2FtZSkge1xuICAgICAgICByZXR1cm4gcHJldlN0YXRlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgd2lkdGg6IHJlY3RbMF0ud2lkdGgsXG4gICAgICAgIGhlaWdodDogcmVjdFswXS5oZWlnaHQsXG4gICAgICAgIGxlZnQ6IHJlY3RbMF0ueCxcbiAgICAgICAgdG9wOiByZWN0WzBdLnksXG4gICAgICAgIHdpbmRvd1NpemU6IHtcbiAgICAgICAgICBoZWlnaHQ6IHdpbmRvdy5pbm5lckhlaWdodCxcbiAgICAgICAgICB3aWR0aDogd2luZG93LmlubmVyV2lkdGhcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9KTtcbiAgfSwgW3JlZl0pO1xuICB1c2VFZmZlY3Q3KCgpID0+IHtcbiAgICBpZiAoIW9ic2VydmVyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHsgY3VycmVudCB9ID0gcmVmO1xuICAgIGlmIChjdXJyZW50KSB7XG4gICAgICBvYnNlcnZlci5vYnNlcnZlKGN1cnJlbnQpO1xuICAgIH1cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKGN1cnJlbnQpIHtcbiAgICAgICAgb2JzZXJ2ZXIudW5vYnNlcnZlKGN1cnJlbnQpO1xuICAgICAgfVxuICAgIH07XG4gIH0sIFtvYnNlcnZlciwgcmVmLCB1cGRhdGVTaXplXSk7XG4gIHVzZUVmZmVjdDcoKCkgPT4ge1xuICAgIGlmICghb3B0aW9ucy50cmlnZ2VyT25XaW5kb3dSZXNpemUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgdXBkYXRlU2l6ZSk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIHVwZGF0ZVNpemUpO1xuICAgIH07XG4gIH0sIFtvcHRpb25zLnRyaWdnZXJPbldpbmRvd1Jlc2l6ZSwgdXBkYXRlU2l6ZV0pO1xuICB1c2VFZmZlY3Q3KCgpID0+IHtcbiAgICBlbGVtZW50U2l6ZUhvb2tzLnB1c2godXBkYXRlU2l6ZSk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGVsZW1lbnRTaXplSG9va3MgPSBlbGVtZW50U2l6ZUhvb2tzLmZpbHRlcigoZSkgPT4gZSAhPT0gdXBkYXRlU2l6ZSk7XG4gICAgfTtcbiAgfSwgW3VwZGF0ZVNpemVdKTtcbiAgcmV0dXJuIHVzZU1lbW8yKCgpID0+IHtcbiAgICBpZiAoIXNpemUpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4geyAuLi5zaXplLCByZWZyZXNoOiB1cGRhdGVTaXplIH07XG4gIH0sIFtzaXplLCB1cGRhdGVTaXplXSk7XG59O1xuXG4vLyBzcmMvUGxheWVyLnRzeFxuaW1wb3J0IHtcbiAgZm9yd2FyZFJlZiBhcyBmb3J3YXJkUmVmMixcbiAgdXNlRWZmZWN0IGFzIHVzZUVmZmVjdDE0LFxuICB1c2VJbXBlcmF0aXZlSGFuZGxlIGFzIHVzZUltcGVyYXRpdmVIYW5kbGUyLFxuICB1c2VMYXlvdXRFZmZlY3QsXG4gIHVzZU1lbW8gYXMgdXNlTWVtbzE0LFxuICB1c2VSZWYgYXMgdXNlUmVmMTEsXG4gIHVzZVN0YXRlIGFzIHVzZVN0YXRlMTNcbn0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBDb21wb3NpdGlvbiwgSW50ZXJuYWxzIGFzIEludGVybmFsczE1IH0gZnJvbSBcInJlbW90aW9uXCI7XG5cbi8vIHNyYy9QbGF5ZXJVSS50c3hcbmltcG9ydCBSZWFjdDEwLCB7XG4gIFN1c3BlbnNlLFxuICBmb3J3YXJkUmVmLFxuICB1c2VDYWxsYmFjayBhcyB1c2VDYWxsYmFjazExLFxuICB1c2VDb250ZXh0IGFzIHVzZUNvbnRleHQ2LFxuICB1c2VFZmZlY3QgYXMgdXNlRWZmZWN0MTMsXG4gIHVzZUltcGVyYXRpdmVIYW5kbGUsXG4gIHVzZU1lbW8gYXMgdXNlTWVtbzEyLFxuICB1c2VSZWYgYXMgdXNlUmVmMTAsXG4gIHVzZVN0YXRlIGFzIHVzZVN0YXRlMTFcbn0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBJbnRlcm5hbHMgYXMgSW50ZXJuYWxzMTEgfSBmcm9tIFwicmVtb3Rpb25cIjtcblxuLy8gc3JjL1BsYXllckNvbnRyb2xzLnRzeFxuaW1wb3J0IHsgdXNlQ2FsbGJhY2sgYXMgdXNlQ2FsbGJhY2s4LCB1c2VFZmZlY3QgYXMgdXNlRWZmZWN0MTEsIHVzZU1lbW8gYXMgdXNlTWVtbzksIHVzZVJlZiBhcyB1c2VSZWY4LCB1c2VTdGF0ZSBhcyB1c2VTdGF0ZTEwIH0gZnJvbSBcInJlYWN0XCI7XG5cbi8vIHNyYy9EZWZhdWx0UGxheVBhdXNlQnV0dG9uLnRzeFxuaW1wb3J0IHsganN4IGFzIGpzeDQgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbnZhciBEZWZhdWx0UGxheVBhdXNlQnV0dG9uID0gKHsgcGxheWluZywgYnVmZmVyaW5nIH0pID0+IHtcbiAgaWYgKHBsYXlpbmcgJiYgYnVmZmVyaW5nKSB7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3g0KEJ1ZmZlcmluZ0luZGljYXRvciwge1xuICAgICAgdHlwZTogXCJwbGF5ZXJcIlxuICAgIH0pO1xuICB9XG4gIGlmIChwbGF5aW5nKSB7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3g0KFBhdXNlSWNvbiwge30pO1xuICB9XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4NChQbGF5SWNvbiwge30pO1xufTtcblxuLy8gc3JjL01lZGlhVm9sdW1lU2xpZGVyLnRzeFxuaW1wb3J0IHsgdXNlQ2FsbGJhY2sgYXMgdXNlQ2FsbGJhY2s1LCB1c2VNZW1vIGFzIHVzZU1lbW80LCB1c2VSZWYgYXMgdXNlUmVmNSwgdXNlU3RhdGUgYXMgdXNlU3RhdGU2IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBJbnRlcm5hbHMgYXMgSW50ZXJuYWxzNyB9IGZyb20gXCJyZW1vdGlvblwiO1xuXG4vLyBzcmMvcmVuZGVyLXZvbHVtZS1zbGlkZXIudHN4XG5pbXBvcnQgUmVhY3QzLCB7IHVzZUNhbGxiYWNrIGFzIHVzZUNhbGxiYWNrNCwgdXNlTWVtbyBhcyB1c2VNZW1vMywgdXNlU3RhdGUgYXMgdXNlU3RhdGU1IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyByYW5kb20gfSBmcm9tIFwicmVtb3Rpb25cIjtcbmltcG9ydCB7IGpzeCBhcyBqc3g1LCBqc3hzIGFzIGpzeHMzIH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG52YXIgS05PQl9TSVpFID0gMTI7XG52YXIgQkFSX0hFSUdIVCA9IDU7XG52YXIgRGVmYXVsdFZvbHVtZVNsaWRlciA9ICh7XG4gIHZvbHVtZSxcbiAgaXNWZXJ0aWNhbCxcbiAgb25CbHVyLFxuICBpbnB1dFJlZixcbiAgc2V0Vm9sdW1lXG59KSA9PiB7XG4gIGNvbnN0IHNsaWRlckNvbnRhaW5lciA9IHVzZU1lbW8zKCgpID0+IHtcbiAgICBjb25zdCBwYWRkaW5nTGVmdCA9IDU7XG4gICAgY29uc3QgY29tbW9uID0ge1xuICAgICAgcGFkZGluZ0xlZnQsXG4gICAgICBoZWlnaHQ6IElDT05fU0laRSxcbiAgICAgIHdpZHRoOiBWT0xVTUVfU0xJREVSX1dJRFRILFxuICAgICAgZGlzcGxheTogXCJpbmxpbmUtZmxleFwiLFxuICAgICAgYWxpZ25JdGVtczogXCJjZW50ZXJcIlxuICAgIH07XG4gICAgaWYgKGlzVmVydGljYWwpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLmNvbW1vbixcbiAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcbiAgICAgICAgdHJhbnNmb3JtOiBgcm90YXRlKC05MGRlZykgdHJhbnNsYXRlWCgke1ZPTFVNRV9TTElERVJfV0lEVEggLyAyICsgSUNPTl9TSVpFIC8gMn1weClgXG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgLi4uY29tbW9uXG4gICAgfTtcbiAgfSwgW2lzVmVydGljYWxdKTtcbiAgY29uc3QgcmFuZG9tSWQgPSB0eXBlb2YgUmVhY3QzLnVzZUlkID09PSBcInVuZGVmaW5lZFwiID8gXCJ2b2x1bWUtc2xpZGVyXCIgOiBSZWFjdDMudXNlSWQoKTtcbiAgY29uc3QgW3JhbmRvbUNsYXNzXSA9IHVzZVN0YXRlNSgoKSA9PiBgX19yZW1vdGlvbi12b2x1bWUtc2xpZGVyLSR7cmFuZG9tKHJhbmRvbUlkKX1gLnJlcGxhY2UoXCIuXCIsIFwiXCIpKTtcbiAgY29uc3Qgb25Wb2x1bWVDaGFuZ2UgPSB1c2VDYWxsYmFjazQoKGUpID0+IHtcbiAgICBzZXRWb2x1bWUocGFyc2VGbG9hdChlLnRhcmdldC52YWx1ZSkpO1xuICB9LCBbc2V0Vm9sdW1lXSk7XG4gIGNvbnN0IGlucHV0U3R5bGUgPSB1c2VNZW1vMygoKSA9PiB7XG4gICAgY29uc3QgY29tbW9uU3R5bGUgPSB7XG4gICAgICBXZWJraXRBcHBlYXJhbmNlOiBcIm5vbmVcIixcbiAgICAgIGJhY2tncm91bmRDb2xvcjogXCJyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNSlcIixcbiAgICAgIGJvcmRlclJhZGl1czogQkFSX0hFSUdIVCAvIDIsXG4gICAgICBjdXJzb3I6IFwicG9pbnRlclwiLFxuICAgICAgaGVpZ2h0OiBCQVJfSEVJR0hULFxuICAgICAgd2lkdGg6IFZPTFVNRV9TTElERVJfV0lEVEgsXG4gICAgICBiYWNrZ3JvdW5kSW1hZ2U6IGBsaW5lYXItZ3JhZGllbnQoXG5cdFx0XHRcdHRvIHJpZ2h0LFxuXHRcdFx0XHR3aGl0ZSAke3ZvbHVtZSAqIDEwMH0lLCByZ2JhKDI1NSwgMjU1LCAyNTUsIDApICR7dm9sdW1lICogMTAwfSVcblx0XHRcdClgXG4gICAgfTtcbiAgICBpZiAoaXNWZXJ0aWNhbCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uY29tbW9uU3R5bGUsXG4gICAgICAgIGJvdHRvbTogSUNPTl9TSVpFICsgVk9MVU1FX1NMSURFUl9XSURUSCAvIDJcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBjb21tb25TdHlsZTtcbiAgfSwgW2lzVmVydGljYWwsIHZvbHVtZV0pO1xuICBjb25zdCBzbGlkZXJTdHlsZSA9IGBcblx0LiR7cmFuZG9tQ2xhc3N9Ojotd2Via2l0LXNsaWRlci10aHVtYiB7XG5cdFx0LXdlYmtpdC1hcHBlYXJhbmNlOiBub25lO1xuXHRcdGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xuXHRcdGJvcmRlci1yYWRpdXM6ICR7S05PQl9TSVpFIC8gMn1weDtcblx0XHRib3gtc2hhZG93OiAwIDAgMnB4IGJsYWNrO1xuXHRcdGhlaWdodDogJHtLTk9CX1NJWkV9cHg7XG5cdFx0d2lkdGg6ICR7S05PQl9TSVpFfXB4O1xuXHR9XG5cblx0LiR7cmFuZG9tQ2xhc3N9OjotbW96LXJhbmdlLXRodW1iIHtcblx0XHQtd2Via2l0LWFwcGVhcmFuY2U6IG5vbmU7XG5cdFx0YmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XG5cdFx0Ym9yZGVyLXJhZGl1czogJHtLTk9CX1NJWkUgLyAyfXB4O1xuXHRcdGJveC1zaGFkb3c6IDAgMCAycHggYmxhY2s7XG5cdFx0aGVpZ2h0OiAke0tOT0JfU0laRX1weDtcblx0XHR3aWR0aDogJHtLTk9CX1NJWkV9cHg7XG5cdH1cbmA7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4czMoXCJkaXZcIiwge1xuICAgIHN0eWxlOiBzbGlkZXJDb250YWluZXIsXG4gICAgY2hpbGRyZW46IFtcbiAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3g1KFwic3R5bGVcIiwge1xuICAgICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTDoge1xuICAgICAgICAgIF9faHRtbDogc2xpZGVyU3R5bGVcbiAgICAgICAgfVxuICAgICAgfSksXG4gICAgICAvKiBAX19QVVJFX18gKi8ganN4NShcImlucHV0XCIsIHtcbiAgICAgICAgcmVmOiBpbnB1dFJlZixcbiAgICAgICAgXCJhcmlhLWxhYmVsXCI6IFwiQ2hhbmdlIHZvbHVtZVwiLFxuICAgICAgICBjbGFzc05hbWU6IHJhbmRvbUNsYXNzLFxuICAgICAgICBtYXg6IDEsXG4gICAgICAgIG1pbjogMCxcbiAgICAgICAgb25CbHVyLFxuICAgICAgICBvbkNoYW5nZTogb25Wb2x1bWVDaGFuZ2UsXG4gICAgICAgIHN0ZXA6IDAuMDEsXG4gICAgICAgIHR5cGU6IFwicmFuZ2VcIixcbiAgICAgICAgdmFsdWU6IHZvbHVtZSxcbiAgICAgICAgc3R5bGU6IGlucHV0U3R5bGVcbiAgICAgIH0pXG4gICAgXVxuICB9KTtcbn07XG52YXIgcmVuZGVyRGVmYXVsdFZvbHVtZVNsaWRlciA9IChwcm9wcykgPT4ge1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDUoRGVmYXVsdFZvbHVtZVNsaWRlciwge1xuICAgIC4uLnByb3BzXG4gIH0pO1xufTtcblxuLy8gc3JjL01lZGlhVm9sdW1lU2xpZGVyLnRzeFxuaW1wb3J0IHsganN4IGFzIGpzeDYsIGpzeHMgYXMganN4czQgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbnZhciBWT0xVTUVfU0xJREVSX1dJRFRIID0gMTAwO1xudmFyIE1lZGlhVm9sdW1lU2xpZGVyID0gKHsgZGlzcGxheVZlcnRpY2FsVm9sdW1lU2xpZGVyLCByZW5kZXJNdXRlQnV0dG9uLCByZW5kZXJWb2x1bWVTbGlkZXIgfSkgPT4ge1xuICBjb25zdCBbbWVkaWFNdXRlZCwgc2V0TWVkaWFNdXRlZF0gPSBJbnRlcm5hbHM3LnVzZU1lZGlhTXV0ZWRTdGF0ZSgpO1xuICBjb25zdCBbbWVkaWFWb2x1bWUsIHNldE1lZGlhVm9sdW1lXSA9IEludGVybmFsczcudXNlTWVkaWFWb2x1bWVTdGF0ZSgpO1xuICBjb25zdCBbZm9jdXNlZCwgc2V0Rm9jdXNlZF0gPSB1c2VTdGF0ZTYoZmFsc2UpO1xuICBjb25zdCBwYXJlbnREaXZSZWYgPSB1c2VSZWY1KG51bGwpO1xuICBjb25zdCBpbnB1dFJlZiA9IHVzZVJlZjUobnVsbCk7XG4gIGNvbnN0IGhvdmVyID0gdXNlSG92ZXJTdGF0ZShwYXJlbnREaXZSZWYsIGZhbHNlKTtcbiAgY29uc3Qgb25CbHVyID0gdXNlQ2FsbGJhY2s1KCgpID0+IHtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGlmIChpbnB1dFJlZi5jdXJyZW50ICYmIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgIT09IGlucHV0UmVmLmN1cnJlbnQpIHtcbiAgICAgICAgc2V0Rm9jdXNlZChmYWxzZSk7XG4gICAgICB9XG4gICAgfSwgMTApO1xuICB9LCBbXSk7XG4gIGNvbnN0IGlzVm9sdW1lMCA9IG1lZGlhVm9sdW1lID09PSAwO1xuICBjb25zdCBvbkNsaWNrID0gdXNlQ2FsbGJhY2s1KCgpID0+IHtcbiAgICBpZiAoaXNWb2x1bWUwKSB7XG4gICAgICBzZXRNZWRpYVZvbHVtZSgxKTtcbiAgICAgIHNldE1lZGlhTXV0ZWQoZmFsc2UpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzZXRNZWRpYU11dGVkKChtdXRlKSA9PiAhbXV0ZSk7XG4gIH0sIFtpc1ZvbHVtZTAsIHNldE1lZGlhTXV0ZWQsIHNldE1lZGlhVm9sdW1lXSk7XG4gIGNvbnN0IHBhcmVudERpdlN0eWxlID0gdXNlTWVtbzQoKCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICBkaXNwbGF5OiBcImlubGluZS1mbGV4XCIsXG4gICAgICBiYWNrZ3JvdW5kOiBcIm5vbmVcIixcbiAgICAgIGJvcmRlcjogXCJub25lXCIsXG4gICAgICBqdXN0aWZ5Q29udGVudDogXCJjZW50ZXJcIixcbiAgICAgIGFsaWduSXRlbXM6IFwiY2VudGVyXCIsXG4gICAgICB0b3VjaEFjdGlvbjogXCJub25lXCIsXG4gICAgICAuLi5kaXNwbGF5VmVydGljYWxWb2x1bWVTbGlkZXIgJiYgeyBwb3NpdGlvbjogXCJyZWxhdGl2ZVwiIH1cbiAgICB9O1xuICB9LCBbZGlzcGxheVZlcnRpY2FsVm9sdW1lU2xpZGVyXSk7XG4gIGNvbnN0IHZvbHVtZUNvbnRhaW5lciA9IHVzZU1lbW80KCgpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgZGlzcGxheTogXCJpbmxpbmVcIixcbiAgICAgIHdpZHRoOiBJQ09OX1NJWkUsXG4gICAgICBoZWlnaHQ6IElDT05fU0laRSxcbiAgICAgIGN1cnNvcjogXCJwb2ludGVyXCIsXG4gICAgICBhcHBlYXJhbmNlOiBcIm5vbmVcIixcbiAgICAgIGJhY2tncm91bmQ6IFwibm9uZVwiLFxuICAgICAgYm9yZGVyOiBcIm5vbmVcIixcbiAgICAgIHBhZGRpbmc6IDBcbiAgICB9O1xuICB9LCBbXSk7XG4gIGNvbnN0IHJlbmRlckRlZmF1bHRNdXRlQnV0dG9uID0gdXNlQ2FsbGJhY2s1KCh7IG11dGVkLCB2b2x1bWUgfSkgPT4ge1xuICAgIGNvbnN0IGlzTXV0ZWRPclplcm8gPSBtdXRlZCB8fCB2b2x1bWUgPT09IDA7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3g2KFwiYnV0dG9uXCIsIHtcbiAgICAgIFwiYXJpYS1sYWJlbFwiOiBpc011dGVkT3JaZXJvID8gXCJVbm11dGUgc291bmRcIiA6IFwiTXV0ZSBzb3VuZFwiLFxuICAgICAgdGl0bGU6IGlzTXV0ZWRPclplcm8gPyBcIlVubXV0ZSBzb3VuZFwiIDogXCJNdXRlIHNvdW5kXCIsXG4gICAgICBvbkNsaWNrLFxuICAgICAgb25CbHVyLFxuICAgICAgb25Gb2N1czogKCkgPT4gc2V0Rm9jdXNlZCh0cnVlKSxcbiAgICAgIHN0eWxlOiB2b2x1bWVDb250YWluZXIsXG4gICAgICB0eXBlOiBcImJ1dHRvblwiLFxuICAgICAgY2hpbGRyZW46IGlzTXV0ZWRPclplcm8gPyAvKiBAX19QVVJFX18gKi8ganN4NihWb2x1bWVPZmZJY29uLCB7fSkgOiAvKiBAX19QVVJFX18gKi8ganN4NihWb2x1bWVPbkljb24sIHt9KVxuICAgIH0pO1xuICB9LCBbb25CbHVyLCBvbkNsaWNrLCB2b2x1bWVDb250YWluZXJdKTtcbiAgY29uc3QgbXV0ZUJ1dHRvbiA9IHVzZU1lbW80KCgpID0+IHtcbiAgICByZXR1cm4gcmVuZGVyTXV0ZUJ1dHRvbiA/IHJlbmRlck11dGVCdXR0b24oeyBtdXRlZDogbWVkaWFNdXRlZCwgdm9sdW1lOiBtZWRpYVZvbHVtZSB9KSA6IHJlbmRlckRlZmF1bHRNdXRlQnV0dG9uKHsgbXV0ZWQ6IG1lZGlhTXV0ZWQsIHZvbHVtZTogbWVkaWFWb2x1bWUgfSk7XG4gIH0sIFttZWRpYU11dGVkLCBtZWRpYVZvbHVtZSwgcmVuZGVyRGVmYXVsdE11dGVCdXR0b24sIHJlbmRlck11dGVCdXR0b25dKTtcbiAgY29uc3Qgdm9sdW1lU2xpZGVyID0gdXNlTWVtbzQoKCkgPT4ge1xuICAgIHJldHVybiAoZm9jdXNlZCB8fCBob3ZlcikgJiYgIW1lZGlhTXV0ZWQgJiYgIUludGVybmFsczcuaXNJb3NTYWZhcmkoKSA/IChyZW5kZXJWb2x1bWVTbGlkZXIgPz8gcmVuZGVyRGVmYXVsdFZvbHVtZVNsaWRlcikoe1xuICAgICAgaXNWZXJ0aWNhbDogZGlzcGxheVZlcnRpY2FsVm9sdW1lU2xpZGVyLFxuICAgICAgdm9sdW1lOiBtZWRpYVZvbHVtZSxcbiAgICAgIG9uQmx1cjogKCkgPT4gc2V0Rm9jdXNlZChmYWxzZSksXG4gICAgICBpbnB1dFJlZixcbiAgICAgIHNldFZvbHVtZTogc2V0TWVkaWFWb2x1bWVcbiAgICB9KSA6IG51bGw7XG4gIH0sIFtcbiAgICBkaXNwbGF5VmVydGljYWxWb2x1bWVTbGlkZXIsXG4gICAgZm9jdXNlZCxcbiAgICBob3ZlcixcbiAgICBtZWRpYU11dGVkLFxuICAgIG1lZGlhVm9sdW1lLFxuICAgIHJlbmRlclZvbHVtZVNsaWRlcixcbiAgICBzZXRNZWRpYVZvbHVtZVxuICBdKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3hzNChcImRpdlwiLCB7XG4gICAgcmVmOiBwYXJlbnREaXZSZWYsXG4gICAgc3R5bGU6IHBhcmVudERpdlN0eWxlLFxuICAgIGNoaWxkcmVuOiBbXG4gICAgICBtdXRlQnV0dG9uLFxuICAgICAgdm9sdW1lU2xpZGVyXG4gICAgXVxuICB9KTtcbn07XG5cbi8vIHNyYy9QbGF5YmFja3JhdGVDb250cm9sLnRzeFxuaW1wb3J0IHtcbiAgdXNlQ2FsbGJhY2sgYXMgdXNlQ2FsbGJhY2s2LFxuICB1c2VDb250ZXh0IGFzIHVzZUNvbnRleHQ1LFxuICB1c2VFZmZlY3QgYXMgdXNlRWZmZWN0OSxcbiAgdXNlTWVtbyBhcyB1c2VNZW1vNSxcbiAgdXNlU3RhdGUgYXMgdXNlU3RhdGU4XG59IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgSW50ZXJuYWxzIGFzIEludGVybmFsczggfSBmcm9tIFwicmVtb3Rpb25cIjtcblxuLy8gc3JjL3V0aWxzL3VzZS1jb21wb25lbnQtdmlzaWJsZS50c1xuaW1wb3J0IHsgdXNlRWZmZWN0IGFzIHVzZUVmZmVjdDgsIHVzZVJlZiBhcyB1c2VSZWY2LCB1c2VTdGF0ZSBhcyB1c2VTdGF0ZTcgfSBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIHVzZUNvbXBvbmVudFZpc2libGUoaW5pdGlhbElzVmlzaWJsZSkge1xuICBjb25zdCBbaXNDb21wb25lbnRWaXNpYmxlLCBzZXRJc0NvbXBvbmVudFZpc2libGVdID0gdXNlU3RhdGU3KGluaXRpYWxJc1Zpc2libGUpO1xuICBjb25zdCByZWYgPSB1c2VSZWY2KG51bGwpO1xuICB1c2VFZmZlY3Q4KCgpID0+IHtcbiAgICBjb25zdCBoYW5kbGVDbGlja091dHNpZGUgPSAoZXZlbnQpID0+IHtcbiAgICAgIGlmIChyZWYuY3VycmVudCAmJiAhcmVmLmN1cnJlbnQuY29udGFpbnMoZXZlbnQudGFyZ2V0KSkge1xuICAgICAgICBzZXRJc0NvbXBvbmVudFZpc2libGUoZmFsc2UpO1xuICAgICAgfVxuICAgIH07XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJ1cFwiLCBoYW5kbGVDbGlja091dHNpZGUsIHRydWUpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcnVwXCIsIGhhbmRsZUNsaWNrT3V0c2lkZSwgdHJ1ZSk7XG4gICAgfTtcbiAgfSwgW10pO1xuICByZXR1cm4geyByZWYsIGlzQ29tcG9uZW50VmlzaWJsZSwgc2V0SXNDb21wb25lbnRWaXNpYmxlIH07XG59XG5cbi8vIHNyYy9QbGF5YmFja3JhdGVDb250cm9sLnRzeFxuaW1wb3J0IHsganN4IGFzIGpzeDcsIGpzeHMgYXMganN4czUgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbnZhciBCT1RUT00gPSAzNTtcbnZhciBUSFJFU0hPTEQgPSA3MDtcbnZhciByYXRlRGl2ID0ge1xuICBoZWlnaHQ6IDMwLFxuICBwYWRkaW5nUmlnaHQ6IDE1LFxuICBwYWRkaW5nTGVmdDogMTIsXG4gIGRpc3BsYXk6IFwiZmxleFwiLFxuICBmbGV4RGlyZWN0aW9uOiBcInJvd1wiLFxuICBhbGlnbkl0ZW1zOiBcImNlbnRlclwiXG59O1xudmFyIGNoZWNrbWFya0NvbnRhaW5lciA9IHtcbiAgd2lkdGg6IDIyLFxuICBkaXNwbGF5OiBcImZsZXhcIixcbiAgYWxpZ25JdGVtczogXCJjZW50ZXJcIlxufTtcbnZhciBjaGVja21hcmtTdHlsZSA9IHtcbiAgd2lkdGg6IDE0LFxuICBoZWlnaHQ6IDE0LFxuICBjb2xvcjogXCJibGFja1wiXG59O1xudmFyIENoZWNrbWFyayA9ICgpID0+IC8qIEBfX1BVUkVfXyAqLyBqc3g3KFwic3ZnXCIsIHtcbiAgdmlld0JveDogXCIwIDAgNTEyIDUxMlwiLFxuICBzdHlsZTogY2hlY2ttYXJrU3R5bGUsXG4gIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4NyhcInBhdGhcIiwge1xuICAgIGZpbGw6IFwiY3VycmVudENvbG9yXCIsXG4gICAgZDogXCJNNDM1Ljg0OCA4My40NjZMMTcyLjgwNCAzNDYuNTFsLTk2LjY1Mi05Ni42NTJjLTQuNjg2LTQuNjg2LTEyLjI4NC00LjY4Ni0xNi45NzEgMGwtMjguMjg0IDI4LjI4NGMtNC42ODYgNC42ODYtNC42ODYgMTIuMjg0IDAgMTYuOTcxbDEzMy40MjEgMTMzLjQyMWM0LjY4NiA0LjY4NiAxMi4yODQgNC42ODYgMTYuOTcxIDBsMjk5LjgxMy0yOTkuODEzYzQuNjg2LTQuNjg2IDQuNjg2LTEyLjI4NCAwLTE2Ljk3MWwtMjguMjg0LTI4LjI4NGMtNC42ODYtNC42ODYtMTIuMjg0LTQuNjg2LTE2Ljk3IDB6XCJcbiAgfSlcbn0pO1xudmFyIGZvcm1hdFBsYXliYWNrUmF0ZSA9IChyYXRlKSA9PiB7XG4gIGNvbnN0IHN0ciA9IHJhdGUudG9TdHJpbmcoKTtcbiAgcmV0dXJuIHN0ci5pbmNsdWRlcyhcIi5cIikgPyBzdHIgOiBzdHIgKyBcIi4wXCI7XG59O1xudmFyIFBsYXliYWNrcmF0ZU9wdGlvbiA9ICh7IHJhdGUsIG9uU2VsZWN0LCBzZWxlY3RlZFJhdGUsIGtleWJvYXJkU2VsZWN0ZWRSYXRlIH0pID0+IHtcbiAgY29uc3Qgb25DbGljayA9IHVzZUNhbGxiYWNrNigoZSkgPT4ge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIG9uU2VsZWN0KHJhdGUpO1xuICB9LCBbb25TZWxlY3QsIHJhdGVdKTtcbiAgY29uc3QgW2hvdmVyZWQsIHNldEhvdmVyZWRdID0gdXNlU3RhdGU4KGZhbHNlKTtcbiAgY29uc3Qgb25Nb3VzZUVudGVyID0gdXNlQ2FsbGJhY2s2KCgpID0+IHtcbiAgICBzZXRIb3ZlcmVkKHRydWUpO1xuICB9LCBbXSk7XG4gIGNvbnN0IG9uTW91c2VMZWF2ZSA9IHVzZUNhbGxiYWNrNigoKSA9PiB7XG4gICAgc2V0SG92ZXJlZChmYWxzZSk7XG4gIH0sIFtdKTtcbiAgY29uc3QgaXNGb2N1c2VkID0ga2V5Ym9hcmRTZWxlY3RlZFJhdGUgPT09IHJhdGU7XG4gIGNvbnN0IGFjdHVhbFN0eWxlID0gdXNlTWVtbzUoKCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICAuLi5yYXRlRGl2LFxuICAgICAgYmFja2dyb3VuZENvbG9yOiBob3ZlcmVkIHx8IGlzRm9jdXNlZCA/IFwiI2VlZVwiIDogXCJ0cmFuc3BhcmVudFwiXG4gICAgfTtcbiAgfSwgW2hvdmVyZWQsIGlzRm9jdXNlZF0pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeHM1KFwiZGl2XCIsIHtcbiAgICBvblBvaW50ZXJFbnRlcjogb25Nb3VzZUVudGVyLFxuICAgIG9uUG9pbnRlckxlYXZlOiBvbk1vdXNlTGVhdmUsXG4gICAgdGFiSW5kZXg6IDAsXG4gICAgc3R5bGU6IGFjdHVhbFN0eWxlLFxuICAgIG9uQ2xpY2ssXG4gICAgY2hpbGRyZW46IFtcbiAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3g3KFwiZGl2XCIsIHtcbiAgICAgICAgc3R5bGU6IGNoZWNrbWFya0NvbnRhaW5lcixcbiAgICAgICAgY2hpbGRyZW46IHJhdGUgPT09IHNlbGVjdGVkUmF0ZSA/IC8qIEBfX1BVUkVfXyAqLyBqc3g3KENoZWNrbWFyaywge30pIDogbnVsbFxuICAgICAgfSksXG4gICAgICBmb3JtYXRQbGF5YmFja1JhdGUocmF0ZSksXG4gICAgICBcInhcIlxuICAgIF1cbiAgfSwgcmF0ZSk7XG59O1xudmFyIFBsYXliYWNrUG9wdXAgPSAoeyBzZXRJc0NvbXBvbmVudFZpc2libGUsIHBsYXliYWNrUmF0ZXMsIGNhbnZhc1NpemUgfSkgPT4ge1xuICBjb25zdCB7IHNldFBsYXliYWNrUmF0ZSwgcGxheWJhY2tSYXRlIH0gPSB1c2VDb250ZXh0NShJbnRlcm5hbHM4LlRpbWVsaW5lQ29udGV4dCk7XG4gIGNvbnN0IFtrZXlib2FyZFNlbGVjdGVkUmF0ZSwgc2V0S2V5Ym9hcmRTZWxlY3RlZFJhdGVdID0gdXNlU3RhdGU4KHBsYXliYWNrUmF0ZSk7XG4gIHVzZUVmZmVjdDkoKCkgPT4ge1xuICAgIGNvbnN0IGxpc3RlbmVyID0gKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGlmIChlLmtleSA9PT0gXCJBcnJvd1VwXCIpIHtcbiAgICAgICAgY29uc3QgY3VycmVudEluZGV4ID0gcGxheWJhY2tSYXRlcy5maW5kSW5kZXgoKHJhdGUpID0+IHJhdGUgPT09IGtleWJvYXJkU2VsZWN0ZWRSYXRlKTtcbiAgICAgICAgaWYgKGN1cnJlbnRJbmRleCA9PT0gMCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3VycmVudEluZGV4ID09PSAtMSkge1xuICAgICAgICAgIHNldEtleWJvYXJkU2VsZWN0ZWRSYXRlKHBsYXliYWNrUmF0ZXNbMF0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNldEtleWJvYXJkU2VsZWN0ZWRSYXRlKHBsYXliYWNrUmF0ZXNbY3VycmVudEluZGV4IC0gMV0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGUua2V5ID09PSBcIkFycm93RG93blwiKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRJbmRleCA9IHBsYXliYWNrUmF0ZXMuZmluZEluZGV4KChyYXRlKSA9PiByYXRlID09PSBrZXlib2FyZFNlbGVjdGVkUmF0ZSk7XG4gICAgICAgIGlmIChjdXJyZW50SW5kZXggPT09IHBsYXliYWNrUmF0ZXMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3VycmVudEluZGV4ID09PSAtMSkge1xuICAgICAgICAgIHNldEtleWJvYXJkU2VsZWN0ZWRSYXRlKHBsYXliYWNrUmF0ZXNbcGxheWJhY2tSYXRlcy5sZW5ndGggLSAxXSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2V0S2V5Ym9hcmRTZWxlY3RlZFJhdGUocGxheWJhY2tSYXRlc1tjdXJyZW50SW5kZXggKyAxXSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZS5rZXkgPT09IFwiRW50ZXJcIikge1xuICAgICAgICBzZXRQbGF5YmFja1JhdGUoa2V5Ym9hcmRTZWxlY3RlZFJhdGUpO1xuICAgICAgICBzZXRJc0NvbXBvbmVudFZpc2libGUoZmFsc2UpO1xuICAgICAgfVxuICAgIH07XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGxpc3RlbmVyKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGxpc3RlbmVyKTtcbiAgICB9O1xuICB9LCBbXG4gICAgcGxheWJhY2tSYXRlcyxcbiAgICBrZXlib2FyZFNlbGVjdGVkUmF0ZSxcbiAgICBzZXRQbGF5YmFja1JhdGUsXG4gICAgc2V0SXNDb21wb25lbnRWaXNpYmxlXG4gIF0pO1xuICBjb25zdCBvblNlbGVjdCA9IHVzZUNhbGxiYWNrNigocmF0ZSkgPT4ge1xuICAgIHNldFBsYXliYWNrUmF0ZShyYXRlKTtcbiAgICBzZXRJc0NvbXBvbmVudFZpc2libGUoZmFsc2UpO1xuICB9LCBbc2V0SXNDb21wb25lbnRWaXNpYmxlLCBzZXRQbGF5YmFja1JhdGVdKTtcbiAgY29uc3QgcGxheWJhY2tQb3B1cCA9IHVzZU1lbW81KCgpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcbiAgICAgIHJpZ2h0OiAwLFxuICAgICAgd2lkdGg6IDEyNSxcbiAgICAgIG1heEhlaWdodDogY2FudmFzU2l6ZS5oZWlnaHQgLSBUSFJFU0hPTEQgLSBCT1RUT00sXG4gICAgICBib3R0b206IDM1LFxuICAgICAgYmFja2dyb3VuZDogXCIjZmZmXCIsXG4gICAgICBib3JkZXJSYWRpdXM6IDQsXG4gICAgICBvdmVyZmxvdzogXCJhdXRvXCIsXG4gICAgICBjb2xvcjogXCJibGFja1wiLFxuICAgICAgdGV4dEFsaWduOiBcImxlZnRcIlxuICAgIH07XG4gIH0sIFtjYW52YXNTaXplLmhlaWdodF0pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDcoXCJkaXZcIiwge1xuICAgIHN0eWxlOiBwbGF5YmFja1BvcHVwLFxuICAgIGNoaWxkcmVuOiBwbGF5YmFja1JhdGVzLm1hcCgocmF0ZSkgPT4ge1xuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3g3KFBsYXliYWNrcmF0ZU9wdGlvbiwge1xuICAgICAgICBzZWxlY3RlZFJhdGU6IHBsYXliYWNrUmF0ZSxcbiAgICAgICAgb25TZWxlY3QsXG4gICAgICAgIHJhdGUsXG4gICAgICAgIGtleWJvYXJkU2VsZWN0ZWRSYXRlXG4gICAgICB9LCByYXRlKTtcbiAgICB9KVxuICB9KTtcbn07XG52YXIgbGFiZWwgPSB7XG4gIGZvbnRTaXplOiAxMyxcbiAgZm9udFdlaWdodDogXCJib2xkXCIsXG4gIGNvbG9yOiBcIndoaXRlXCIsXG4gIGJvcmRlcjogXCIycHggc29saWQgd2hpdGVcIixcbiAgYm9yZGVyUmFkaXVzOiAyMCxcbiAgcGFkZGluZ0xlZnQ6IDgsXG4gIHBhZGRpbmdSaWdodDogOCxcbiAgcGFkZGluZ1RvcDogMixcbiAgcGFkZGluZ0JvdHRvbTogMlxufTtcbnZhciBwbGF5ZXJCdXR0b25TdHlsZSA9IHtcbiAgYXBwZWFyYW5jZTogXCJub25lXCIsXG4gIGJhY2tncm91bmRDb2xvcjogXCJ0cmFuc3BhcmVudFwiLFxuICBib3JkZXI6IFwibm9uZVwiLFxuICBjdXJzb3I6IFwicG9pbnRlclwiLFxuICBwYWRkaW5nTGVmdDogMCxcbiAgcGFkZGluZ1JpZ2h0OiAwLFxuICBwYWRkaW5nVG9wOiA2LFxuICBwYWRkaW5nQm90dG9tOiA2LFxuICBoZWlnaHQ6IDM3LFxuICBkaXNwbGF5OiBcImlubGluZS1mbGV4XCIsXG4gIG1hcmdpbkJvdHRvbTogMCxcbiAgbWFyZ2luVG9wOiAwLFxuICBhbGlnbkl0ZW1zOiBcImNlbnRlclwiXG59O1xudmFyIGJ1dHRvbiA9IHtcbiAgLi4ucGxheWVyQnV0dG9uU3R5bGUsXG4gIHBvc2l0aW9uOiBcInJlbGF0aXZlXCJcbn07XG52YXIgUGxheWJhY2tyYXRlQ29udHJvbCA9ICh7IHBsYXliYWNrUmF0ZXMsIGNhbnZhc1NpemUgfSkgPT4ge1xuICBjb25zdCB7IHJlZiwgaXNDb21wb25lbnRWaXNpYmxlLCBzZXRJc0NvbXBvbmVudFZpc2libGUgfSA9IHVzZUNvbXBvbmVudFZpc2libGUoZmFsc2UpO1xuICBjb25zdCB7IHBsYXliYWNrUmF0ZSB9ID0gdXNlQ29udGV4dDUoSW50ZXJuYWxzOC5UaW1lbGluZUNvbnRleHQpO1xuICBjb25zdCBvbkNsaWNrID0gdXNlQ2FsbGJhY2s2KChlKSA9PiB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgc2V0SXNDb21wb25lbnRWaXNpYmxlKChwcmV2SXNDb21wb25lbnRWaXNpYmxlKSA9PiAhcHJldklzQ29tcG9uZW50VmlzaWJsZSk7XG4gIH0sIFtzZXRJc0NvbXBvbmVudFZpc2libGVdKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3g3KFwiZGl2XCIsIHtcbiAgICByZWYsXG4gICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3hzNShcImJ1dHRvblwiLCB7XG4gICAgICB0eXBlOiBcImJ1dHRvblwiLFxuICAgICAgXCJhcmlhLWxhYmVsXCI6IFwiQ2hhbmdlIHBsYXliYWNrIHJhdGVcIixcbiAgICAgIHN0eWxlOiBidXR0b24sXG4gICAgICBvbkNsaWNrLFxuICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeHM1KFwiZGl2XCIsIHtcbiAgICAgICAgICBzdHlsZTogbGFiZWwsXG4gICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgIHBsYXliYWNrUmF0ZSxcbiAgICAgICAgICAgIFwieFwiXG4gICAgICAgICAgXVxuICAgICAgICB9KSxcbiAgICAgICAgaXNDb21wb25lbnRWaXNpYmxlICYmIC8qIEBfX1BVUkVfXyAqLyBqc3g3KFBsYXliYWNrUG9wdXAsIHtcbiAgICAgICAgICBjYW52YXNTaXplLFxuICAgICAgICAgIHBsYXliYWNrUmF0ZXMsXG4gICAgICAgICAgc2V0SXNDb21wb25lbnRWaXNpYmxlXG4gICAgICAgIH0pXG4gICAgICBdXG4gICAgfSlcbiAgfSk7XG59O1xuXG4vLyBzcmMvUGxheWVyU2Vla0Jhci50c3hcbmltcG9ydCB7IHVzZUNhbGxiYWNrIGFzIHVzZUNhbGxiYWNrNywgdXNlRWZmZWN0IGFzIHVzZUVmZmVjdDEwLCB1c2VNZW1vIGFzIHVzZU1lbW82LCB1c2VSZWYgYXMgdXNlUmVmNywgdXNlU3RhdGUgYXMgdXNlU3RhdGU5IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBJbnRlcm5hbHMgYXMgSW50ZXJuYWxzOSwgaW50ZXJwb2xhdGUgfSBmcm9tIFwicmVtb3Rpb25cIjtcbmltcG9ydCB7IGpzeCBhcyBqc3g4LCBqc3hzIGFzIGpzeHM2IH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG52YXIgZ2V0RnJhbWVGcm9tWCA9IChjbGllbnRYLCBkdXJhdGlvbkluRnJhbWVzLCB3aWR0aCkgPT4ge1xuICBjb25zdCBwb3MgPSBjbGllbnRYO1xuICBjb25zdCBmcmFtZSA9IE1hdGgucm91bmQoaW50ZXJwb2xhdGUocG9zLCBbMCwgd2lkdGhdLCBbMCwgZHVyYXRpb25JbkZyYW1lcyAtIDFdLCB7XG4gICAgZXh0cmFwb2xhdGVMZWZ0OiBcImNsYW1wXCIsXG4gICAgZXh0cmFwb2xhdGVSaWdodDogXCJjbGFtcFwiXG4gIH0pKTtcbiAgcmV0dXJuIGZyYW1lO1xufTtcbnZhciBCQVJfSEVJR0hUMiA9IDU7XG52YXIgS05PQl9TSVpFMiA9IDEyO1xudmFyIFZFUlRJQ0FMX1BBRERJTkcgPSA0O1xudmFyIGNvbnRhaW5lclN0eWxlID0ge1xuICB1c2VyU2VsZWN0OiBcIm5vbmVcIixcbiAgV2Via2l0VXNlclNlbGVjdDogXCJub25lXCIsXG4gIHBhZGRpbmdUb3A6IFZFUlRJQ0FMX1BBRERJTkcsXG4gIHBhZGRpbmdCb3R0b206IFZFUlRJQ0FMX1BBRERJTkcsXG4gIGJveFNpemluZzogXCJib3JkZXItYm94XCIsXG4gIGN1cnNvcjogXCJwb2ludGVyXCIsXG4gIHBvc2l0aW9uOiBcInJlbGF0aXZlXCIsXG4gIHRvdWNoQWN0aW9uOiBcIm5vbmVcIlxufTtcbnZhciBiYXJCYWNrZ3JvdW5kID0ge1xuICBoZWlnaHQ6IEJBUl9IRUlHSFQyLFxuICBiYWNrZ3JvdW5kQ29sb3I6IFwicmdiYSgyNTUsIDI1NSwgMjU1LCAwLjI1KVwiLFxuICB3aWR0aDogXCIxMDAlXCIsXG4gIGJvcmRlclJhZGl1czogQkFSX0hFSUdIVDIgLyAyXG59O1xudmFyIGZpbmRCb2R5SW5XaGljaERpdklzTG9jYXRlZCA9IChkaXYpID0+IHtcbiAgbGV0IGN1cnJlbnQgPSBkaXY7XG4gIHdoaWxlIChjdXJyZW50LnBhcmVudEVsZW1lbnQpIHtcbiAgICBjdXJyZW50ID0gY3VycmVudC5wYXJlbnRFbGVtZW50O1xuICB9XG4gIHJldHVybiBjdXJyZW50O1xufTtcbnZhciBQbGF5ZXJTZWVrQmFyID0gKHsgZHVyYXRpb25JbkZyYW1lcywgb25TZWVrRW5kLCBvblNlZWtTdGFydCwgaW5GcmFtZSwgb3V0RnJhbWUgfSkgPT4ge1xuICBjb25zdCBjb250YWluZXJSZWYgPSB1c2VSZWY3KG51bGwpO1xuICBjb25zdCBiYXJIb3ZlcmVkID0gdXNlSG92ZXJTdGF0ZShjb250YWluZXJSZWYsIGZhbHNlKTtcbiAgY29uc3Qgc2l6ZSA9IHVzZUVsZW1lbnRTaXplKGNvbnRhaW5lclJlZiwge1xuICAgIHRyaWdnZXJPbldpbmRvd1Jlc2l6ZTogdHJ1ZSxcbiAgICBzaG91bGRBcHBseUNzc1RyYW5zZm9ybXM6IHRydWVcbiAgfSk7XG4gIGNvbnN0IHsgc2VlaywgcGxheSwgcGF1c2UsIHBsYXlpbmcgfSA9IHVzZVBsYXllcigpO1xuICBjb25zdCBmcmFtZSA9IEludGVybmFsczkuVGltZWxpbmUudXNlVGltZWxpbmVQb3NpdGlvbigpO1xuICBjb25zdCBbZHJhZ2dpbmcsIHNldERyYWdnaW5nXSA9IHVzZVN0YXRlOSh7XG4gICAgZHJhZ2dpbmc6IGZhbHNlXG4gIH0pO1xuICBjb25zdCB3aWR0aCA9IHNpemU/LndpZHRoID8/IDA7XG4gIGNvbnN0IG9uUG9pbnRlckRvd24gPSB1c2VDYWxsYmFjazcoKGUpID0+IHtcbiAgICBpZiAoZS5idXR0b24gIT09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgcG9zTGVmdCA9IGNvbnRhaW5lclJlZi5jdXJyZW50Py5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0O1xuICAgIGNvbnN0IF9mcmFtZSA9IGdldEZyYW1lRnJvbVgoZS5jbGllbnRYIC0gcG9zTGVmdCwgZHVyYXRpb25JbkZyYW1lcywgd2lkdGgpO1xuICAgIHBhdXNlKCk7XG4gICAgc2VlayhfZnJhbWUpO1xuICAgIHNldERyYWdnaW5nKHtcbiAgICAgIGRyYWdnaW5nOiB0cnVlLFxuICAgICAgd2FzUGxheWluZzogcGxheWluZ1xuICAgIH0pO1xuICAgIG9uU2Vla1N0YXJ0KCk7XG4gIH0sIFtkdXJhdGlvbkluRnJhbWVzLCB3aWR0aCwgcGF1c2UsIHNlZWssIHBsYXlpbmcsIG9uU2Vla1N0YXJ0XSk7XG4gIGNvbnN0IG9uUG9pbnRlck1vdmUgPSB1c2VDYWxsYmFjazcoKGUpID0+IHtcbiAgICBpZiAoIXNpemUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlBsYXllciBoYXMgbm8gc2l6ZVwiKTtcbiAgICB9XG4gICAgaWYgKCFkcmFnZ2luZy5kcmFnZ2luZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBwb3NMZWZ0ID0gY29udGFpbmVyUmVmLmN1cnJlbnQ/LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQ7XG4gICAgY29uc3QgX2ZyYW1lID0gZ2V0RnJhbWVGcm9tWChlLmNsaWVudFggLSBwb3NMZWZ0LCBkdXJhdGlvbkluRnJhbWVzLCBzaXplLndpZHRoKTtcbiAgICBzZWVrKF9mcmFtZSk7XG4gIH0sIFtkcmFnZ2luZy5kcmFnZ2luZywgZHVyYXRpb25JbkZyYW1lcywgc2Vlaywgc2l6ZV0pO1xuICBjb25zdCBvblBvaW50ZXJVcCA9IHVzZUNhbGxiYWNrNygoKSA9PiB7XG4gICAgc2V0RHJhZ2dpbmcoe1xuICAgICAgZHJhZ2dpbmc6IGZhbHNlXG4gICAgfSk7XG4gICAgaWYgKCFkcmFnZ2luZy5kcmFnZ2luZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoZHJhZ2dpbmcud2FzUGxheWluZykge1xuICAgICAgcGxheSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBwYXVzZSgpO1xuICAgIH1cbiAgICBvblNlZWtFbmQoKTtcbiAgfSwgW2RyYWdnaW5nLCBvblNlZWtFbmQsIHBhdXNlLCBwbGF5XSk7XG4gIHVzZUVmZmVjdDEwKCgpID0+IHtcbiAgICBpZiAoIWRyYWdnaW5nLmRyYWdnaW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGJvZHkgPSBmaW5kQm9keUluV2hpY2hEaXZJc0xvY2F0ZWQoY29udGFpbmVyUmVmLmN1cnJlbnQpO1xuICAgIGJvZHkuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJtb3ZlXCIsIG9uUG9pbnRlck1vdmUpO1xuICAgIGJvZHkuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJ1cFwiLCBvblBvaW50ZXJVcCk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJtb3ZlXCIsIG9uUG9pbnRlck1vdmUpO1xuICAgICAgYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcnVwXCIsIG9uUG9pbnRlclVwKTtcbiAgICB9O1xuICB9LCBbZHJhZ2dpbmcuZHJhZ2dpbmcsIG9uUG9pbnRlck1vdmUsIG9uUG9pbnRlclVwXSk7XG4gIGNvbnN0IGtub2JTdHlsZSA9IHVzZU1lbW82KCgpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgaGVpZ2h0OiBLTk9CX1NJWkUyLFxuICAgICAgd2lkdGg6IEtOT0JfU0laRTIsXG4gICAgICBib3JkZXJSYWRpdXM6IEtOT0JfU0laRTIgLyAyLFxuICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcbiAgICAgIHRvcDogVkVSVElDQUxfUEFERElORyAtIEtOT0JfU0laRTIgLyAyICsgNSAvIDIsXG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwid2hpdGVcIixcbiAgICAgIGxlZnQ6IE1hdGgubWF4KDAsIGZyYW1lIC8gTWF0aC5tYXgoMSwgZHVyYXRpb25JbkZyYW1lcyAtIDEpICogd2lkdGggLSBLTk9CX1NJWkUyIC8gMiksXG4gICAgICBib3hTaGFkb3c6IFwiMCAwIDJweCBibGFja1wiLFxuICAgICAgb3BhY2l0eTogTnVtYmVyKGJhckhvdmVyZWQgfHwgZHJhZ2dpbmcuZHJhZ2dpbmcpXG4gICAgfTtcbiAgfSwgW2JhckhvdmVyZWQsIGRyYWdnaW5nLmRyYWdnaW5nLCBkdXJhdGlvbkluRnJhbWVzLCBmcmFtZSwgd2lkdGhdKTtcbiAgY29uc3QgZmlsbFN0eWxlID0gdXNlTWVtbzYoKCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICBoZWlnaHQ6IEJBUl9IRUlHSFQyLFxuICAgICAgYmFja2dyb3VuZENvbG9yOiBcInJnYmEoMjU1LCAyNTUsIDI1NSwgMSlcIixcbiAgICAgIHdpZHRoOiAoZnJhbWUgLSAoaW5GcmFtZSA/PyAwKSkgLyAoZHVyYXRpb25JbkZyYW1lcyAtIDEpICogd2lkdGgsXG4gICAgICBtYXJnaW5MZWZ0OiAoaW5GcmFtZSA/PyAwKSAvIChkdXJhdGlvbkluRnJhbWVzIC0gMSkgKiB3aWR0aCxcbiAgICAgIGJvcmRlclJhZGl1czogQkFSX0hFSUdIVDIgLyAyXG4gICAgfTtcbiAgfSwgW2R1cmF0aW9uSW5GcmFtZXMsIGZyYW1lLCBpbkZyYW1lLCB3aWR0aF0pO1xuICBjb25zdCBhY3RpdmUgPSB1c2VNZW1vNigoKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGhlaWdodDogQkFSX0hFSUdIVDIsXG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwicmdiYSgyNTUsIDI1NSwgMjU1LCAwLjI1KVwiLFxuICAgICAgd2lkdGg6ICgob3V0RnJhbWUgPz8gZHVyYXRpb25JbkZyYW1lcyAtIDEpIC0gKGluRnJhbWUgPz8gMCkpIC8gKGR1cmF0aW9uSW5GcmFtZXMgLSAxKSAqIDEwMCArIFwiJVwiLFxuICAgICAgbWFyZ2luTGVmdDogKGluRnJhbWUgPz8gMCkgLyAoZHVyYXRpb25JbkZyYW1lcyAtIDEpICogMTAwICsgXCIlXCIsXG4gICAgICBib3JkZXJSYWRpdXM6IEJBUl9IRUlHSFQyIC8gMixcbiAgICAgIHBvc2l0aW9uOiBcImFic29sdXRlXCJcbiAgICB9O1xuICB9LCBbZHVyYXRpb25JbkZyYW1lcywgaW5GcmFtZSwgb3V0RnJhbWVdKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3hzNihcImRpdlwiLCB7XG4gICAgcmVmOiBjb250YWluZXJSZWYsXG4gICAgb25Qb2ludGVyRG93bixcbiAgICBzdHlsZTogY29udGFpbmVyU3R5bGUsXG4gICAgY2hpbGRyZW46IFtcbiAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3hzNihcImRpdlwiLCB7XG4gICAgICAgIHN0eWxlOiBiYXJCYWNrZ3JvdW5kLFxuICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3g4KFwiZGl2XCIsIHtcbiAgICAgICAgICAgIHN0eWxlOiBhY3RpdmVcbiAgICAgICAgICB9KSxcbiAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4OChcImRpdlwiLCB7XG4gICAgICAgICAgICBzdHlsZTogZmlsbFN0eWxlXG4gICAgICAgICAgfSlcbiAgICAgICAgXVxuICAgICAgfSksXG4gICAgICAvKiBAX19QVVJFX18gKi8ganN4OChcImRpdlwiLCB7XG4gICAgICAgIHN0eWxlOiBrbm9iU3R5bGVcbiAgICAgIH0pXG4gICAgXVxuICB9KTtcbn07XG5cbi8vIHNyYy9QbGF5ZXJUaW1lTGFiZWwudHN4XG5pbXBvcnQgeyB1c2VNZW1vIGFzIHVzZU1lbW83IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBJbnRlcm5hbHMgYXMgSW50ZXJuYWxzMTAgfSBmcm9tIFwicmVtb3Rpb25cIjtcblxuLy8gc3JjL2Zvcm1hdC10aW1lLnRzXG52YXIgZm9ybWF0VGltZSA9ICh0aW1lSW5TZWNvbmRzKSA9PiB7XG4gIGNvbnN0IG1pbnV0ZXMgPSBNYXRoLmZsb29yKHRpbWVJblNlY29uZHMgLyA2MCk7XG4gIGNvbnN0IHNlY29uZHMgPSBNYXRoLmZsb29yKHRpbWVJblNlY29uZHMgLSBtaW51dGVzICogNjApO1xuICByZXR1cm4gYCR7U3RyaW5nKG1pbnV0ZXMpfToke1N0cmluZyhzZWNvbmRzKS5wYWRTdGFydCgyLCBcIjBcIil9YDtcbn07XG5cbi8vIHNyYy9QbGF5ZXJUaW1lTGFiZWwudHN4XG5pbXBvcnQgeyBqc3hzIGFzIGpzeHM3IH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG52YXIgUGxheWVyVGltZUxhYmVsID0gKHsgZHVyYXRpb25JbkZyYW1lcywgbWF4VGltZUxhYmVsV2lkdGgsIGZwcyB9KSA9PiB7XG4gIGNvbnN0IGZyYW1lID0gSW50ZXJuYWxzMTAuVGltZWxpbmUudXNlVGltZWxpbmVQb3NpdGlvbigpO1xuICBjb25zdCB0aW1lTGFiZWwgPSB1c2VNZW1vNygoKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbG9yOiBcIndoaXRlXCIsXG4gICAgICBmb250RmFtaWx5OiBcInNhbnMtc2VyaWZcIixcbiAgICAgIGZvbnRTaXplOiAxNCxcbiAgICAgIG1heFdpZHRoOiBtYXhUaW1lTGFiZWxXaWR0aCA9PT0gbnVsbCA/IHVuZGVmaW5lZCA6IG1heFRpbWVMYWJlbFdpZHRoLFxuICAgICAgb3ZlcmZsb3c6IFwiaGlkZGVuXCIsXG4gICAgICB0ZXh0T3ZlcmZsb3c6IFwiZWxsaXBzaXNcIlxuICAgIH07XG4gIH0sIFttYXhUaW1lTGFiZWxXaWR0aF0pO1xuICBjb25zdCBpc0xhc3RGcmFtZSA9IGZyYW1lID09PSBkdXJhdGlvbkluRnJhbWVzIC0gMTtcbiAgY29uc3QgZnJhbWVUb0Rpc3BsYXkgPSBpc0xhc3RGcmFtZSA/IGZyYW1lICsgMSA6IGZyYW1lO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeHM3KFwiZGl2XCIsIHtcbiAgICBzdHlsZTogdGltZUxhYmVsLFxuICAgIGNoaWxkcmVuOiBbXG4gICAgICBmb3JtYXRUaW1lKGZyYW1lVG9EaXNwbGF5IC8gZnBzKSxcbiAgICAgIFwiIC8gXCIsXG4gICAgICBmb3JtYXRUaW1lKGR1cmF0aW9uSW5GcmFtZXMgLyBmcHMpXG4gICAgXVxuICB9KTtcbn07XG5cbi8vIHNyYy91c2UtdmlkZW8tY29udHJvbHMtcmVzaXplLnRzXG5pbXBvcnQgeyB1c2VNZW1vIGFzIHVzZU1lbW84IH0gZnJvbSBcInJlYWN0XCI7XG52YXIgWF9TUEFDRVIgPSAxMDtcbnZhciBYX1BBRERJTkcgPSAxMjtcbnZhciB1c2VWaWRlb0NvbnRyb2xzUmVzaXplID0gKHtcbiAgYWxsb3dGdWxsc2NyZWVuOiBhbGxvd0Z1bGxTY3JlZW4sXG4gIHBsYXllcldpZHRoXG59KSA9PiB7XG4gIGNvbnN0IHJlc2l6ZUluZm8gPSB1c2VNZW1vOCgoKSA9PiB7XG4gICAgY29uc3QgcGxheVBhdXNlSWNvblNpemUgPSBJQ09OX1NJWkU7XG4gICAgY29uc3Qgdm9sdW1lSWNvblNpemUgPSBJQ09OX1NJWkU7XG4gICAgY29uc3QgX2Z1bGxzY3JlZW5JY29uU2l6ZSA9IGFsbG93RnVsbFNjcmVlbiA/IGZ1bGxzY3JlZW5JY29uU2l6ZSA6IDA7XG4gICAgY29uc3QgZWxlbWVudHNTaXplID0gdm9sdW1lSWNvblNpemUgKyBwbGF5UGF1c2VJY29uU2l6ZSArIF9mdWxsc2NyZWVuSWNvblNpemUgKyBYX1BBRERJTkcgKiAyICsgWF9TUEFDRVIgKiAyO1xuICAgIGNvbnN0IG1heFRpbWVMYWJlbFdpZHRoID0gcGxheWVyV2lkdGggLSBlbGVtZW50c1NpemU7XG4gICAgY29uc3QgbWF4VGltZUxhYmVsV2lkdGhXaXRob3V0TmVnYXRpdmVWYWx1ZSA9IE1hdGgubWF4KG1heFRpbWVMYWJlbFdpZHRoLCAwKTtcbiAgICBjb25zdCBhdmFpbGFibGVUaW1lTGFiZWxXaWR0aElmVm9sdW1lT3BlbiA9IG1heFRpbWVMYWJlbFdpZHRoV2l0aG91dE5lZ2F0aXZlVmFsdWUgLSBWT0xVTUVfU0xJREVSX1dJRFRIO1xuICAgIGNvbnN0IGNvbXB1dGVkTGFiZWxXaWR0aCA9IGF2YWlsYWJsZVRpbWVMYWJlbFdpZHRoSWZWb2x1bWVPcGVuIDwgVk9MVU1FX1NMSURFUl9XSURUSCA/IG1heFRpbWVMYWJlbFdpZHRoV2l0aG91dE5lZ2F0aXZlVmFsdWUgOiBhdmFpbGFibGVUaW1lTGFiZWxXaWR0aElmVm9sdW1lT3BlbjtcbiAgICBjb25zdCBtaW5XaWR0aEZvckhvcml6b250YWxEaXNwbGF5ID0gY29tcHV0ZWRMYWJlbFdpZHRoICsgZWxlbWVudHNTaXplICsgVk9MVU1FX1NMSURFUl9XSURUSDtcbiAgICBjb25zdCBkaXNwbGF5VmVydGljYWxWb2x1bWVTbGlkZXIgPSBwbGF5ZXJXaWR0aCA8IG1pbldpZHRoRm9ySG9yaXpvbnRhbERpc3BsYXk7XG4gICAgcmV0dXJuIHtcbiAgICAgIG1heFRpbWVMYWJlbFdpZHRoOiBtYXhUaW1lTGFiZWxXaWR0aFdpdGhvdXROZWdhdGl2ZVZhbHVlID09PSAwID8gbnVsbCA6IG1heFRpbWVMYWJlbFdpZHRoV2l0aG91dE5lZ2F0aXZlVmFsdWUsXG4gICAgICBkaXNwbGF5VmVydGljYWxWb2x1bWVTbGlkZXJcbiAgICB9O1xuICB9LCBbYWxsb3dGdWxsU2NyZWVuLCBwbGF5ZXJXaWR0aF0pO1xuICByZXR1cm4gcmVzaXplSW5mbztcbn07XG5cbi8vIHNyYy9QbGF5ZXJDb250cm9scy50c3hcbmltcG9ydCB7IGpzeCBhcyBqc3g5LCBqc3hzIGFzIGpzeHM4LCBGcmFnbWVudCBhcyBGcmFnbWVudDIgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbnZhciBncmFkaWVudFN0ZXBzID0gW1xuICAwLFxuICAwLjAxMyxcbiAgMC4wNDksXG4gIDAuMTA0LFxuICAwLjE3NSxcbiAgMC4yNTksXG4gIDAuMzUyLFxuICAwLjQ1LFxuICAwLjU1LFxuICAwLjY0OCxcbiAgMC43NDEsXG4gIDAuODI1LFxuICAwLjg5NixcbiAgMC45NTEsXG4gIDAuOTg3XG5dO1xudmFyIGdyYWRpZW50T3BhY2l0aWVzID0gW1xuICAwLFxuICA4LjEsXG4gIDE1LjUsXG4gIDIyLjUsXG4gIDI5LFxuICAzNS4zLFxuICA0MS4yLFxuICA0Ny4xLFxuICA1Mi45LFxuICA1OC44LFxuICA2NC43LFxuICA3MSxcbiAgNzcuNSxcbiAgODQuNSxcbiAgOTEuOVxuXTtcbnZhciBnbG9iYWxHcmFkaWVudE9wYWNpdHkgPSAxIC8gMC43O1xudmFyIGNvbnRhaW5lclN0eWxlMiA9IHtcbiAgYm94U2l6aW5nOiBcImJvcmRlci1ib3hcIixcbiAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcbiAgYm90dG9tOiAwLFxuICB3aWR0aDogXCIxMDAlXCIsXG4gIHBhZGRpbmdUb3A6IDQwLFxuICBwYWRkaW5nQm90dG9tOiAxMCxcbiAgYmFja2dyb3VuZEltYWdlOiBgbGluZWFyLWdyYWRpZW50KHRvIGJvdHRvbSwke2dyYWRpZW50U3RlcHMubWFwKChnLCBpKSA9PiB7XG4gICAgcmV0dXJuIGBoc2xhKDAsIDAlLCAwJSwgJHtnfSkgJHtncmFkaWVudE9wYWNpdGllc1tpXSAqIGdsb2JhbEdyYWRpZW50T3BhY2l0eX0lYDtcbiAgfSkuam9pbihcIiwgXCIpfSwgaHNsKDAsIDAlLCAwJSkgMTAwJSlgLFxuICBiYWNrZ3JvdW5kU2l6ZTogXCJhdXRvIDE0NXB4XCIsXG4gIGRpc3BsYXk6IFwiZmxleFwiLFxuICBwYWRkaW5nUmlnaHQ6IFhfUEFERElORyxcbiAgcGFkZGluZ0xlZnQ6IFhfUEFERElORyxcbiAgZmxleERpcmVjdGlvbjogXCJjb2x1bW5cIixcbiAgdHJhbnNpdGlvbjogXCJvcGFjaXR5IDAuM3NcIlxufTtcbnZhciBjb250cm9sc1JvdyA9IHtcbiAgZGlzcGxheTogXCJmbGV4XCIsXG4gIGZsZXhEaXJlY3Rpb246IFwicm93XCIsXG4gIHdpZHRoOiBcIjEwMCVcIixcbiAgYWxpZ25JdGVtczogXCJjZW50ZXJcIixcbiAganVzdGlmeUNvbnRlbnQ6IFwiY2VudGVyXCIsXG4gIHVzZXJTZWxlY3Q6IFwibm9uZVwiLFxuICBXZWJraXRVc2VyU2VsZWN0OiBcIm5vbmVcIlxufTtcbnZhciBsZWZ0UGFydFN0eWxlID0ge1xuICBkaXNwbGF5OiBcImZsZXhcIixcbiAgZmxleERpcmVjdGlvbjogXCJyb3dcIixcbiAgdXNlclNlbGVjdDogXCJub25lXCIsXG4gIFdlYmtpdFVzZXJTZWxlY3Q6IFwibm9uZVwiLFxuICBhbGlnbkl0ZW1zOiBcImNlbnRlclwiXG59O1xudmFyIHhTcGFjZXIgPSB7XG4gIHdpZHRoOiAxMlxufTtcbnZhciB5U3BhY2VyID0ge1xuICBoZWlnaHQ6IDhcbn07XG52YXIgZmxleDEgPSB7XG4gIGZsZXg6IDFcbn07XG52YXIgZnVsbHNjcmVlbiA9IHt9O1xudmFyIENvbnRyb2xzID0gKHtcbiAgZHVyYXRpb25JbkZyYW1lcyxcbiAgaXNGdWxsc2NyZWVuLFxuICBmcHMsXG4gIHNob3dWb2x1bWVDb250cm9scyxcbiAgb25GdWxsc2NyZWVuQnV0dG9uQ2xpY2ssXG4gIGFsbG93RnVsbHNjcmVlbixcbiAgb25FeGl0RnVsbHNjcmVlbkJ1dHRvbkNsaWNrLFxuICBzcGFjZUtleVRvUGxheU9yUGF1c2UsXG4gIG9uU2Vla0VuZCxcbiAgb25TZWVrU3RhcnQsXG4gIGluRnJhbWUsXG4gIG91dEZyYW1lLFxuICBpbml0aWFsbHlTaG93Q29udHJvbHMsXG4gIGNhbnZhc1NpemUsXG4gIHJlbmRlclBsYXlQYXVzZUJ1dHRvbixcbiAgcmVuZGVyRnVsbHNjcmVlbkJ1dHRvbixcbiAgYWx3YXlzU2hvd0NvbnRyb2xzLFxuICBzaG93UGxheWJhY2tSYXRlQ29udHJvbCxcbiAgY29udGFpbmVyUmVmLFxuICBidWZmZXJpbmcsXG4gIGhpZGVDb250cm9sc1doZW5Qb2ludGVyRG9lc250TW92ZSxcbiAgb25Qb2ludGVyRG93bixcbiAgb25Eb3VibGVDbGljayxcbiAgcmVuZGVyTXV0ZUJ1dHRvbixcbiAgcmVuZGVyVm9sdW1lU2xpZGVyLFxuICBwbGF5aW5nLFxuICB0b2dnbGVcbn0pID0+IHtcbiAgY29uc3QgcGxheUJ1dHRvblJlZiA9IHVzZVJlZjgobnVsbCk7XG4gIGNvbnN0IFtzdXBwb3J0c0Z1bGxzY3JlZW4sIHNldFN1cHBvcnRzRnVsbHNjcmVlbl0gPSB1c2VTdGF0ZTEwKGZhbHNlKTtcbiAgY29uc3QgaG92ZXJlZCA9IHVzZUhvdmVyU3RhdGUoY29udGFpbmVyUmVmLCBoaWRlQ29udHJvbHNXaGVuUG9pbnRlckRvZXNudE1vdmUpO1xuICBjb25zdCB7IG1heFRpbWVMYWJlbFdpZHRoLCBkaXNwbGF5VmVydGljYWxWb2x1bWVTbGlkZXIgfSA9IHVzZVZpZGVvQ29udHJvbHNSZXNpemUoe1xuICAgIGFsbG93RnVsbHNjcmVlbixcbiAgICBwbGF5ZXJXaWR0aDogY2FudmFzU2l6ZT8ud2lkdGggPz8gMFxuICB9KTtcbiAgY29uc3QgW3Nob3VsZFNob3dJbml0aWFsbHksIHNldEluaXRpYWxseVNob3dDb250cm9sc10gPSB1c2VTdGF0ZTEwKCgpID0+IHtcbiAgICBpZiAodHlwZW9mIGluaXRpYWxseVNob3dDb250cm9scyA9PT0gXCJib29sZWFuXCIpIHtcbiAgICAgIHJldHVybiBpbml0aWFsbHlTaG93Q29udHJvbHM7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgaW5pdGlhbGx5U2hvd0NvbnRyb2xzID09PSBcIm51bWJlclwiKSB7XG4gICAgICBpZiAoaW5pdGlhbGx5U2hvd0NvbnRyb2xzICUgMSAhPT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbml0aWFsbHlTaG93Q29udHJvbHMgbXVzdCBiZSBhbiBpbnRlZ2VyIG9yIGEgYm9vbGVhblwiKTtcbiAgICAgIH1cbiAgICAgIGlmIChOdW1iZXIuaXNOYU4oaW5pdGlhbGx5U2hvd0NvbnRyb2xzKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbml0aWFsbHlTaG93Q29udHJvbHMgbXVzdCBub3QgYmUgTmFOXCIpO1xuICAgICAgfVxuICAgICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUoaW5pdGlhbGx5U2hvd0NvbnRyb2xzKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbml0aWFsbHlTaG93Q29udHJvbHMgbXVzdCBiZSBmaW5pdGVcIik7XG4gICAgICB9XG4gICAgICBpZiAoaW5pdGlhbGx5U2hvd0NvbnRyb2xzIDw9IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiaW5pdGlhbGx5U2hvd0NvbnRyb2xzIG11c3QgYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyXCIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGluaXRpYWxseVNob3dDb250cm9scztcbiAgICB9XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImluaXRpYWxseVNob3dDb250cm9scyBtdXN0IGJlIGEgbnVtYmVyIG9yIGEgYm9vbGVhblwiKTtcbiAgfSk7XG4gIGNvbnN0IGNvbnRhaW5lckNzcyA9IHVzZU1lbW85KCgpID0+IHtcbiAgICBjb25zdCBzaG91bGRTaG93ID0gaG92ZXJlZCB8fCAhcGxheWluZyB8fCBzaG91bGRTaG93SW5pdGlhbGx5IHx8IGFsd2F5c1Nob3dDb250cm9scztcbiAgICByZXR1cm4ge1xuICAgICAgLi4uY29udGFpbmVyU3R5bGUyLFxuICAgICAgb3BhY2l0eTogTnVtYmVyKHNob3VsZFNob3cpXG4gICAgfTtcbiAgfSwgW2hvdmVyZWQsIHNob3VsZFNob3dJbml0aWFsbHksIHBsYXlpbmcsIGFsd2F5c1Nob3dDb250cm9sc10pO1xuICB1c2VFZmZlY3QxMSgoKSA9PiB7XG4gICAgaWYgKHBsYXlCdXR0b25SZWYuY3VycmVudCAmJiBzcGFjZUtleVRvUGxheU9yUGF1c2UpIHtcbiAgICAgIHBsYXlCdXR0b25SZWYuY3VycmVudC5mb2N1cyh7XG4gICAgICAgIHByZXZlbnRTY3JvbGw6IHRydWVcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW3BsYXlpbmcsIHNwYWNlS2V5VG9QbGF5T3JQYXVzZV0pO1xuICB1c2VFZmZlY3QxMSgoKSA9PiB7XG4gICAgc2V0U3VwcG9ydHNGdWxsc2NyZWVuKCh0eXBlb2YgZG9jdW1lbnQgIT09IFwidW5kZWZpbmVkXCIgJiYgKGRvY3VtZW50LmZ1bGxzY3JlZW5FbmFibGVkIHx8IGRvY3VtZW50LndlYmtpdEZ1bGxzY3JlZW5FbmFibGVkKSkgPz8gZmFsc2UpO1xuICB9LCBbXSk7XG4gIHVzZUVmZmVjdDExKCgpID0+IHtcbiAgICBpZiAoc2hvdWxkU2hvd0luaXRpYWxseSA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgdGltZSA9IHNob3VsZFNob3dJbml0aWFsbHkgPT09IHRydWUgPyAyMDAwIDogc2hvdWxkU2hvd0luaXRpYWxseTtcbiAgICBjb25zdCB0aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBzZXRJbml0aWFsbHlTaG93Q29udHJvbHMoZmFsc2UpO1xuICAgIH0sIHRpbWUpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjbGVhckludGVydmFsKHRpbWVvdXQpO1xuICAgIH07XG4gIH0sIFtzaG91bGRTaG93SW5pdGlhbGx5XSk7XG4gIGNvbnN0IHBsYXliYWNrUmF0ZXMgPSB1c2VNZW1vOSgoKSA9PiB7XG4gICAgaWYgKHNob3dQbGF5YmFja1JhdGVDb250cm9sID09PSB0cnVlKSB7XG4gICAgICByZXR1cm4gWzAuNSwgMC44LCAxLCAxLjIsIDEuNSwgMS44LCAyLCAyLjUsIDNdO1xuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheShzaG93UGxheWJhY2tSYXRlQ29udHJvbCkpIHtcbiAgICAgIGZvciAoY29uc3QgcmF0ZSBvZiBzaG93UGxheWJhY2tSYXRlQ29udHJvbCkge1xuICAgICAgICBpZiAodHlwZW9mIHJhdGUgIT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFdmVyeSBpdGVtIGluIHNob3dQbGF5YmFja1JhdGVDb250cm9sIG11c3QgYmUgYSBudW1iZXJcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJhdGUgPD0gMCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkV2ZXJ5IGl0ZW0gaW4gc2hvd1BsYXliYWNrUmF0ZUNvbnRyb2wgbXVzdCBiZSBwb3NpdGl2ZVwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHNob3dQbGF5YmFja1JhdGVDb250cm9sO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfSwgW3Nob3dQbGF5YmFja1JhdGVDb250cm9sXSk7XG4gIGNvbnN0IHJlZiA9IHVzZVJlZjgobnVsbCk7XG4gIGNvbnN0IGZsZXhSZWYgPSB1c2VSZWY4KG51bGwpO1xuICBjb25zdCBvblBvaW50ZXJEb3duSWZDb250YWluZXIgPSB1c2VDYWxsYmFjazgoKGUpID0+IHtcbiAgICBpZiAoZS50YXJnZXQgPT09IHJlZi5jdXJyZW50IHx8IGUudGFyZ2V0ID09PSBmbGV4UmVmLmN1cnJlbnQpIHtcbiAgICAgIG9uUG9pbnRlckRvd24/LihlKTtcbiAgICB9XG4gIH0sIFtvblBvaW50ZXJEb3duXSk7XG4gIGNvbnN0IG9uRG91YmxlQ2xpY2tJZkNvbnRhaW5lciA9IHVzZUNhbGxiYWNrOCgoZSkgPT4ge1xuICAgIGlmIChlLnRhcmdldCA9PT0gcmVmLmN1cnJlbnQgfHwgZS50YXJnZXQgPT09IGZsZXhSZWYuY3VycmVudCkge1xuICAgICAgb25Eb3VibGVDbGljaz8uKGUpO1xuICAgIH1cbiAgfSwgW29uRG91YmxlQ2xpY2tdKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3hzOChcImRpdlwiLCB7XG4gICAgcmVmLFxuICAgIHN0eWxlOiBjb250YWluZXJDc3MsXG4gICAgb25Qb2ludGVyRG93bjogb25Qb2ludGVyRG93bklmQ29udGFpbmVyLFxuICAgIG9uRG91YmxlQ2xpY2s6IG9uRG91YmxlQ2xpY2tJZkNvbnRhaW5lcixcbiAgICBjaGlsZHJlbjogW1xuICAgICAgLyogQF9fUFVSRV9fICovIGpzeHM4KFwiZGl2XCIsIHtcbiAgICAgICAgcmVmOiBmbGV4UmVmLFxuICAgICAgICBzdHlsZTogY29udHJvbHNSb3csXG4gICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeHM4KFwiZGl2XCIsIHtcbiAgICAgICAgICAgIHN0eWxlOiBsZWZ0UGFydFN0eWxlLFxuICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeDkoXCJidXR0b25cIiwge1xuICAgICAgICAgICAgICAgIHJlZjogcGxheUJ1dHRvblJlZixcbiAgICAgICAgICAgICAgICB0eXBlOiBcImJ1dHRvblwiLFxuICAgICAgICAgICAgICAgIHN0eWxlOiBwbGF5ZXJCdXR0b25TdHlsZSxcbiAgICAgICAgICAgICAgICBvbkNsaWNrOiB0b2dnbGUsXG4gICAgICAgICAgICAgICAgXCJhcmlhLWxhYmVsXCI6IHBsYXlpbmcgPyBcIlBhdXNlIHZpZGVvXCIgOiBcIlBsYXkgdmlkZW9cIixcbiAgICAgICAgICAgICAgICB0aXRsZTogcGxheWluZyA/IFwiUGF1c2UgdmlkZW9cIiA6IFwiUGxheSB2aWRlb1wiLFxuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiByZW5kZXJQbGF5UGF1c2VCdXR0b24gPT09IG51bGwgPyAvKiBAX19QVVJFX18gKi8ganN4OShEZWZhdWx0UGxheVBhdXNlQnV0dG9uLCB7XG4gICAgICAgICAgICAgICAgICBidWZmZXJpbmcsXG4gICAgICAgICAgICAgICAgICBwbGF5aW5nXG4gICAgICAgICAgICAgICAgfSkgOiByZW5kZXJQbGF5UGF1c2VCdXR0b24oe1xuICAgICAgICAgICAgICAgICAgcGxheWluZyxcbiAgICAgICAgICAgICAgICAgIGlzQnVmZmVyaW5nOiBidWZmZXJpbmdcbiAgICAgICAgICAgICAgICB9KSA/PyAvKiBAX19QVVJFX18gKi8ganN4OShEZWZhdWx0UGxheVBhdXNlQnV0dG9uLCB7XG4gICAgICAgICAgICAgICAgICBidWZmZXJpbmcsXG4gICAgICAgICAgICAgICAgICBwbGF5aW5nXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIHNob3dWb2x1bWVDb250cm9scyA/IC8qIEBfX1BVUkVfXyAqLyBqc3hzOChGcmFnbWVudDIsIHtcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeDkoXCJkaXZcIiwge1xuICAgICAgICAgICAgICAgICAgICBzdHlsZTogeFNwYWNlclxuICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4OShNZWRpYVZvbHVtZVNsaWRlciwge1xuICAgICAgICAgICAgICAgICAgICByZW5kZXJNdXRlQnV0dG9uLFxuICAgICAgICAgICAgICAgICAgICByZW5kZXJWb2x1bWVTbGlkZXIsXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXlWZXJ0aWNhbFZvbHVtZVNsaWRlclxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgIH0pIDogbnVsbCxcbiAgICAgICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeDkoXCJkaXZcIiwge1xuICAgICAgICAgICAgICAgIHN0eWxlOiB4U3BhY2VyXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4OShQbGF5ZXJUaW1lTGFiZWwsIHtcbiAgICAgICAgICAgICAgICBkdXJhdGlvbkluRnJhbWVzLFxuICAgICAgICAgICAgICAgIGZwcyxcbiAgICAgICAgICAgICAgICBtYXhUaW1lTGFiZWxXaWR0aFxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeDkoXCJkaXZcIiwge1xuICAgICAgICAgICAgICAgIHN0eWxlOiB4U3BhY2VyXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBdXG4gICAgICAgICAgfSksXG4gICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeDkoXCJkaXZcIiwge1xuICAgICAgICAgICAgc3R5bGU6IGZsZXgxXG4gICAgICAgICAgfSksXG4gICAgICAgICAgcGxheWJhY2tSYXRlcyAmJiBjYW52YXNTaXplICYmIC8qIEBfX1BVUkVfXyAqLyBqc3g5KFBsYXliYWNrcmF0ZUNvbnRyb2wsIHtcbiAgICAgICAgICAgIGNhbnZhc1NpemUsXG4gICAgICAgICAgICBwbGF5YmFja1JhdGVzXG4gICAgICAgICAgfSksXG4gICAgICAgICAgcGxheWJhY2tSYXRlcyAmJiBzdXBwb3J0c0Z1bGxzY3JlZW4gJiYgYWxsb3dGdWxsc2NyZWVuID8gLyogQF9fUFVSRV9fICovIGpzeDkoXCJkaXZcIiwge1xuICAgICAgICAgICAgc3R5bGU6IHhTcGFjZXJcbiAgICAgICAgICB9KSA6IG51bGwsXG4gICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeDkoXCJkaXZcIiwge1xuICAgICAgICAgICAgc3R5bGU6IGZ1bGxzY3JlZW4sXG4gICAgICAgICAgICBjaGlsZHJlbjogc3VwcG9ydHNGdWxsc2NyZWVuICYmIGFsbG93RnVsbHNjcmVlbiA/IC8qIEBfX1BVUkVfXyAqLyBqc3g5KFwiYnV0dG9uXCIsIHtcbiAgICAgICAgICAgICAgdHlwZTogXCJidXR0b25cIixcbiAgICAgICAgICAgICAgXCJhcmlhLWxhYmVsXCI6IGlzRnVsbHNjcmVlbiA/IFwiRXhpdCBmdWxsc2NyZWVuXCIgOiBcIkVudGVyIEZ1bGxzY3JlZW5cIixcbiAgICAgICAgICAgICAgdGl0bGU6IGlzRnVsbHNjcmVlbiA/IFwiRXhpdCBmdWxsc2NyZWVuXCIgOiBcIkVudGVyIEZ1bGxzY3JlZW5cIixcbiAgICAgICAgICAgICAgc3R5bGU6IHBsYXllckJ1dHRvblN0eWxlLFxuICAgICAgICAgICAgICBvbkNsaWNrOiBpc0Z1bGxzY3JlZW4gPyBvbkV4aXRGdWxsc2NyZWVuQnV0dG9uQ2xpY2sgOiBvbkZ1bGxzY3JlZW5CdXR0b25DbGljayxcbiAgICAgICAgICAgICAgY2hpbGRyZW46IHJlbmRlckZ1bGxzY3JlZW5CdXR0b24gPT09IG51bGwgPyAvKiBAX19QVVJFX18gKi8ganN4OShGdWxsc2NyZWVuSWNvbiwge1xuICAgICAgICAgICAgICAgIGlzRnVsbHNjcmVlblxuICAgICAgICAgICAgICB9KSA6IHJlbmRlckZ1bGxzY3JlZW5CdXR0b24oeyBpc0Z1bGxzY3JlZW4gfSlcbiAgICAgICAgICAgIH0pIDogbnVsbFxuICAgICAgICAgIH0pXG4gICAgICAgIF1cbiAgICAgIH0pLFxuICAgICAgLyogQF9fUFVSRV9fICovIGpzeDkoXCJkaXZcIiwge1xuICAgICAgICBzdHlsZTogeVNwYWNlclxuICAgICAgfSksXG4gICAgICAvKiBAX19QVVJFX18gKi8ganN4OShQbGF5ZXJTZWVrQmFyLCB7XG4gICAgICAgIG9uU2Vla0VuZCxcbiAgICAgICAgb25TZWVrU3RhcnQsXG4gICAgICAgIGR1cmF0aW9uSW5GcmFtZXMsXG4gICAgICAgIGluRnJhbWUsXG4gICAgICAgIG91dEZyYW1lXG4gICAgICB9KVxuICAgIF1cbiAgfSk7XG59O1xuXG4vLyBzcmMvZXJyb3ItYm91bmRhcnkudHN4XG5pbXBvcnQgUmVhY3Q4IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsganN4IGFzIGpzeDEwIH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG52YXIgZXJyb3JTdHlsZSA9IHtcbiAgZGlzcGxheTogXCJmbGV4XCIsXG4gIGp1c3RpZnlDb250ZW50OiBcImNlbnRlclwiLFxuICBhbGlnbkl0ZW1zOiBcImNlbnRlclwiLFxuICBmbGV4OiAxLFxuICBoZWlnaHQ6IFwiMTAwJVwiLFxuICB3aWR0aDogXCIxMDAlXCJcbn07XG5cbmNsYXNzIEVycm9yQm91bmRhcnkgZXh0ZW5kcyBSZWFjdDguQ29tcG9uZW50IHtcbiAgc3RhdGUgPSB7IGhhc0Vycm9yOiBudWxsIH07XG4gIHN0YXRpYyBnZXREZXJpdmVkU3RhdGVGcm9tRXJyb3IoZXJyb3IpIHtcbiAgICByZXR1cm4geyBoYXNFcnJvcjogZXJyb3IgfTtcbiAgfVxuICBjb21wb25lbnREaWRDYXRjaChlcnJvcikge1xuICAgIHRoaXMucHJvcHMub25FcnJvcihlcnJvcik7XG4gIH1cbiAgcmVuZGVyKCkge1xuICAgIGlmICh0aGlzLnN0YXRlLmhhc0Vycm9yKSB7XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDEwKFwiZGl2XCIsIHtcbiAgICAgICAgc3R5bGU6IGVycm9yU3R5bGUsXG4gICAgICAgIGNoaWxkcmVuOiB0aGlzLnByb3BzLmVycm9yRmFsbGJhY2soe1xuICAgICAgICAgIGVycm9yOiB0aGlzLnN0YXRlLmhhc0Vycm9yXG4gICAgICAgIH0pXG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMucHJvcHMuY2hpbGRyZW47XG4gIH1cbn1cblxuLy8gc3JjL2xpY2Vuc2UtYmxhY2tsaXN0LnRzeFxuaW1wb3J0IFJlYWN0OSwgeyB1c2VFZmZlY3QgYXMgdXNlRWZmZWN0MTIgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IGpzeCBhcyBqc3gxMSB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xudmFyIGdldEhhc2hPZkRvbWFpbiA9IGFzeW5jICgpID0+IHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBpZiAodHlwZW9mIHdpbmRvdy5jcnlwdG8gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBpZiAodHlwZW9mIHdpbmRvdy5jcnlwdG8uc3VidGxlID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgdHJ5IHtcbiAgICBjb25zdCBoYXNoQnVmZmVyID0gYXdhaXQgY3J5cHRvLnN1YnRsZS5kaWdlc3QoXCJTSEEtMjU2XCIsIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZSh3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUpKTtcbiAgICByZXR1cm4gQXJyYXkuZnJvbShuZXcgVWludDhBcnJheShoYXNoQnVmZmVyKSkubWFwKChiKSA9PiBiLnRvU3RyaW5nKDE2KS5wYWRTdGFydCgyLCBcIjBcIikpLmpvaW4oXCJcIik7XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59O1xudmFyIHN0eWxlID0ge1xuICBiYWNrZ3JvdW5kQ29sb3I6IFwicmVkXCIsXG4gIHBvc2l0aW9uOiBcImFic29sdXRlXCIsXG4gIHBhZGRpbmc6IDEyLFxuICBmb250RmFtaWx5OiBcIkFyaWFsXCJcbn07XG52YXIgRE9NQUlOX0JMQUNLTElTVCA9IFtcbiAgXCIyOGQyNjJiNDRjYzYxZmE3NTBmMTY4NmIxNmFkMDYwNGRhYmZlMTkzZmJjMjYzZWVjMDVjODliN2FkNGMyY2Q2XCIsXG4gIFwiNGRiMWIwYTk0YmUzMzE2NWRmZWZjYjNiYTAzZDA0YzdhMjY2NmRkMjdjNDk2ZDNkYzlmYTQxODU4ZTk0OTI1ZVwiLFxuICBcImZiYzQ4NTMwYmJmMjQ1ZGE3OTBmNjM2NzVlODRlMDZiYWIzOGMzYjExNGZhYjA3ZWIzNTAwMjUxMTk5MjJiZGNcIixcbiAgXCI3YmFmMTBhODkzMjc1N2IxYjNhMjJiM2ZjZTEwYTA0ODc0N2FjMmY4ZWFmNjM4NjAzNDg3ZTM3MDViMDdlYjgzXCIsXG4gIFwiOGE2YzIxYTU5OGQ4YzY2NzI3MmI1MjA3YzA1MWI4NTk5N2JmNWI0NWQ1ZmI3MTIzNzhiZTNmMjdjZDcyYzZhNlwiLFxuICBcImEyZjdhYWFjOWM1MGE5MjU1ZTdmYzM3NjExMGM0ZTBiZmUxNTM3MjJkYzY2ZWQzYzVkM2JmMmExMzVmNjU1MThcIlxuXTtcbnZhciByYW4gPSBmYWxzZTtcbnZhciBSZW5kZXJXYXJuaW5nSWZCbGFja2xpc3QgPSAoKSA9PiB7XG4gIGNvbnN0IFt1bmxpY2Vuc2VkLCBzZXRVbmxpY2Vuc2VkXSA9IFJlYWN0OS51c2VTdGF0ZShmYWxzZSk7XG4gIHVzZUVmZmVjdDEyKCgpID0+IHtcbiAgICBpZiAocmFuKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHJhbiA9IHRydWU7XG4gICAgZ2V0SGFzaE9mRG9tYWluKCkudGhlbigoaGFzaCkgPT4ge1xuICAgICAgaWYgKGhhc2ggJiYgRE9NQUlOX0JMQUNLTElTVC5pbmNsdWRlcyhoYXNoKSkge1xuICAgICAgICBzZXRVbmxpY2Vuc2VkKHRydWUpO1xuICAgICAgfVxuICAgIH0pLmNhdGNoKCgpID0+IHt9KTtcbiAgfSwgW10pO1xuICB1c2VFZmZlY3QxMigoKSA9PiB7XG4gICAgaWYgKCF1bmxpY2Vuc2VkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGVuc3VyZUJhbm5lciA9ICgpID0+IHtcbiAgICAgIGNvbnN0IGJhbm5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIud2FybmluZy1iYW5uZXJcIik7XG4gICAgICBpZiAoIWJhbm5lcikge1xuICAgICAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBkaXYuY2xhc3NOYW1lID0gXCJ3YXJuaW5nLWJhbm5lclwiO1xuICAgICAgICBPYmplY3QuYXNzaWduKGRpdi5zdHlsZSwgc3R5bGUsIHtcbiAgICAgICAgICB6SW5kZXg6IFwiOTk5OVwiLFxuICAgICAgICAgIGNzc1RleHQ6IGAke3N0eWxlLmNzc1RleHR9ICFpbXBvcnRhbnQ7YFxuICAgICAgICB9KTtcbiAgICAgICAgZGl2LmlubmVySFRNTCA9IGBcblx0ICAgICAgICA8YSBocmVmPVwiaHR0cHM6Ly9naXRodWIuY29tL3JlbW90aW9uLWRldi9yZW1vdGlvbi9wdWxsLzQ1ODlcIiBzdHlsZT1cImNvbG9yOiB3aGl0ZTtcIj5cblx0ICAgICAgICAgIFJlbW90aW9uIFVubGljZW5zZWQg4oCTIENvbnRhY3QgaGlAcmVtb3Rpb24uZGV2XG5cdCAgICAgICAgPC9hPlxuXHQgICAgICBgO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGRpdik7XG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgpID0+IGVuc3VyZUJhbm5lcigpKTtcbiAgICBvYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LmJvZHksIHsgY2hpbGRMaXN0OiB0cnVlLCBzdWJ0cmVlOiB0cnVlIH0pO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBvYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgfTtcbiAgfSwgW3VubGljZW5zZWRdKTtcbiAgaWYgKCF1bmxpY2Vuc2VkKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gxMShcImRpdlwiLCB7XG4gICAgc3R5bGUsXG4gICAgY2xhc3NOYW1lOiBcIndhcm5pbmctYmFubmVyXCIsXG4gICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gxMShcImFcIiwge1xuICAgICAgc3R5bGU6IHsgY29sb3I6IFwid2hpdGVcIiB9LFxuICAgICAgaHJlZjogXCJodHRwczovL2dpdGh1Yi5jb20vcmVtb3Rpb24tZGV2L3JlbW90aW9uL3B1bGwvNDU4OVwiLFxuICAgICAgY2hpbGRyZW46IFwiUmVtb3Rpb24gVW5saWNlbnNlZCDigJMgQ29udGFjdCBoaUByZW1vdGlvbi5kZXZcIlxuICAgIH0pXG4gIH0pO1xufTtcblxuLy8gc3JjL3BsYXllci1jc3MtY2xhc3NuYW1lLnRzXG52YXIgcGxheWVyQ3NzQ2xhc3NuYW1lID0gKG92ZXJyaWRlKSA9PiB7XG4gIHJldHVybiBvdmVycmlkZSA/PyBcIl9fcmVtb3Rpb24tcGxheWVyXCI7XG59O1xuXG4vLyBzcmMvdXRpbHMvaXMtbm9kZS50c1xudmFyIElTX05PREUgPSB0eXBlb2YgZG9jdW1lbnQgPT09IFwidW5kZWZpbmVkXCI7XG5cbi8vIHNyYy91dGlscy91c2UtY2xpY2stcHJldmVudGlvbi1vbi1kb3VibGUtY2xpY2sudHNcbmltcG9ydCB7IHVzZUNhbGxiYWNrIGFzIHVzZUNhbGxiYWNrMTAsIHVzZU1lbW8gYXMgdXNlTWVtbzExIH0gZnJvbSBcInJlYWN0XCI7XG5cbi8vIHNyYy91dGlscy9jYW5jZWxsYWJsZS1wcm9taXNlLnRzXG52YXIgY2FuY2VsbGFibGVQcm9taXNlID0gKHByb21pc2UpID0+IHtcbiAgbGV0IGlzQ2FuY2VsZWQgPSBmYWxzZTtcbiAgY29uc3Qgd3JhcHBlZFByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgcHJvbWlzZS50aGVuKCh2YWx1ZSkgPT4ge1xuICAgICAgaWYgKGlzQ2FuY2VsZWQpIHtcbiAgICAgICAgcmVqZWN0KHsgaXNDYW5jZWxlZCwgdmFsdWUgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHJlc29sdmUodmFsdWUpO1xuICAgIH0pLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgcmVqZWN0KHsgaXNDYW5jZWxlZCwgZXJyb3IgfSk7XG4gICAgfSk7XG4gIH0pO1xuICByZXR1cm4ge1xuICAgIHByb21pc2U6IHdyYXBwZWRQcm9taXNlLFxuICAgIGNhbmNlbDogKCkgPT4ge1xuICAgICAgaXNDYW5jZWxlZCA9IHRydWU7XG4gICAgfVxuICB9O1xufTtcblxuLy8gc3JjL3V0aWxzL2RlbGF5LnRzXG52YXIgZGVsYXkgPSAobikgPT4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbikpO1xuXG4vLyBzcmMvdXRpbHMvdXNlLWNhbmNlbGxhYmxlLXByb21pc2VzLnRzXG5pbXBvcnQgeyB1c2VDYWxsYmFjayBhcyB1c2VDYWxsYmFjazksIHVzZU1lbW8gYXMgdXNlTWVtbzEwLCB1c2VSZWYgYXMgdXNlUmVmOSB9IGZyb20gXCJyZWFjdFwiO1xudmFyIHVzZUNhbmNlbGxhYmxlUHJvbWlzZXMgPSAoKSA9PiB7XG4gIGNvbnN0IHBlbmRpbmdQcm9taXNlcyA9IHVzZVJlZjkoW10pO1xuICBjb25zdCBhcHBlbmRQZW5kaW5nUHJvbWlzZSA9IHVzZUNhbGxiYWNrOSgocHJvbWlzZSkgPT4ge1xuICAgIHBlbmRpbmdQcm9taXNlcy5jdXJyZW50ID0gWy4uLnBlbmRpbmdQcm9taXNlcy5jdXJyZW50LCBwcm9taXNlXTtcbiAgfSwgW10pO1xuICBjb25zdCByZW1vdmVQZW5kaW5nUHJvbWlzZSA9IHVzZUNhbGxiYWNrOSgocHJvbWlzZSkgPT4ge1xuICAgIHBlbmRpbmdQcm9taXNlcy5jdXJyZW50ID0gcGVuZGluZ1Byb21pc2VzLmN1cnJlbnQuZmlsdGVyKChwKSA9PiBwICE9PSBwcm9taXNlKTtcbiAgfSwgW10pO1xuICBjb25zdCBjbGVhclBlbmRpbmdQcm9taXNlcyA9IHVzZUNhbGxiYWNrOSgoKSA9PiBwZW5kaW5nUHJvbWlzZXMuY3VycmVudC5tYXAoKHApID0+IHAuY2FuY2VsKCkpLCBbXSk7XG4gIGNvbnN0IGFwaSA9IHVzZU1lbW8xMCgoKSA9PiAoe1xuICAgIGFwcGVuZFBlbmRpbmdQcm9taXNlLFxuICAgIHJlbW92ZVBlbmRpbmdQcm9taXNlLFxuICAgIGNsZWFyUGVuZGluZ1Byb21pc2VzXG4gIH0pLCBbYXBwZW5kUGVuZGluZ1Byb21pc2UsIGNsZWFyUGVuZGluZ1Byb21pc2VzLCByZW1vdmVQZW5kaW5nUHJvbWlzZV0pO1xuICByZXR1cm4gYXBpO1xufTtcblxuLy8gc3JjL3V0aWxzL3VzZS1jbGljay1wcmV2ZW50aW9uLW9uLWRvdWJsZS1jbGljay50c1xudmFyIHVzZUNsaWNrUHJldmVudGlvbk9uRG91YmxlQ2xpY2sgPSAob25DbGljaywgb25Eb3VibGVDbGljaywgZG91YmxlQ2xpY2tUb0Z1bGxzY3JlZW4pID0+IHtcbiAgY29uc3QgYXBpID0gdXNlQ2FuY2VsbGFibGVQcm9taXNlcygpO1xuICBjb25zdCBoYW5kbGVDbGljayA9IHVzZUNhbGxiYWNrMTAoYXN5bmMgKGUpID0+IHtcbiAgICBpZiAoZSBpbnN0YW5jZW9mIFBvaW50ZXJFdmVudCA/IGUucG9pbnRlclR5cGUgPT09IFwidG91Y2hcIiA6IGUubmF0aXZlRXZlbnQucG9pbnRlclR5cGUgPT09IFwidG91Y2hcIikge1xuICAgICAgb25DbGljayhlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYXBpLmNsZWFyUGVuZGluZ1Byb21pc2VzKCk7XG4gICAgY29uc3Qgd2FpdEZvckNsaWNrID0gY2FuY2VsbGFibGVQcm9taXNlKGRlbGF5KDIwMCkpO1xuICAgIGFwaS5hcHBlbmRQZW5kaW5nUHJvbWlzZSh3YWl0Rm9yQ2xpY2spO1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCB3YWl0Rm9yQ2xpY2sucHJvbWlzZTtcbiAgICAgIGFwaS5yZW1vdmVQZW5kaW5nUHJvbWlzZSh3YWl0Rm9yQ2xpY2spO1xuICAgICAgb25DbGljayhlKTtcbiAgICB9IGNhdGNoIChlcnJvckluZm8pIHtcbiAgICAgIGNvbnN0IGluZm8gPSBlcnJvckluZm87XG4gICAgICBhcGkucmVtb3ZlUGVuZGluZ1Byb21pc2Uod2FpdEZvckNsaWNrKTtcbiAgICAgIGlmICghaW5mby5pc0NhbmNlbGVkKSB7XG4gICAgICAgIHRocm93IGluZm8uZXJyb3I7XG4gICAgICB9XG4gICAgfVxuICB9LCBbYXBpLCBvbkNsaWNrXSk7XG4gIGNvbnN0IGhhbmRsZVBvaW50ZXJEb3duID0gdXNlQ2FsbGJhY2sxMCgoKSA9PiB7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJ1cFwiLCAobmV3RXZ0KSA9PiB7XG4gICAgICBoYW5kbGVDbGljayhuZXdFdnQpO1xuICAgIH0sIHtcbiAgICAgIG9uY2U6IHRydWVcbiAgICB9KTtcbiAgfSwgW2hhbmRsZUNsaWNrXSk7XG4gIGNvbnN0IGhhbmRsZURvdWJsZUNsaWNrID0gdXNlQ2FsbGJhY2sxMCgoKSA9PiB7XG4gICAgYXBpLmNsZWFyUGVuZGluZ1Byb21pc2VzKCk7XG4gICAgb25Eb3VibGVDbGljaygpO1xuICB9LCBbYXBpLCBvbkRvdWJsZUNsaWNrXSk7XG4gIGNvbnN0IHJldHVyblZhbHVlID0gdXNlTWVtbzExKCgpID0+IHtcbiAgICBpZiAoIWRvdWJsZUNsaWNrVG9GdWxsc2NyZWVuKSB7XG4gICAgICByZXR1cm4geyBoYW5kbGVQb2ludGVyRG93bjogb25DbGljaywgaGFuZGxlRG91YmxlQ2xpY2s6ICgpID0+IHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSB9O1xuICAgIH1cbiAgICByZXR1cm4geyBoYW5kbGVQb2ludGVyRG93biwgaGFuZGxlRG91YmxlQ2xpY2sgfTtcbiAgfSwgW2RvdWJsZUNsaWNrVG9GdWxsc2NyZWVuLCBoYW5kbGVEb3VibGVDbGljaywgaGFuZGxlUG9pbnRlckRvd24sIG9uQ2xpY2tdKTtcbiAgcmV0dXJuIHJldHVyblZhbHVlO1xufTtcblxuLy8gc3JjL1BsYXllclVJLnRzeFxuaW1wb3J0IHsganN4IGFzIGpzeDEyLCBqc3hzIGFzIGpzeHM5LCBGcmFnbWVudCBhcyBGcmFnbWVudDMgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbnZhciByZWFjdFZlcnNpb24gPSBSZWFjdDEwLnZlcnNpb24uc3BsaXQoXCIuXCIpWzBdO1xuaWYgKHJlYWN0VmVyc2lvbiA9PT0gXCIwXCIpIHtcbiAgdGhyb3cgbmV3IEVycm9yKGBWZXJzaW9uICR7cmVhY3RWZXJzaW9ufSBvZiBcInJlYWN0XCIgaXMgbm90IHN1cHBvcnRlZCBieSBSZW1vdGlvbmApO1xufVxudmFyIGRvZXNSZWFjdFZlcnNpb25TdXBwb3J0U3VzcGVuc2UgPSBwYXJzZUludChyZWFjdFZlcnNpb24sIDEwKSA+PSAxODtcbnZhciBQbGF5ZXJVSSA9ICh7XG4gIGNvbnRyb2xzLFxuICBzdHlsZTogc3R5bGUyLFxuICBsb29wLFxuICBhdXRvUGxheSxcbiAgYWxsb3dGdWxsc2NyZWVuLFxuICBpbnB1dFByb3BzLFxuICBjbGlja1RvUGxheSxcbiAgc2hvd1ZvbHVtZUNvbnRyb2xzLFxuICBkb3VibGVDbGlja1RvRnVsbHNjcmVlbixcbiAgc3BhY2VLZXlUb1BsYXlPclBhdXNlLFxuICBlcnJvckZhbGxiYWNrLFxuICBwbGF5YmFja1JhdGUsXG4gIHJlbmRlckxvYWRpbmcsXG4gIHJlbmRlclBvc3RlcixcbiAgY2xhc3NOYW1lOiBjbGFzc05hbWUyLFxuICBtb3ZlVG9CZWdpbm5pbmdXaGVuRW5kZWQsXG4gIHNob3dQb3N0ZXJXaGVuVW5wbGF5ZWQsXG4gIHNob3dQb3N0ZXJXaGVuRW5kZWQsXG4gIHNob3dQb3N0ZXJXaGVuUGF1c2VkLFxuICBzaG93UG9zdGVyV2hlbkJ1ZmZlcmluZyxcbiAgc2hvd1Bvc3RlcldoZW5CdWZmZXJpbmdBbmRQYXVzZWQsXG4gIGluRnJhbWUsXG4gIG91dEZyYW1lLFxuICBpbml0aWFsbHlTaG93Q29udHJvbHMsXG4gIHJlbmRlckZ1bGxzY3JlZW46IHJlbmRlckZ1bGxzY3JlZW5CdXR0b24sXG4gIHJlbmRlclBsYXlQYXVzZUJ1dHRvbixcbiAgcmVuZGVyTXV0ZUJ1dHRvbixcbiAgcmVuZGVyVm9sdW1lU2xpZGVyLFxuICBhbHdheXNTaG93Q29udHJvbHMsXG4gIHNob3dQbGF5YmFja1JhdGVDb250cm9sLFxuICBwb3N0ZXJGaWxsTW9kZSxcbiAgYnVmZmVyU3RhdGVEZWxheUluTWlsbGlzZWNvbmRzLFxuICBoaWRlQ29udHJvbHNXaGVuUG9pbnRlckRvZXNudE1vdmUsXG4gIG92ZXJmbG93VmlzaWJsZSxcbiAgYnJvd3Nlck1lZGlhQ29udHJvbHNCZWhhdmlvcixcbiAgb3ZlcnJpZGVJbnRlcm5hbENsYXNzTmFtZSxcbiAgbm9TdXNwZW5zZVxufSwgcmVmKSA9PiB7XG4gIGNvbnN0IGNvbmZpZyA9IEludGVybmFsczExLnVzZVVuc2FmZVZpZGVvQ29uZmlnKCk7XG4gIGNvbnN0IHZpZGVvID0gSW50ZXJuYWxzMTEudXNlVmlkZW8oKTtcbiAgY29uc3QgY29udGFpbmVyID0gdXNlUmVmMTAobnVsbCk7XG4gIGNvbnN0IGNhbnZhc1NpemUgPSB1c2VFbGVtZW50U2l6ZShjb250YWluZXIsIHtcbiAgICB0cmlnZ2VyT25XaW5kb3dSZXNpemU6IGZhbHNlLFxuICAgIHNob3VsZEFwcGx5Q3NzVHJhbnNmb3JtczogZmFsc2VcbiAgfSk7XG4gIGNvbnN0IFtoYXNQYXVzZWRUb1Jlc3VtZSwgc2V0SGFzUGF1c2VkVG9SZXN1bWVdID0gdXNlU3RhdGUxMShmYWxzZSk7XG4gIGNvbnN0IFtzaG91bGRBdXRvcGxheSwgc2V0U2hvdWxkQXV0b1BsYXldID0gdXNlU3RhdGUxMShhdXRvUGxheSk7XG4gIGNvbnN0IFtpc0Z1bGxzY3JlZW4sIHNldElzRnVsbHNjcmVlbl0gPSB1c2VTdGF0ZTExKCgpID0+IGZhbHNlKTtcbiAgY29uc3QgW3NlZWtpbmcsIHNldFNlZWtpbmddID0gdXNlU3RhdGUxMShmYWxzZSk7XG4gIGNvbnN0IHN1cHBvcnRzRnVsbFNjcmVlbiA9IHVzZU1lbW8xMigoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBkb2N1bWVudCA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gQm9vbGVhbihkb2N1bWVudC5mdWxsc2NyZWVuRW5hYmxlZCB8fCBkb2N1bWVudC53ZWJraXRGdWxsc2NyZWVuRW5hYmxlZCk7XG4gIH0sIFtdKTtcbiAgY29uc3QgcGxheWVyID0gdXNlUGxheWVyKCk7XG4gIGNvbnN0IHBsYXllclRvZ2dsZSA9IHBsYXllci50b2dnbGU7XG4gIHVzZVBsYXliYWNrKHtcbiAgICBsb29wLFxuICAgIHBsYXliYWNrUmF0ZSxcbiAgICBtb3ZlVG9CZWdpbm5pbmdXaGVuRW5kZWQsXG4gICAgaW5GcmFtZSxcbiAgICBvdXRGcmFtZSxcbiAgICBnZXRDdXJyZW50RnJhbWU6IHBsYXllci5nZXRDdXJyZW50RnJhbWUsXG4gICAgYnJvd3Nlck1lZGlhQ29udHJvbHNCZWhhdmlvclxuICB9KTtcbiAgdXNlRWZmZWN0MTMoKCkgPT4ge1xuICAgIGlmIChoYXNQYXVzZWRUb1Jlc3VtZSAmJiAhcGxheWVyLnBsYXlpbmcpIHtcbiAgICAgIHNldEhhc1BhdXNlZFRvUmVzdW1lKGZhbHNlKTtcbiAgICAgIHBsYXllci5wbGF5KCk7XG4gICAgfVxuICB9LCBbaGFzUGF1c2VkVG9SZXN1bWUsIHBsYXllcl0pO1xuICB1c2VFZmZlY3QxMygoKSA9PiB7XG4gICAgY29uc3QgeyBjdXJyZW50IH0gPSBjb250YWluZXI7XG4gICAgaWYgKCFjdXJyZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IG9uRnVsbHNjcmVlbkNoYW5nZSA9ICgpID0+IHtcbiAgICAgIGNvbnN0IG5ld1ZhbHVlID0gZG9jdW1lbnQuZnVsbHNjcmVlbkVsZW1lbnQgPT09IGN1cnJlbnQgfHwgZG9jdW1lbnQud2Via2l0RnVsbHNjcmVlbkVsZW1lbnQgPT09IGN1cnJlbnQ7XG4gICAgICBzZXRJc0Z1bGxzY3JlZW4obmV3VmFsdWUpO1xuICAgIH07XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImZ1bGxzY3JlZW5jaGFuZ2VcIiwgb25GdWxsc2NyZWVuQ2hhbmdlKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwid2Via2l0ZnVsbHNjcmVlbmNoYW5nZVwiLCBvbkZ1bGxzY3JlZW5DaGFuZ2UpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiZnVsbHNjcmVlbmNoYW5nZVwiLCBvbkZ1bGxzY3JlZW5DaGFuZ2UpO1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIndlYmtpdGZ1bGxzY3JlZW5jaGFuZ2VcIiwgb25GdWxsc2NyZWVuQ2hhbmdlKTtcbiAgICB9O1xuICB9LCBbXSk7XG4gIGNvbnN0IHRvZ2dsZSA9IHVzZUNhbGxiYWNrMTEoKGUpID0+IHtcbiAgICBwbGF5ZXJUb2dnbGUoZSk7XG4gIH0sIFtwbGF5ZXJUb2dnbGVdKTtcbiAgY29uc3QgcmVxdWVzdEZ1bGxzY3JlZW4gPSB1c2VDYWxsYmFjazExKCgpID0+IHtcbiAgICBpZiAoIWFsbG93RnVsbHNjcmVlbikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiYWxsb3dGdWxsc2NyZWVuIGlzIGZhbHNlXCIpO1xuICAgIH1cbiAgICBpZiAoIXN1cHBvcnRzRnVsbFNjcmVlbikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQnJvd3NlciBkb2VzbnQgc3VwcG9ydCBmdWxsc2NyZWVuXCIpO1xuICAgIH1cbiAgICBpZiAoIWNvbnRhaW5lci5jdXJyZW50KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBwbGF5ZXIgcmVmIGZvdW5kXCIpO1xuICAgIH1cbiAgICBpZiAoY29udGFpbmVyLmN1cnJlbnQud2Via2l0UmVxdWVzdEZ1bGxTY3JlZW4pIHtcbiAgICAgIGNvbnRhaW5lci5jdXJyZW50LndlYmtpdFJlcXVlc3RGdWxsU2NyZWVuKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnRhaW5lci5jdXJyZW50LnJlcXVlc3RGdWxsc2NyZWVuKCk7XG4gICAgfVxuICB9LCBbYWxsb3dGdWxsc2NyZWVuLCBzdXBwb3J0c0Z1bGxTY3JlZW5dKTtcbiAgY29uc3QgZXhpdEZ1bGxzY3JlZW4gPSB1c2VDYWxsYmFjazExKCgpID0+IHtcbiAgICBpZiAoZG9jdW1lbnQud2Via2l0RXhpdEZ1bGxzY3JlZW4pIHtcbiAgICAgIGRvY3VtZW50LndlYmtpdEV4aXRGdWxsc2NyZWVuKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRvY3VtZW50LmV4aXRGdWxsc2NyZWVuKCk7XG4gICAgfVxuICB9LCBbXSk7XG4gIHVzZUVmZmVjdDEzKCgpID0+IHtcbiAgICBjb25zdCB7IGN1cnJlbnQgfSA9IGNvbnRhaW5lcjtcbiAgICBpZiAoIWN1cnJlbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgZnVsbHNjcmVlbkNoYW5nZSA9ICgpID0+IHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC53ZWJraXRGdWxsc2NyZWVuRWxlbWVudCA/PyBkb2N1bWVudC5mdWxsc2NyZWVuRWxlbWVudDtcbiAgICAgIGlmIChlbGVtZW50ICYmIGVsZW1lbnQgPT09IGNvbnRhaW5lci5jdXJyZW50KSB7XG4gICAgICAgIHBsYXllci5lbWl0dGVyLmRpc3BhdGNoRnVsbHNjcmVlbkNoYW5nZSh7XG4gICAgICAgICAgaXNGdWxsc2NyZWVuOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGxheWVyLmVtaXR0ZXIuZGlzcGF0Y2hGdWxsc2NyZWVuQ2hhbmdlKHtcbiAgICAgICAgICBpc0Z1bGxzY3JlZW46IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG4gICAgY3VycmVudC5hZGRFdmVudExpc3RlbmVyKFwid2Via2l0ZnVsbHNjcmVlbmNoYW5nZVwiLCBmdWxsc2NyZWVuQ2hhbmdlKTtcbiAgICBjdXJyZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJmdWxsc2NyZWVuY2hhbmdlXCIsIGZ1bGxzY3JlZW5DaGFuZ2UpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjdXJyZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ3ZWJraXRmdWxsc2NyZWVuY2hhbmdlXCIsIGZ1bGxzY3JlZW5DaGFuZ2UpO1xuICAgICAgY3VycmVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiZnVsbHNjcmVlbmNoYW5nZVwiLCBmdWxsc2NyZWVuQ2hhbmdlKTtcbiAgICB9O1xuICB9LCBbcGxheWVyLmVtaXR0ZXJdKTtcbiAgY29uc3QgZHVyYXRpb25JbkZyYW1lcyA9IGNvbmZpZz8uZHVyYXRpb25JbkZyYW1lcyA/PyAxO1xuICBjb25zdCBsYXlvdXQgPSB1c2VNZW1vMTIoKCkgPT4ge1xuICAgIGlmICghY29uZmlnIHx8ICFjYW52YXNTaXplKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIGNhbGN1bGF0ZUNhbnZhc1RyYW5zZm9ybWF0aW9uKHtcbiAgICAgIGNhbnZhc1NpemUsXG4gICAgICBjb21wb3NpdGlvbkhlaWdodDogY29uZmlnLmhlaWdodCxcbiAgICAgIGNvbXBvc2l0aW9uV2lkdGg6IGNvbmZpZy53aWR0aCxcbiAgICAgIHByZXZpZXdTaXplOiBcImF1dG9cIlxuICAgIH0pO1xuICB9LCBbY2FudmFzU2l6ZSwgY29uZmlnXSk7XG4gIGNvbnN0IHNjYWxlID0gbGF5b3V0Py5zY2FsZSA/PyAxO1xuICBjb25zdCBpbml0aWFsU2NhbGVJZ25vcmVkID0gdXNlUmVmMTAoZmFsc2UpO1xuICB1c2VFZmZlY3QxMygoKSA9PiB7XG4gICAgaWYgKCFpbml0aWFsU2NhbGVJZ25vcmVkLmN1cnJlbnQpIHtcbiAgICAgIGluaXRpYWxTY2FsZUlnbm9yZWQuY3VycmVudCA9IHRydWU7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHBsYXllci5lbWl0dGVyLmRpc3BhdGNoU2NhbGVDaGFuZ2Uoc2NhbGUpO1xuICB9LCBbcGxheWVyLmVtaXR0ZXIsIHNjYWxlXSk7XG4gIGNvbnN0IHsgc2V0TWVkaWFWb2x1bWUsIHNldE1lZGlhTXV0ZWQgfSA9IHVzZUNvbnRleHQ2KEludGVybmFsczExLlNldE1lZGlhVm9sdW1lQ29udGV4dCk7XG4gIGNvbnN0IHsgbWVkaWFNdXRlZCwgbWVkaWFWb2x1bWUgfSA9IHVzZUNvbnRleHQ2KEludGVybmFsczExLk1lZGlhVm9sdW1lQ29udGV4dCk7XG4gIHVzZUVmZmVjdDEzKCgpID0+IHtcbiAgICBwbGF5ZXIuZW1pdHRlci5kaXNwYXRjaFZvbHVtZUNoYW5nZShtZWRpYVZvbHVtZSk7XG4gIH0sIFtwbGF5ZXIuZW1pdHRlciwgbWVkaWFWb2x1bWVdKTtcbiAgY29uc3QgaXNNdXRlZCA9IG1lZGlhTXV0ZWQgfHwgbWVkaWFWb2x1bWUgPT09IDA7XG4gIHVzZUVmZmVjdDEzKCgpID0+IHtcbiAgICBwbGF5ZXIuZW1pdHRlci5kaXNwYXRjaE11dGVDaGFuZ2Uoe1xuICAgICAgaXNNdXRlZFxuICAgIH0pO1xuICB9LCBbcGxheWVyLmVtaXR0ZXIsIGlzTXV0ZWRdKTtcbiAgY29uc3QgW3Nob3dCdWZmZXJJbmRpY2F0b3IsIHNldFNob3dCdWZmZXJTdGF0ZV0gPSB1c2VTdGF0ZTExKGZhbHNlKTtcbiAgdXNlRWZmZWN0MTMoKCkgPT4ge1xuICAgIGxldCB0aW1lb3V0ID0gbnVsbDtcbiAgICBsZXQgc3RvcHBlZCA9IGZhbHNlO1xuICAgIGNvbnN0IG9uQnVmZmVyID0gKCkgPT4ge1xuICAgICAgc3RvcHBlZCA9IGZhbHNlO1xuICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgaWYgKGJ1ZmZlclN0YXRlRGVsYXlJbk1pbGxpc2Vjb25kcyA9PT0gMCkge1xuICAgICAgICAgIHNldFNob3dCdWZmZXJTdGF0ZSh0cnVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXN0b3BwZWQpIHtcbiAgICAgICAgICAgICAgc2V0U2hvd0J1ZmZlclN0YXRlKHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sIGJ1ZmZlclN0YXRlRGVsYXlJbk1pbGxpc2Vjb25kcyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG4gICAgY29uc3Qgb25SZXN1bWUgPSAoKSA9PiB7XG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICBzdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgc2V0U2hvd0J1ZmZlclN0YXRlKGZhbHNlKTtcbiAgICAgICAgaWYgKHRpbWVvdXQpIHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG4gICAgcGxheWVyLmVtaXR0ZXIuYWRkRXZlbnRMaXN0ZW5lcihcIndhaXRpbmdcIiwgb25CdWZmZXIpO1xuICAgIHBsYXllci5lbWl0dGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJyZXN1bWVcIiwgb25SZXN1bWUpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBwbGF5ZXIuZW1pdHRlci5yZW1vdmVFdmVudExpc3RlbmVyKFwid2FpdGluZ1wiLCBvbkJ1ZmZlcik7XG4gICAgICBwbGF5ZXIuZW1pdHRlci5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzdW1lXCIsIG9uUmVzdW1lKTtcbiAgICAgIHNldFNob3dCdWZmZXJTdGF0ZShmYWxzZSk7XG4gICAgICBpZiAodGltZW91dCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICB9XG4gICAgICBzdG9wcGVkID0gdHJ1ZTtcbiAgICB9O1xuICB9LCBbYnVmZmVyU3RhdGVEZWxheUluTWlsbGlzZWNvbmRzLCBwbGF5ZXIuZW1pdHRlcl0pO1xuICB1c2VJbXBlcmF0aXZlSGFuZGxlKHJlZiwgKCkgPT4ge1xuICAgIGNvbnN0IG1ldGhvZHMgPSB7XG4gICAgICBwbGF5OiBwbGF5ZXIucGxheSxcbiAgICAgIHBhdXNlOiAoKSA9PiB7XG4gICAgICAgIHNldEhhc1BhdXNlZFRvUmVzdW1lKGZhbHNlKTtcbiAgICAgICAgcGxheWVyLnBhdXNlKCk7XG4gICAgICB9LFxuICAgICAgdG9nZ2xlLFxuICAgICAgZ2V0Q29udGFpbmVyTm9kZTogKCkgPT4gY29udGFpbmVyLmN1cnJlbnQsXG4gICAgICBnZXRDdXJyZW50RnJhbWU6IHBsYXllci5nZXRDdXJyZW50RnJhbWUsXG4gICAgICBpc1BsYXlpbmc6IHBsYXllci5pc1BsYXlpbmcsXG4gICAgICBzZWVrVG86IChmKSA9PiB7XG4gICAgICAgIGNvbnN0IGxhc3RGcmFtZSA9IGR1cmF0aW9uSW5GcmFtZXMgLSAxO1xuICAgICAgICBjb25zdCBmcmFtZVRvU2Vla1RvID0gTWF0aC5tYXgoMCwgTWF0aC5taW4obGFzdEZyYW1lLCBmKSk7XG4gICAgICAgIGlmIChwbGF5ZXIuaXNQbGF5aW5nKCkpIHtcbiAgICAgICAgICBjb25zdCBwYXVzZVRvUmVzdW1lID0gZnJhbWVUb1NlZWtUbyAhPT0gbGFzdEZyYW1lIHx8IGxvb3A7XG4gICAgICAgICAgc2V0SGFzUGF1c2VkVG9SZXN1bWUocGF1c2VUb1Jlc3VtZSk7XG4gICAgICAgICAgcGxheWVyLnBhdXNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZyYW1lVG9TZWVrVG8gPT09IGxhc3RGcmFtZSAmJiAhbG9vcCkge1xuICAgICAgICAgIHBsYXllci5lbWl0dGVyLmRpc3BhdGNoRW5kZWQoKTtcbiAgICAgICAgfVxuICAgICAgICBwbGF5ZXIuc2VlayhmcmFtZVRvU2Vla1RvKTtcbiAgICAgIH0sXG4gICAgICBpc0Z1bGxzY3JlZW46ICgpID0+IHtcbiAgICAgICAgY29uc3QgeyBjdXJyZW50IH0gPSBjb250YWluZXI7XG4gICAgICAgIGlmICghY3VycmVudCkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZG9jdW1lbnQuZnVsbHNjcmVlbkVsZW1lbnQgPT09IGN1cnJlbnQgfHwgZG9jdW1lbnQud2Via2l0RnVsbHNjcmVlbkVsZW1lbnQgPT09IGN1cnJlbnQ7XG4gICAgICB9LFxuICAgICAgcmVxdWVzdEZ1bGxzY3JlZW4sXG4gICAgICBleGl0RnVsbHNjcmVlbixcbiAgICAgIGdldFZvbHVtZTogKCkgPT4ge1xuICAgICAgICBpZiAobWVkaWFNdXRlZCkge1xuICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZWRpYVZvbHVtZTtcbiAgICAgIH0sXG4gICAgICBzZXRWb2x1bWU6ICh2b2wpID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiB2b2wgIT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBzZXRWb2x1bWUoKSB0YWtlcyBhIG51bWJlciwgZ290IHZhbHVlIG9mIHR5cGUgJHt0eXBlb2Ygdm9sfWApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc05hTih2b2wpKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgc2V0Vm9sdW1lKCkgZ290IGEgbnVtYmVyIHRoYXQgaXMgTmFOLiBWb2x1bWUgbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDEuYCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZvbCA8IDAgfHwgdm9sID4gMSkge1xuICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYHNldFZvbHVtZSgpIGdvdCBhIG51bWJlciB0aGF0IGlzIG91dCBvZiByYW5nZS4gTXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDEsIGdvdCAke3R5cGVvZiB2b2x9YCk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0TWVkaWFWb2x1bWUodm9sKTtcbiAgICAgIH0sXG4gICAgICBpc011dGVkOiAoKSA9PiBpc011dGVkLFxuICAgICAgbXV0ZTogKCkgPT4ge1xuICAgICAgICBzZXRNZWRpYU11dGVkKHRydWUpO1xuICAgICAgfSxcbiAgICAgIHVubXV0ZTogKCkgPT4ge1xuICAgICAgICBzZXRNZWRpYU11dGVkKGZhbHNlKTtcbiAgICAgIH0sXG4gICAgICBnZXRTY2FsZTogKCkgPT4gc2NhbGUsXG4gICAgICBwYXVzZUFuZFJldHVyblRvUGxheVN0YXJ0OiAoKSA9PiB7XG4gICAgICAgIHBsYXllci5wYXVzZUFuZFJldHVyblRvUGxheVN0YXJ0KCk7XG4gICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihwbGF5ZXIuZW1pdHRlciwgbWV0aG9kcyk7XG4gIH0sIFtcbiAgICBkdXJhdGlvbkluRnJhbWVzLFxuICAgIGV4aXRGdWxsc2NyZWVuLFxuICAgIGxvb3AsXG4gICAgbWVkaWFNdXRlZCxcbiAgICBpc011dGVkLFxuICAgIG1lZGlhVm9sdW1lLFxuICAgIHBsYXllcixcbiAgICByZXF1ZXN0RnVsbHNjcmVlbixcbiAgICBzZXRNZWRpYU11dGVkLFxuICAgIHNldE1lZGlhVm9sdW1lLFxuICAgIHRvZ2dsZSxcbiAgICBzY2FsZVxuICBdKTtcbiAgY29uc3QgVmlkZW9Db21wb25lbnQgPSB2aWRlbyA/IHZpZGVvLmNvbXBvbmVudCA6IG51bGw7XG4gIGNvbnN0IG91dGVyU3R5bGUgPSB1c2VNZW1vMTIoKCkgPT4ge1xuICAgIHJldHVybiBjYWxjdWxhdGVPdXRlclN0eWxlKHtcbiAgICAgIGNhbnZhc1NpemUsXG4gICAgICBjb25maWcsXG4gICAgICBzdHlsZTogc3R5bGUyLFxuICAgICAgb3ZlcmZsb3dWaXNpYmxlLFxuICAgICAgbGF5b3V0XG4gICAgfSk7XG4gIH0sIFtjYW52YXNTaXplLCBjb25maWcsIGxheW91dCwgb3ZlcmZsb3dWaXNpYmxlLCBzdHlsZTJdKTtcbiAgY29uc3Qgb3V0ZXIgPSB1c2VNZW1vMTIoKCkgPT4ge1xuICAgIHJldHVybiBjYWxjdWxhdGVPdXRlcih7IGNvbmZpZywgbGF5b3V0LCBzY2FsZSwgb3ZlcmZsb3dWaXNpYmxlIH0pO1xuICB9LCBbY29uZmlnLCBsYXlvdXQsIG92ZXJmbG93VmlzaWJsZSwgc2NhbGVdKTtcbiAgY29uc3QgY29udGFpbmVyU3R5bGUzID0gdXNlTWVtbzEyKCgpID0+IHtcbiAgICByZXR1cm4gY2FsY3VsYXRlQ29udGFpbmVyU3R5bGUoe1xuICAgICAgY29uZmlnLFxuICAgICAgbGF5b3V0LFxuICAgICAgc2NhbGUsXG4gICAgICBvdmVyZmxvd1Zpc2libGVcbiAgICB9KTtcbiAgfSwgW2NvbmZpZywgbGF5b3V0LCBvdmVyZmxvd1Zpc2libGUsIHNjYWxlXSk7XG4gIGNvbnN0IHBsYXllclBhdXNlID0gcGxheWVyLnBhdXNlO1xuICBjb25zdCBwbGF5ZXJEaXNwYXRjaEVycm9yID0gcGxheWVyLmVtaXR0ZXIuZGlzcGF0Y2hFcnJvcjtcbiAgY29uc3Qgb25FcnJvciA9IHVzZUNhbGxiYWNrMTEoKGVycm9yKSA9PiB7XG4gICAgcGxheWVyUGF1c2UoKTtcbiAgICBwbGF5ZXJEaXNwYXRjaEVycm9yKGVycm9yKTtcbiAgfSwgW3BsYXllckRpc3BhdGNoRXJyb3IsIHBsYXllclBhdXNlXSk7XG4gIGNvbnN0IG9uRnVsbHNjcmVlbkJ1dHRvbkNsaWNrID0gdXNlQ2FsbGJhY2sxMSgoZSkgPT4ge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgcmVxdWVzdEZ1bGxzY3JlZW4oKTtcbiAgfSwgW3JlcXVlc3RGdWxsc2NyZWVuXSk7XG4gIGNvbnN0IG9uRXhpdEZ1bGxzY3JlZW5CdXR0b25DbGljayA9IHVzZUNhbGxiYWNrMTEoKGUpID0+IHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIGV4aXRGdWxsc2NyZWVuKCk7XG4gIH0sIFtleGl0RnVsbHNjcmVlbl0pO1xuICBjb25zdCBvblNpbmdsZUNsaWNrID0gdXNlQ2FsbGJhY2sxMSgoZSkgPT4ge1xuICAgIGNvbnN0IHJpZ2h0Q2xpY2sgPSBlIGluc3RhbmNlb2YgTW91c2VFdmVudCA/IGUuYnV0dG9uID09PSAyIDogZS5uYXRpdmVFdmVudC5idXR0b247XG4gICAgaWYgKHJpZ2h0Q2xpY2spIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdG9nZ2xlKGUpO1xuICB9LCBbdG9nZ2xlXSk7XG4gIGNvbnN0IG9uU2Vla1N0YXJ0ID0gdXNlQ2FsbGJhY2sxMSgoKSA9PiB7XG4gICAgc2V0U2Vla2luZyh0cnVlKTtcbiAgfSwgW10pO1xuICBjb25zdCBvblNlZWtFbmQgPSB1c2VDYWxsYmFjazExKCgpID0+IHtcbiAgICBzZXRTZWVraW5nKGZhbHNlKTtcbiAgfSwgW10pO1xuICBjb25zdCBvbkRvdWJsZUNsaWNrID0gdXNlQ2FsbGJhY2sxMSgoKSA9PiB7XG4gICAgaWYgKGlzRnVsbHNjcmVlbikge1xuICAgICAgZXhpdEZ1bGxzY3JlZW4oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVxdWVzdEZ1bGxzY3JlZW4oKTtcbiAgICB9XG4gIH0sIFtleGl0RnVsbHNjcmVlbiwgaXNGdWxsc2NyZWVuLCByZXF1ZXN0RnVsbHNjcmVlbl0pO1xuICBjb25zdCB7IGhhbmRsZVBvaW50ZXJEb3duLCBoYW5kbGVEb3VibGVDbGljayB9ID0gdXNlQ2xpY2tQcmV2ZW50aW9uT25Eb3VibGVDbGljayhvblNpbmdsZUNsaWNrLCBvbkRvdWJsZUNsaWNrLCBkb3VibGVDbGlja1RvRnVsbHNjcmVlbiAmJiBhbGxvd0Z1bGxzY3JlZW4gJiYgc3VwcG9ydHNGdWxsU2NyZWVuKTtcbiAgdXNlRWZmZWN0MTMoKCkgPT4ge1xuICAgIGlmIChzaG91bGRBdXRvcGxheSkge1xuICAgICAgcGxheWVyLnBsYXkoKTtcbiAgICAgIHNldFNob3VsZEF1dG9QbGF5KGZhbHNlKTtcbiAgICB9XG4gIH0sIFtzaG91bGRBdXRvcGxheSwgcGxheWVyXSk7XG4gIGNvbnN0IGxvYWRpbmdNYXJrdXAgPSB1c2VNZW1vMTIoKCkgPT4ge1xuICAgIHJldHVybiByZW5kZXJMb2FkaW5nID8gcmVuZGVyTG9hZGluZyh7XG4gICAgICBoZWlnaHQ6IG91dGVyU3R5bGUuaGVpZ2h0LFxuICAgICAgd2lkdGg6IG91dGVyU3R5bGUud2lkdGgsXG4gICAgICBpc0J1ZmZlcmluZzogc2hvd0J1ZmZlckluZGljYXRvclxuICAgIH0pIDogbnVsbDtcbiAgfSwgW291dGVyU3R5bGUuaGVpZ2h0LCBvdXRlclN0eWxlLndpZHRoLCByZW5kZXJMb2FkaW5nLCBzaG93QnVmZmVySW5kaWNhdG9yXSk7XG4gIGNvbnN0IGN1cnJlbnRTY2FsZSA9IHVzZU1lbW8xMigoKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6IFwic2NhbGVcIixcbiAgICAgIHNjYWxlXG4gICAgfTtcbiAgfSwgW3NjYWxlXSk7XG4gIGlmICghY29uZmlnKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgY29uc3QgcG9zdGVyID0gcmVuZGVyUG9zdGVyID8gcmVuZGVyUG9zdGVyKHtcbiAgICBoZWlnaHQ6IHBvc3RlckZpbGxNb2RlID09PSBcInBsYXllci1zaXplXCIgPyBvdXRlclN0eWxlLmhlaWdodCA6IGNvbmZpZy5oZWlnaHQsXG4gICAgd2lkdGg6IHBvc3RlckZpbGxNb2RlID09PSBcInBsYXllci1zaXplXCIgPyBvdXRlclN0eWxlLndpZHRoIDogY29uZmlnLndpZHRoLFxuICAgIGlzQnVmZmVyaW5nOiBzaG93QnVmZmVySW5kaWNhdG9yXG4gIH0pIDogbnVsbDtcbiAgaWYgKHBvc3RlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcInJlbmRlclBvc3RlcigpIG11c3QgcmV0dXJuIGEgUmVhY3QgZWxlbWVudCwgYnV0IHVuZGVmaW5lZCB3YXMgcmV0dXJuZWRcIik7XG4gIH1cbiAgY29uc3Qgc2hvdWxkU2hvd1Bvc3RlciA9IHBvc3RlciAmJiBbXG4gICAgc2hvd1Bvc3RlcldoZW5QYXVzZWQgJiYgIXBsYXllci5pc1BsYXlpbmcoKSAmJiAhc2Vla2luZyxcbiAgICBzaG93UG9zdGVyV2hlbkVuZGVkICYmIHBsYXllci5pc0xhc3RGcmFtZSAmJiAhcGxheWVyLmlzUGxheWluZygpLFxuICAgIHNob3dQb3N0ZXJXaGVuVW5wbGF5ZWQgJiYgIXBsYXllci5oYXNQbGF5ZWQgJiYgIXBsYXllci5pc1BsYXlpbmcoKSxcbiAgICBzaG93UG9zdGVyV2hlbkJ1ZmZlcmluZyAmJiBzaG93QnVmZmVySW5kaWNhdG9yICYmIHBsYXllci5pc1BsYXlpbmcoKSxcbiAgICBzaG93UG9zdGVyV2hlbkJ1ZmZlcmluZ0FuZFBhdXNlZCAmJiBzaG93QnVmZmVySW5kaWNhdG9yICYmICFwbGF5ZXIuaXNQbGF5aW5nKClcbiAgXS5zb21lKEJvb2xlYW4pO1xuICBjb25zdCB7IGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCwgLi4ub3V0ZXJXaXRob3V0U2NhbGUgfSA9IG91dGVyO1xuICBjb25zdCBjb250ZW50ID0gLyogQF9fUFVSRV9fICovIGpzeHM5KEZyYWdtZW50Mywge1xuICAgIGNoaWxkcmVuOiBbXG4gICAgICAvKiBAX19QVVJFX18gKi8ganN4czkoXCJkaXZcIiwge1xuICAgICAgICBzdHlsZTogb3V0ZXIsXG4gICAgICAgIG9uUG9pbnRlckRvd246IGNsaWNrVG9QbGF5ID8gaGFuZGxlUG9pbnRlckRvd24gOiB1bmRlZmluZWQsXG4gICAgICAgIG9uRG91YmxlQ2xpY2s6IGRvdWJsZUNsaWNrVG9GdWxsc2NyZWVuID8gaGFuZGxlRG91YmxlQ2xpY2sgOiB1bmRlZmluZWQsXG4gICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeHM5KFwiZGl2XCIsIHtcbiAgICAgICAgICAgIHN0eWxlOiBjb250YWluZXJTdHlsZTMsXG4gICAgICAgICAgICBjbGFzc05hbWU6IHBsYXllckNzc0NsYXNzbmFtZShvdmVycmlkZUludGVybmFsQ2xhc3NOYW1lKSxcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgIFZpZGVvQ29tcG9uZW50ID8gLyogQF9fUFVSRV9fICovIGpzeDEyKEVycm9yQm91bmRhcnksIHtcbiAgICAgICAgICAgICAgICBvbkVycm9yLFxuICAgICAgICAgICAgICAgIGVycm9yRmFsbGJhY2ssXG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gxMihJbnRlcm5hbHMxMS5DdXJyZW50U2NhbGVDb250ZXh0LlByb3ZpZGVyLCB7XG4gICAgICAgICAgICAgICAgICB2YWx1ZTogY3VycmVudFNjYWxlLFxuICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gxMihWaWRlb0NvbXBvbmVudCwge1xuICAgICAgICAgICAgICAgICAgICAuLi52aWRlbz8ucHJvcHMgPz8ge30sXG4gICAgICAgICAgICAgICAgICAgIC4uLmlucHV0UHJvcHMgPz8ge31cbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgfSkgOiBudWxsLFxuICAgICAgICAgICAgICBzaG91bGRTaG93UG9zdGVyICYmIHBvc3RlckZpbGxNb2RlID09PSBcImNvbXBvc2l0aW9uLXNpemVcIiA/IC8qIEBfX1BVUkVfXyAqLyBqc3gxMihcImRpdlwiLCB7XG4gICAgICAgICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICAgIC4uLm91dGVyV2l0aG91dFNjYWxlLFxuICAgICAgICAgICAgICAgICAgd2lkdGg6IGNvbmZpZy53aWR0aCxcbiAgICAgICAgICAgICAgICAgIGhlaWdodDogY29uZmlnLmhlaWdodFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25Qb2ludGVyRG93bjogY2xpY2tUb1BsYXkgPyBoYW5kbGVQb2ludGVyRG93biA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBvbkRvdWJsZUNsaWNrOiBkb3VibGVDbGlja1RvRnVsbHNjcmVlbiA/IGhhbmRsZURvdWJsZUNsaWNrIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBwb3N0ZXJcbiAgICAgICAgICAgICAgfSkgOiBudWxsXG4gICAgICAgICAgICBdXG4gICAgICAgICAgfSksXG4gICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeDEyKFJlbmRlcldhcm5pbmdJZkJsYWNrbGlzdCwge30pXG4gICAgICAgIF1cbiAgICAgIH0pLFxuICAgICAgc2hvdWxkU2hvd1Bvc3RlciAmJiBwb3N0ZXJGaWxsTW9kZSA9PT0gXCJwbGF5ZXItc2l6ZVwiID8gLyogQF9fUFVSRV9fICovIGpzeDEyKFwiZGl2XCIsIHtcbiAgICAgICAgc3R5bGU6IG91dGVyLFxuICAgICAgICBvblBvaW50ZXJEb3duOiBjbGlja1RvUGxheSA/IGhhbmRsZVBvaW50ZXJEb3duIDogdW5kZWZpbmVkLFxuICAgICAgICBvbkRvdWJsZUNsaWNrOiBkb3VibGVDbGlja1RvRnVsbHNjcmVlbiA/IGhhbmRsZURvdWJsZUNsaWNrIDogdW5kZWZpbmVkLFxuICAgICAgICBjaGlsZHJlbjogcG9zdGVyXG4gICAgICB9KSA6IG51bGwsXG4gICAgICBjb250cm9scyA/IC8qIEBfX1BVUkVfXyAqLyBqc3gxMihDb250cm9scywge1xuICAgICAgICBmcHM6IGNvbmZpZy5mcHMsXG4gICAgICAgIHBsYXlpbmc6IHBsYXllci5wbGF5aW5nLFxuICAgICAgICB0b2dnbGU6IHBsYXllci50b2dnbGUsXG4gICAgICAgIGR1cmF0aW9uSW5GcmFtZXM6IGNvbmZpZy5kdXJhdGlvbkluRnJhbWVzLFxuICAgICAgICBjb250YWluZXJSZWY6IGNvbnRhaW5lcixcbiAgICAgICAgb25GdWxsc2NyZWVuQnV0dG9uQ2xpY2ssXG4gICAgICAgIGlzRnVsbHNjcmVlbixcbiAgICAgICAgYWxsb3dGdWxsc2NyZWVuLFxuICAgICAgICBzaG93Vm9sdW1lQ29udHJvbHMsXG4gICAgICAgIG9uRXhpdEZ1bGxzY3JlZW5CdXR0b25DbGljayxcbiAgICAgICAgc3BhY2VLZXlUb1BsYXlPclBhdXNlLFxuICAgICAgICBvblNlZWtFbmQsXG4gICAgICAgIG9uU2Vla1N0YXJ0LFxuICAgICAgICBpbkZyYW1lLFxuICAgICAgICBvdXRGcmFtZSxcbiAgICAgICAgaW5pdGlhbGx5U2hvd0NvbnRyb2xzLFxuICAgICAgICBjYW52YXNTaXplLFxuICAgICAgICByZW5kZXJGdWxsc2NyZWVuQnV0dG9uLFxuICAgICAgICByZW5kZXJQbGF5UGF1c2VCdXR0b24sXG4gICAgICAgIGFsd2F5c1Nob3dDb250cm9scyxcbiAgICAgICAgc2hvd1BsYXliYWNrUmF0ZUNvbnRyb2wsXG4gICAgICAgIGJ1ZmZlcmluZzogc2hvd0J1ZmZlckluZGljYXRvcixcbiAgICAgICAgaGlkZUNvbnRyb2xzV2hlblBvaW50ZXJEb2VzbnRNb3ZlLFxuICAgICAgICBvbkRvdWJsZUNsaWNrOiBkb3VibGVDbGlja1RvRnVsbHNjcmVlbiA/IGhhbmRsZURvdWJsZUNsaWNrIDogdW5kZWZpbmVkLFxuICAgICAgICBvblBvaW50ZXJEb3duOiBjbGlja1RvUGxheSA/IGhhbmRsZVBvaW50ZXJEb3duIDogdW5kZWZpbmVkLFxuICAgICAgICByZW5kZXJNdXRlQnV0dG9uLFxuICAgICAgICByZW5kZXJWb2x1bWVTbGlkZXJcbiAgICAgIH0pIDogbnVsbFxuICAgIF1cbiAgfSk7XG4gIGlmIChub1N1c3BlbnNlIHx8IElTX05PREUgJiYgIWRvZXNSZWFjdFZlcnNpb25TdXBwb3J0U3VzcGVuc2UpIHtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDEyKFwiZGl2XCIsIHtcbiAgICAgIHJlZjogY29udGFpbmVyLFxuICAgICAgc3R5bGU6IG91dGVyU3R5bGUsXG4gICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZTIsXG4gICAgICBjaGlsZHJlbjogY29udGVudFxuICAgIH0pO1xuICB9XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MTIoXCJkaXZcIiwge1xuICAgIHJlZjogY29udGFpbmVyLFxuICAgIHN0eWxlOiBvdXRlclN0eWxlLFxuICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lMixcbiAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDEyKFN1c3BlbnNlLCB7XG4gICAgICBmYWxsYmFjazogbG9hZGluZ01hcmt1cCxcbiAgICAgIGNoaWxkcmVuOiBjb250ZW50XG4gICAgfSlcbiAgfSk7XG59O1xudmFyIFBsYXllclVJX2RlZmF1bHQgPSBmb3J3YXJkUmVmKFBsYXllclVJKTtcblxuLy8gc3JjL1NoYXJlZFBsYXllckNvbnRleHQudHN4XG5pbXBvcnQgeyB1c2VDYWxsYmFjayBhcyB1c2VDYWxsYmFjazEyLCB1c2VNZW1vIGFzIHVzZU1lbW8xMywgdXNlU3RhdGUgYXMgdXNlU3RhdGUxMiB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgSW50ZXJuYWxzIGFzIEludGVybmFsczEzIH0gZnJvbSBcInJlbW90aW9uXCI7XG5cbi8vIHNyYy92b2x1bWUtcGVyc2lzdGFuY2UudHNcbmltcG9ydCB7IEludGVybmFscyBhcyBJbnRlcm5hbHMxMiB9IGZyb20gXCJyZW1vdGlvblwiO1xudmFyIERFRkFVTFRfVk9MVU1FX1BFUlNJU1RBTkNFX0tFWSA9IFwicmVtb3Rpb24udm9sdW1lUHJlZmVyZW5jZVwiO1xudmFyIHBlcnNpc3RWb2x1bWUgPSAodm9sdW1lLCBsb2dMZXZlbCwgdm9sdW1lUGVyc2lzdGVuY2VLZXkpID0+IHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdHJ5IHtcbiAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0odm9sdW1lUGVyc2lzdGVuY2VLZXkgPz8gREVGQVVMVF9WT0xVTUVfUEVSU0lTVEFOQ0VfS0VZLCBTdHJpbmcodm9sdW1lKSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBJbnRlcm5hbHMxMi5Mb2cuZXJyb3IoeyBsb2dMZXZlbCwgdGFnOiBudWxsIH0sIFwiQ291bGQgbm90IHBlcnNpc3Qgdm9sdW1lXCIsIGUpO1xuICB9XG59O1xudmFyIGdldFByZWZlcnJlZFZvbHVtZSA9ICh2b2x1bWVQZXJzaXN0ZW5jZUtleSkgPT4ge1xuICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHJldHVybiAxO1xuICB9XG4gIHRyeSB7XG4gICAgY29uc3QgdmFsID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKHZvbHVtZVBlcnNpc3RlbmNlS2V5ID8/IERFRkFVTFRfVk9MVU1FX1BFUlNJU1RBTkNFX0tFWSk7XG4gICAgcmV0dXJuIHZhbCA/IE51bWJlcih2YWwpIDogMTtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIDE7XG4gIH1cbn07XG5cbi8vIHNyYy9TaGFyZWRQbGF5ZXJDb250ZXh0LnRzeFxuaW1wb3J0IHsganN4IGFzIGpzeDEzIH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG52YXIgUExBWUVSX0NPTVBfSUQgPSBcInBsYXllci1jb21wXCI7XG52YXIgU2hhcmVkUGxheWVyQ29udGV4dHMgPSAoe1xuICBjaGlsZHJlbixcbiAgdGltZWxpbmVDb250ZXh0LFxuICBmcHMsXG4gIGNvbXBvc2l0aW9uSGVpZ2h0LFxuICBjb21wb3NpdGlvbldpZHRoLFxuICBkdXJhdGlvbkluRnJhbWVzLFxuICBjb21wb25lbnQsXG4gIG51bWJlck9mU2hhcmVkQXVkaW9UYWdzLFxuICBpbml0aWFsbHlNdXRlZCxcbiAgbG9nTGV2ZWwsXG4gIGF1ZGlvTGF0ZW5jeUhpbnQsXG4gIHZvbHVtZVBlcnNpc3RlbmNlS2V5LFxuICBpbnB1dFByb3BzXG59KSA9PiB7XG4gIGNvbnN0IGNvbXBvc2l0aW9uTWFuYWdlckNvbnRleHQgPSB1c2VNZW1vMTMoKCkgPT4ge1xuICAgIGNvbnN0IGNvbnRleHQgPSB7XG4gICAgICBjb21wb3NpdGlvbnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIGNvbXBvbmVudCxcbiAgICAgICAgICBkdXJhdGlvbkluRnJhbWVzLFxuICAgICAgICAgIGhlaWdodDogY29tcG9zaXRpb25IZWlnaHQsXG4gICAgICAgICAgd2lkdGg6IGNvbXBvc2l0aW9uV2lkdGgsXG4gICAgICAgICAgZnBzLFxuICAgICAgICAgIGlkOiBQTEFZRVJfQ09NUF9JRCxcbiAgICAgICAgICBub25jZTogNzc3LFxuICAgICAgICAgIGZvbGRlck5hbWU6IG51bGwsXG4gICAgICAgICAgcGFyZW50Rm9sZGVyTmFtZTogbnVsbCxcbiAgICAgICAgICBzY2hlbWE6IG51bGwsXG4gICAgICAgICAgY2FsY3VsYXRlTWV0YWRhdGE6IG51bGxcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIGZvbGRlcnM6IFtdLFxuICAgICAgY3VycmVudENvbXBvc2l0aW9uTWV0YWRhdGE6IHtcbiAgICAgICAgZGVmYXVsdENvZGVjOiBudWxsLFxuICAgICAgICBkZWZhdWx0T3V0TmFtZTogbnVsbCxcbiAgICAgICAgZGVmYXVsdFBpeGVsRm9ybWF0OiBudWxsLFxuICAgICAgICBkZWZhdWx0UHJvUmVzUHJvZmlsZTogbnVsbCxcbiAgICAgICAgZGVmYXVsdFZpZGVvSW1hZ2VGb3JtYXQ6IG51bGwsXG4gICAgICAgIGR1cmF0aW9uSW5GcmFtZXMsXG4gICAgICAgIGZwcyxcbiAgICAgICAgaGVpZ2h0OiBjb21wb3NpdGlvbkhlaWdodCxcbiAgICAgICAgd2lkdGg6IGNvbXBvc2l0aW9uV2lkdGgsXG4gICAgICAgIHByb3BzOiBpbnB1dFByb3BzXG4gICAgICB9LFxuICAgICAgY2FudmFzQ29udGVudDogeyB0eXBlOiBcImNvbXBvc2l0aW9uXCIsIGNvbXBvc2l0aW9uSWQ6IFwicGxheWVyLWNvbXBcIiB9XG4gICAgfTtcbiAgICByZXR1cm4gY29udGV4dDtcbiAgfSwgW1xuICAgIGNvbXBvbmVudCxcbiAgICBkdXJhdGlvbkluRnJhbWVzLFxuICAgIGNvbXBvc2l0aW9uSGVpZ2h0LFxuICAgIGNvbXBvc2l0aW9uV2lkdGgsXG4gICAgZnBzLFxuICAgIGlucHV0UHJvcHNcbiAgXSk7XG4gIGNvbnN0IFttZWRpYU11dGVkLCBzZXRNZWRpYU11dGVkXSA9IHVzZVN0YXRlMTIoKCkgPT4gaW5pdGlhbGx5TXV0ZWQpO1xuICBjb25zdCBbbWVkaWFWb2x1bWUsIHNldE1lZGlhVm9sdW1lXSA9IHVzZVN0YXRlMTIoKCkgPT4gZ2V0UHJlZmVycmVkVm9sdW1lKHZvbHVtZVBlcnNpc3RlbmNlS2V5ID8/IG51bGwpKTtcbiAgY29uc3QgbWVkaWFWb2x1bWVDb250ZXh0VmFsdWUgPSB1c2VNZW1vMTMoKCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICBtZWRpYU11dGVkLFxuICAgICAgbWVkaWFWb2x1bWVcbiAgICB9O1xuICB9LCBbbWVkaWFNdXRlZCwgbWVkaWFWb2x1bWVdKTtcbiAgY29uc3Qgc2V0TWVkaWFWb2x1bWVBbmRQZXJzaXN0ID0gdXNlQ2FsbGJhY2sxMigodm9sKSA9PiB7XG4gICAgc2V0TWVkaWFWb2x1bWUodm9sKTtcbiAgICBwZXJzaXN0Vm9sdW1lKHZvbCwgbG9nTGV2ZWwsIHZvbHVtZVBlcnNpc3RlbmNlS2V5ID8/IG51bGwpO1xuICB9LCBbbG9nTGV2ZWwsIHZvbHVtZVBlcnNpc3RlbmNlS2V5XSk7XG4gIGNvbnN0IHNldE1lZGlhVm9sdW1lQ29udGV4dFZhbHVlID0gdXNlTWVtbzEzKCgpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgc2V0TWVkaWFNdXRlZCxcbiAgICAgIHNldE1lZGlhVm9sdW1lOiBzZXRNZWRpYVZvbHVtZUFuZFBlcnNpc3RcbiAgICB9O1xuICB9LCBbc2V0TWVkaWFWb2x1bWVBbmRQZXJzaXN0XSk7XG4gIGNvbnN0IGxvZ0xldmVsQ29udGV4dCA9IHVzZU1lbW8xMygoKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGxvZ0xldmVsLFxuICAgICAgbW91bnRUaW1lOiBEYXRlLm5vdygpXG4gICAgfTtcbiAgfSwgW2xvZ0xldmVsXSk7XG4gIGNvbnN0IGVudiA9IHVzZU1lbW8xMygoKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlzUGxheWVyOiB0cnVlLFxuICAgICAgaXNSZW5kZXJpbmc6IGZhbHNlLFxuICAgICAgaXNTdHVkaW86IGZhbHNlLFxuICAgICAgaXNDbGllbnRTaWRlUmVuZGVyaW5nOiBmYWxzZSxcbiAgICAgIGlzUmVhZE9ubHlTdHVkaW86IGZhbHNlXG4gICAgfTtcbiAgfSwgW10pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDEzKEludGVybmFsczEzLlJlbW90aW9uRW52aXJvbm1lbnRDb250ZXh0LlByb3ZpZGVyLCB7XG4gICAgdmFsdWU6IGVudixcbiAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDEzKEludGVybmFsczEzLkxvZ0xldmVsQ29udGV4dC5Qcm92aWRlciwge1xuICAgICAgdmFsdWU6IGxvZ0xldmVsQ29udGV4dCxcbiAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4MTMoSW50ZXJuYWxzMTMuQ2FuVXNlUmVtb3Rpb25Ib29rc1Byb3ZpZGVyLCB7XG4gICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4MTMoSW50ZXJuYWxzMTMuVGltZWxpbmVDb250ZXh0LlByb3ZpZGVyLCB7XG4gICAgICAgICAgdmFsdWU6IHRpbWVsaW5lQ29udGV4dCxcbiAgICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDEzKEludGVybmFsczEzLkNvbXBvc2l0aW9uTWFuYWdlci5Qcm92aWRlciwge1xuICAgICAgICAgICAgdmFsdWU6IGNvbXBvc2l0aW9uTWFuYWdlckNvbnRleHQsXG4gICAgICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDEzKEludGVybmFsczEzLlByZWZldGNoUHJvdmlkZXIsIHtcbiAgICAgICAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gxMyhJbnRlcm5hbHMxMy5EdXJhdGlvbnNDb250ZXh0UHJvdmlkZXIsIHtcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDEzKEludGVybmFsczEzLk1lZGlhVm9sdW1lQ29udGV4dC5Qcm92aWRlciwge1xuICAgICAgICAgICAgICAgICAgdmFsdWU6IG1lZGlhVm9sdW1lQ29udGV4dFZhbHVlLFxuICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gxMyhJbnRlcm5hbHMxMy5TZXRNZWRpYVZvbHVtZUNvbnRleHQuUHJvdmlkZXIsIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHNldE1lZGlhVm9sdW1lQ29udGV4dFZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDEzKEludGVybmFsczEzLlNoYXJlZEF1ZGlvQ29udGV4dFByb3ZpZGVyLCB7XG4gICAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZBdWRpb1RhZ3M6IG51bWJlck9mU2hhcmVkQXVkaW9UYWdzLFxuICAgICAgICAgICAgICAgICAgICAgIGF1ZGlvTGF0ZW5jeUhpbnQsXG4gICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gxMyhJbnRlcm5hbHMxMy5CdWZmZXJpbmdQcm92aWRlciwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW5cbiAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9KVxuICB9KTtcbn07XG5cbi8vIHNyYy91c2UtcmVtb3Rpb24tbGljZW5zZS1hY2tub3dsZWRnZS50c1xuaW1wb3J0IHsgSW50ZXJuYWxzIGFzIEludGVybmFsczE0IH0gZnJvbSBcInJlbW90aW9uXCI7XG52YXIgd2FybmluZ1Nob3duID0gZmFsc2U7XG52YXIgYWNrbm93bGVkZ2VSZW1vdGlvbkxpY2Vuc2VNZXNzYWdlID0gKGFja25vd2xlZGdlLCBsb2dMZXZlbCkgPT4ge1xuICBpZiAoYWNrbm93bGVkZ2UpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKHdhcm5pbmdTaG93bikge1xuICAgIHJldHVybjtcbiAgfVxuICB3YXJuaW5nU2hvd24gPSB0cnVlO1xuICBJbnRlcm5hbHMxNC5Mb2cud2Fybih7IGxvZ0xldmVsLCB0YWc6IG51bGwgfSwgXCJOb3RlOiBTb21lIGNvbXBhbmllcyBhcmUgcmVxdWlyZWQgdG8gb2J0YWluIGEgbGljZW5zZSB0byB1c2UgUmVtb3Rpb24uIFNlZTogaHR0cHM6Ly9yZW1vdGlvbi5kZXYvbGljZW5zZVxcblBhc3MgdGhlIGBhY2tub3dsZWRnZVJlbW90aW9uTGljZW5zZWAgcHJvcCB0byBgPFBsYXllciAvPmAgZnVuY3Rpb24gdG8gbWFrZSB0aGlzIG1lc3NhZ2UgZGlzYXBwZWFyLlwiKTtcbn07XG5cbi8vIHNyYy91dGlscy92YWxpZGF0ZS1pbi1vdXQtZnJhbWUudHNcbnZhciB2YWxpZGF0ZVNpbmdsZUZyYW1lID0gKGZyYW1lLCB2YXJpYWJsZU5hbWUpID0+IHtcbiAgaWYgKHR5cGVvZiBmcmFtZSA9PT0gXCJ1bmRlZmluZWRcIiB8fCBmcmFtZSA9PT0gbnVsbCkge1xuICAgIHJldHVybiBmcmFtZSA/PyBudWxsO1xuICB9XG4gIGlmICh0eXBlb2YgZnJhbWUgIT09IFwibnVtYmVyXCIpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBcIiR7dmFyaWFibGVOYW1lfVwiIG11c3QgYmUgYSBudW1iZXIsIGJ1dCBpcyAke0pTT04uc3RyaW5naWZ5KGZyYW1lKX1gKTtcbiAgfVxuICBpZiAoTnVtYmVyLmlzTmFOKGZyYW1lKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYFwiJHt2YXJpYWJsZU5hbWV9XCIgbXVzdCBub3QgYmUgTmFOLCBidXQgaXMgJHtKU09OLnN0cmluZ2lmeShmcmFtZSl9YCk7XG4gIH1cbiAgaWYgKCFOdW1iZXIuaXNGaW5pdGUoZnJhbWUpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgXCIke3ZhcmlhYmxlTmFtZX1cIiBtdXN0IGJlIGZpbml0ZSwgYnV0IGlzICR7SlNPTi5zdHJpbmdpZnkoZnJhbWUpfWApO1xuICB9XG4gIGlmIChmcmFtZSAlIDEgIT09IDApIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBcIiR7dmFyaWFibGVOYW1lfVwiIG11c3QgYmUgYW4gaW50ZWdlciwgYnV0IGlzICR7SlNPTi5zdHJpbmdpZnkoZnJhbWUpfWApO1xuICB9XG4gIHJldHVybiBmcmFtZTtcbn07XG52YXIgdmFsaWRhdGVJbk91dEZyYW1lcyA9ICh7XG4gIGluRnJhbWUsXG4gIGR1cmF0aW9uSW5GcmFtZXMsXG4gIG91dEZyYW1lXG59KSA9PiB7XG4gIGNvbnN0IHZhbGlkYXRlZEluRnJhbWUgPSB2YWxpZGF0ZVNpbmdsZUZyYW1lKGluRnJhbWUsIFwiaW5GcmFtZVwiKTtcbiAgY29uc3QgdmFsaWRhdGVkT3V0RnJhbWUgPSB2YWxpZGF0ZVNpbmdsZUZyYW1lKG91dEZyYW1lLCBcIm91dEZyYW1lXCIpO1xuICBpZiAodmFsaWRhdGVkSW5GcmFtZSA9PT0gbnVsbCAmJiB2YWxpZGF0ZWRPdXRGcmFtZSA9PT0gbnVsbCkge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAodmFsaWRhdGVkSW5GcmFtZSAhPT0gbnVsbCAmJiB2YWxpZGF0ZWRJbkZyYW1lID4gZHVyYXRpb25JbkZyYW1lcyAtIDEpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbkZyYW1lIG11c3QgYmUgbGVzcyB0aGFuIChkdXJhdGlvbkluRnJhbWVzIC0gMSksIGJ1dCBpcyBcIiArIHZhbGlkYXRlZEluRnJhbWUpO1xuICB9XG4gIGlmICh2YWxpZGF0ZWRPdXRGcmFtZSAhPT0gbnVsbCAmJiB2YWxpZGF0ZWRPdXRGcmFtZSA+IGR1cmF0aW9uSW5GcmFtZXMgLSAxKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwib3V0RnJhbWUgbXVzdCBiZSBsZXNzIHRoYW4gKGR1cmF0aW9uSW5GcmFtZXMgLSAxKSwgYnV0IGlzIFwiICsgdmFsaWRhdGVkT3V0RnJhbWUpO1xuICB9XG4gIGlmICh2YWxpZGF0ZWRJbkZyYW1lICE9PSBudWxsICYmIHZhbGlkYXRlZEluRnJhbWUgPCAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiaW5GcmFtZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwLCBidXQgaXMgXCIgKyB2YWxpZGF0ZWRJbkZyYW1lKTtcbiAgfVxuICBpZiAodmFsaWRhdGVkT3V0RnJhbWUgIT09IG51bGwgJiYgdmFsaWRhdGVkT3V0RnJhbWUgPD0gMCkge1xuICAgIHRocm93IG5ldyBFcnJvcihgb3V0RnJhbWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCwgYnV0IGlzICR7dmFsaWRhdGVkT3V0RnJhbWV9LiBJZiB5b3Ugd2FudCB0byByZW5kZXIgYSBzaW5nbGUgZnJhbWUsIHVzZSA8VGh1bWJuYWlsIC8+IGluc3RlYWQuYCk7XG4gIH1cbiAgaWYgKHZhbGlkYXRlZE91dEZyYW1lICE9PSBudWxsICYmIHZhbGlkYXRlZEluRnJhbWUgIT09IG51bGwgJiYgdmFsaWRhdGVkT3V0RnJhbWUgPD0gdmFsaWRhdGVkSW5GcmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIm91dEZyYW1lIG11c3QgYmUgZ3JlYXRlciB0aGFuIGluRnJhbWUsIGJ1dCBpcyBcIiArIHZhbGlkYXRlZE91dEZyYW1lICsgXCIgPD0gXCIgKyB2YWxpZGF0ZWRJbkZyYW1lKTtcbiAgfVxufTtcblxuLy8gc3JjL3V0aWxzL3ZhbGlkYXRlLWluaXRpYWwtZnJhbWUudHNcbnZhciB2YWxpZGF0ZUluaXRpYWxGcmFtZSA9ICh7XG4gIGluaXRpYWxGcmFtZSxcbiAgZHVyYXRpb25JbkZyYW1lc1xufSkgPT4ge1xuICBpZiAodHlwZW9mIGR1cmF0aW9uSW5GcmFtZXMgIT09IFwibnVtYmVyXCIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFxcYGR1cmF0aW9uSW5GcmFtZXNcXGAgbXVzdCBiZSBhIG51bWJlciwgYnV0IGlzICR7SlNPTi5zdHJpbmdpZnkoZHVyYXRpb25JbkZyYW1lcyl9YCk7XG4gIH1cbiAgaWYgKHR5cGVvZiBpbml0aWFsRnJhbWUgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKHR5cGVvZiBpbml0aWFsRnJhbWUgIT09IFwibnVtYmVyXCIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFxcYGluaXRpYWxGcmFtZVxcYCBtdXN0IGJlIGEgbnVtYmVyLCBidXQgaXMgJHtKU09OLnN0cmluZ2lmeShpbml0aWFsRnJhbWUpfWApO1xuICB9XG4gIGlmIChOdW1iZXIuaXNOYU4oaW5pdGlhbEZyYW1lKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgXFxgaW5pdGlhbEZyYW1lXFxgIG11c3QgYmUgYSBudW1iZXIsIGJ1dCBpcyBOYU5gKTtcbiAgfVxuICBpZiAoIU51bWJlci5pc0Zpbml0ZShpbml0aWFsRnJhbWUpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBcXGBpbml0aWFsRnJhbWVcXGAgbXVzdCBiZSBhIG51bWJlciwgYnV0IGlzIEluZmluaXR5YCk7XG4gIH1cbiAgaWYgKGluaXRpYWxGcmFtZSAlIDEgIT09IDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFxcYGluaXRpYWxGcmFtZVxcYCBtdXN0IGJlIGFuIGludGVnZXIsIGJ1dCBpcyAke0pTT04uc3RyaW5naWZ5KGluaXRpYWxGcmFtZSl9YCk7XG4gIH1cbiAgaWYgKGluaXRpYWxGcmFtZSA+IGR1cmF0aW9uSW5GcmFtZXMgLSAxKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBcXGBpbml0aWFsRnJhbWVcXGAgbXVzdCBiZSBsZXNzIG9yIGVxdWFsIHRoYW4gXFxgZHVyYXRpb25JbkZyYW1lcyAtIDFcXGAsIGJ1dCBpcyAke0pTT04uc3RyaW5naWZ5KGluaXRpYWxGcmFtZSl9YCk7XG4gIH1cbn07XG5cbi8vIHNyYy91dGlscy92YWxpZGF0ZS1wbGF5YmFja3JhdGUudHNcbnZhciB2YWxpZGF0ZVBsYXliYWNrUmF0ZSA9IChwbGF5YmFja1JhdGUpID0+IHtcbiAgaWYgKHBsYXliYWNrUmF0ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChwbGF5YmFja1JhdGUgPiA0KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBUaGUgaGlnaGVzdCBwb3NzaWJsZSBwbGF5YmFjayByYXRlIGlzIDQuIFlvdSBwYXNzZWQ6ICR7cGxheWJhY2tSYXRlfWApO1xuICB9XG4gIGlmIChwbGF5YmFja1JhdGUgPCAtNCkge1xuICAgIHRocm93IG5ldyBFcnJvcihgVGhlIGxvd2VzdCBwb3NzaWJsZSBwbGF5YmFjayByYXRlIGlzIC00LiBZb3UgcGFzc2VkOiAke3BsYXliYWNrUmF0ZX1gKTtcbiAgfVxuICBpZiAocGxheWJhY2tSYXRlID09PSAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBBIHBsYXliYWNrIHJhdGUgb2YgMCBpcyBub3Qgc3VwcG9ydGVkLmApO1xuICB9XG59O1xuXG4vLyBzcmMvdmFsaWRhdGUudHNcbmltcG9ydCB7IE5vUmVhY3RJbnRlcm5hbHMgfSBmcm9tIFwicmVtb3Rpb24vbm8tcmVhY3RcIjtcbnZhciB2YWxpZGF0ZUZwcyA9IE5vUmVhY3RJbnRlcm5hbHMudmFsaWRhdGVGcHM7XG52YXIgdmFsaWRhdGVEaW1lbnNpb24gPSBOb1JlYWN0SW50ZXJuYWxzLnZhbGlkYXRlRGltZW5zaW9uO1xudmFyIHZhbGlkYXRlRHVyYXRpb25JbkZyYW1lcyA9IE5vUmVhY3RJbnRlcm5hbHMudmFsaWRhdGVEdXJhdGlvbkluRnJhbWVzO1xudmFyIHZhbGlkYXRlRGVmYXVsdEFuZElucHV0UHJvcHMgPSBOb1JlYWN0SW50ZXJuYWxzLnZhbGlkYXRlRGVmYXVsdEFuZElucHV0UHJvcHM7XG5cbi8vIHNyYy9QbGF5ZXIudHN4XG5pbXBvcnQgeyBqc3ggYXMganN4MTQgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbnZhciBjb21wb25lbnRPck51bGxJZkxhenkgPSAocHJvcHMpID0+IHtcbiAgaWYgKFwiY29tcG9uZW50XCIgaW4gcHJvcHMpIHtcbiAgICByZXR1cm4gcHJvcHMuY29tcG9uZW50O1xuICB9XG4gIHJldHVybiBudWxsO1xufTtcbnZhciBQbGF5ZXJGbiA9ICh7XG4gIGR1cmF0aW9uSW5GcmFtZXMsXG4gIGNvbXBvc2l0aW9uSGVpZ2h0LFxuICBjb21wb3NpdGlvbldpZHRoLFxuICBmcHMsXG4gIGlucHV0UHJvcHMsXG4gIHN0eWxlOiBzdHlsZTIsXG4gIGNvbnRyb2xzID0gZmFsc2UsXG4gIGxvb3AgPSBmYWxzZSxcbiAgYXV0b1BsYXkgPSBmYWxzZSxcbiAgc2hvd1ZvbHVtZUNvbnRyb2xzID0gdHJ1ZSxcbiAgYWxsb3dGdWxsc2NyZWVuID0gdHJ1ZSxcbiAgY2xpY2tUb1BsYXksXG4gIGRvdWJsZUNsaWNrVG9GdWxsc2NyZWVuID0gZmFsc2UsXG4gIHNwYWNlS2V5VG9QbGF5T3JQYXVzZSA9IHRydWUsXG4gIG1vdmVUb0JlZ2lubmluZ1doZW5FbmRlZCA9IHRydWUsXG4gIG51bWJlck9mU2hhcmVkQXVkaW9UYWdzID0gNSxcbiAgZXJyb3JGYWxsYmFjayA9ICgpID0+IFwi4pqg77iPXCIsXG4gIHBsYXliYWNrUmF0ZSA9IDEsXG4gIHJlbmRlckxvYWRpbmcsXG4gIGNsYXNzTmFtZTogY2xhc3NOYW1lMixcbiAgc2hvd1Bvc3RlcldoZW5VbnBsYXllZCxcbiAgc2hvd1Bvc3RlcldoZW5FbmRlZCxcbiAgc2hvd1Bvc3RlcldoZW5QYXVzZWQsXG4gIHNob3dQb3N0ZXJXaGVuQnVmZmVyaW5nLFxuICBzaG93UG9zdGVyV2hlbkJ1ZmZlcmluZ0FuZFBhdXNlZCxcbiAgaW5pdGlhbEZyYW1lLFxuICByZW5kZXJQb3N0ZXIsXG4gIGluRnJhbWUsXG4gIG91dEZyYW1lLFxuICBpbml0aWFsbHlTaG93Q29udHJvbHMsXG4gIHJlbmRlckZ1bGxzY3JlZW5CdXR0b24sXG4gIHJlbmRlclBsYXlQYXVzZUJ1dHRvbixcbiAgcmVuZGVyVm9sdW1lU2xpZGVyLFxuICBhbHdheXNTaG93Q29udHJvbHMgPSBmYWxzZSxcbiAgaW5pdGlhbGx5TXV0ZWQgPSBmYWxzZSxcbiAgc2hvd1BsYXliYWNrUmF0ZUNvbnRyb2wgPSBmYWxzZSxcbiAgcG9zdGVyRmlsbE1vZGUgPSBcInBsYXllci1zaXplXCIsXG4gIGJ1ZmZlclN0YXRlRGVsYXlJbk1pbGxpc2Vjb25kcyxcbiAgaGlkZUNvbnRyb2xzV2hlblBvaW50ZXJEb2VzbnRNb3ZlID0gdHJ1ZSxcbiAgb3ZlcmZsb3dWaXNpYmxlID0gZmFsc2UsXG4gIHJlbmRlck11dGVCdXR0b24sXG4gIGJyb3dzZXJNZWRpYUNvbnRyb2xzQmVoYXZpb3I6IHBhc3NlZEJyb3dzZXJNZWRpYUNvbnRyb2xzQmVoYXZpb3IsXG4gIG92ZXJyaWRlSW50ZXJuYWxDbGFzc05hbWUsXG4gIGxvZ0xldmVsID0gXCJpbmZvXCIsXG4gIG5vU3VzcGVuc2UsXG4gIGFja25vd2xlZGdlUmVtb3Rpb25MaWNlbnNlLFxuICBhdWRpb0xhdGVuY3lIaW50ID0gXCJpbnRlcmFjdGl2ZVwiLFxuICB2b2x1bWVQZXJzaXN0ZW5jZUtleSxcbiAgLi4uY29tcG9uZW50UHJvcHNcbn0sIHJlZikgPT4ge1xuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHdpbmRvdy5yZW1vdGlvbl9pc1BsYXllciA9IHRydWU7XG4gIH1cbiAgaWYgKGNvbXBvbmVudFByb3BzLmRlZmF1bHRQcm9wcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIDxQbGF5ZXIgLz4gY29tcG9uZW50IGRvZXMgbm90IGFjY2VwdCBgZGVmYXVsdFByb3BzYCwgYnV0IHNvbWUgd2VyZSBwYXNzZWQuIFVzZSBgaW5wdXRQcm9wc2AgaW5zdGVhZC5cIik7XG4gIH1cbiAgY29uc3QgY29tcG9uZW50Rm9yVmFsaWRhdGlvbiA9IGNvbXBvbmVudE9yTnVsbElmTGF6eShjb21wb25lbnRQcm9wcyk7XG4gIGlmIChjb21wb25lbnRGb3JWYWxpZGF0aW9uPy50eXBlID09PSBDb21wb3NpdGlvbikge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYCdjb21wb25lbnQnIHNob3VsZCBub3QgYmUgYW4gaW5zdGFuY2Ugb2YgPENvbXBvc2l0aW9uLz4uIFBhc3MgdGhlIFJlYWN0IGNvbXBvbmVudCBkaXJlY3RseSwgYW5kIHNldCB0aGUgZHVyYXRpb24sIGZwcyBhbmQgZGltZW5zaW9ucyBhcyBzZXBhcmF0ZSBwcm9wcy4gU2VlIGh0dHBzOi8vd3d3LnJlbW90aW9uLmRldi9kb2NzL3BsYXllci9leGFtcGxlcyBmb3IgYW4gZXhhbXBsZS5gKTtcbiAgfVxuICBpZiAoY29tcG9uZW50Rm9yVmFsaWRhdGlvbiA9PT0gQ29tcG9zaXRpb24pIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGAnY29tcG9uZW50JyBtdXN0IG5vdCBiZSB0aGUgJ0NvbXBvc2l0aW9uJyBjb21wb25lbnQuIFBhc3MgeW91ciBvd24gUmVhY3QgY29tcG9uZW50IGRpcmVjdGx5LCBhbmQgc2V0IHRoZSBkdXJhdGlvbiwgZnBzIGFuZCBkaW1lbnNpb25zIGFzIHNlcGFyYXRlIHByb3BzLiBTZWUgaHR0cHM6Ly93d3cucmVtb3Rpb24uZGV2L2RvY3MvcGxheWVyL2V4YW1wbGVzIGZvciBhbiBleGFtcGxlLmApO1xuICB9XG4gIHVzZVN0YXRlMTMoKCkgPT4gYWNrbm93bGVkZ2VSZW1vdGlvbkxpY2Vuc2VNZXNzYWdlKEJvb2xlYW4oYWNrbm93bGVkZ2VSZW1vdGlvbkxpY2Vuc2UpLCBsb2dMZXZlbCkpO1xuICBjb25zdCBjb21wb25lbnQgPSBJbnRlcm5hbHMxNS51c2VMYXp5Q29tcG9uZW50KHtcbiAgICBjb21wUHJvcHM6IGNvbXBvbmVudFByb3BzLFxuICAgIGNvbXBvbmVudE5hbWU6IFwiUGxheWVyXCIsXG4gICAgbm9TdXNwZW5zZTogQm9vbGVhbihub1N1c3BlbnNlKVxuICB9KTtcbiAgdmFsaWRhdGVJbml0aWFsRnJhbWUoeyBpbml0aWFsRnJhbWUsIGR1cmF0aW9uSW5GcmFtZXMgfSk7XG4gIGNvbnN0IFtmcmFtZSwgc2V0RnJhbWVdID0gdXNlU3RhdGUxMygoKSA9PiAoe1xuICAgIFtQTEFZRVJfQ09NUF9JRF06IGluaXRpYWxGcmFtZSA/PyAwXG4gIH0pKTtcbiAgY29uc3QgW3BsYXlpbmcsIHNldFBsYXlpbmddID0gdXNlU3RhdGUxMyhmYWxzZSk7XG4gIGNvbnN0IFtyb290SWRdID0gdXNlU3RhdGUxMyhcInBsYXllci1jb21wXCIpO1xuICBjb25zdCByb290UmVmID0gdXNlUmVmMTEobnVsbCk7XG4gIGNvbnN0IGF1ZGlvQW5kVmlkZW9UYWdzID0gdXNlUmVmMTEoW10pO1xuICBjb25zdCBpbXBlcmF0aXZlUGxheWluZyA9IHVzZVJlZjExKGZhbHNlKTtcbiAgY29uc3QgW2N1cnJlbnRQbGF5YmFja1JhdGUsIHNldEN1cnJlbnRQbGF5YmFja1JhdGVdID0gdXNlU3RhdGUxMyhwbGF5YmFja1JhdGUpO1xuICBpZiAodHlwZW9mIGNvbXBvc2l0aW9uSGVpZ2h0ICE9PSBcIm51bWJlclwiKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgJ2NvbXBvc2l0aW9uSGVpZ2h0JyBtdXN0IGJlIGEgbnVtYmVyIGJ1dCBnb3QgJyR7dHlwZW9mIGNvbXBvc2l0aW9uSGVpZ2h0fScgaW5zdGVhZGApO1xuICB9XG4gIGlmICh0eXBlb2YgY29tcG9zaXRpb25XaWR0aCAhPT0gXCJudW1iZXJcIikge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYCdjb21wb3NpdGlvbldpZHRoJyBtdXN0IGJlIGEgbnVtYmVyIGJ1dCBnb3QgJyR7dHlwZW9mIGNvbXBvc2l0aW9uV2lkdGh9JyBpbnN0ZWFkYCk7XG4gIH1cbiAgdmFsaWRhdGVEaW1lbnNpb24oY29tcG9zaXRpb25IZWlnaHQsIFwiY29tcG9zaXRpb25IZWlnaHRcIiwgXCJvZiB0aGUgPFBsYXllciAvPiBjb21wb25lbnRcIik7XG4gIHZhbGlkYXRlRGltZW5zaW9uKGNvbXBvc2l0aW9uV2lkdGgsIFwiY29tcG9zaXRpb25XaWR0aFwiLCBcIm9mIHRoZSA8UGxheWVyIC8+IGNvbXBvbmVudFwiKTtcbiAgdmFsaWRhdGVEdXJhdGlvbkluRnJhbWVzKGR1cmF0aW9uSW5GcmFtZXMsIHtcbiAgICBjb21wb25lbnQ6IFwib2YgdGhlIDxQbGF5ZXIvPiBjb21wb25lbnRcIixcbiAgICBhbGxvd0Zsb2F0czogZmFsc2VcbiAgfSk7XG4gIHZhbGlkYXRlRnBzKGZwcywgXCJhcyBhIHByb3Agb2YgdGhlIDxQbGF5ZXIvPiBjb21wb25lbnRcIiwgZmFsc2UpO1xuICB2YWxpZGF0ZURlZmF1bHRBbmRJbnB1dFByb3BzKGlucHV0UHJvcHMsIFwiaW5wdXRQcm9wc1wiLCBudWxsKTtcbiAgdmFsaWRhdGVJbk91dEZyYW1lcyh7XG4gICAgZHVyYXRpb25JbkZyYW1lcyxcbiAgICBpbkZyYW1lLFxuICAgIG91dEZyYW1lXG4gIH0pO1xuICBpZiAodHlwZW9mIGNvbnRyb2xzICE9PSBcImJvb2xlYW5cIiAmJiB0eXBlb2YgY29udHJvbHMgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGAnY29udHJvbHMnIG11c3QgYmUgYSBib29sZWFuIG9yIHVuZGVmaW5lZCBidXQgZ290ICcke3R5cGVvZiBjb250cm9sc30nIGluc3RlYWRgKTtcbiAgfVxuICBpZiAodHlwZW9mIGF1dG9QbGF5ICE9PSBcImJvb2xlYW5cIiAmJiB0eXBlb2YgYXV0b1BsYXkgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGAnYXV0b1BsYXknIG11c3QgYmUgYSBib29sZWFuIG9yIHVuZGVmaW5lZCBidXQgZ290ICcke3R5cGVvZiBhdXRvUGxheX0nIGluc3RlYWRgKTtcbiAgfVxuICBpZiAodHlwZW9mIGxvb3AgIT09IFwiYm9vbGVhblwiICYmIHR5cGVvZiBsb29wICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgJ2xvb3AnIG11c3QgYmUgYSBib29sZWFuIG9yIHVuZGVmaW5lZCBidXQgZ290ICcke3R5cGVvZiBsb29wfScgaW5zdGVhZGApO1xuICB9XG4gIGlmICh0eXBlb2YgZG91YmxlQ2xpY2tUb0Z1bGxzY3JlZW4gIT09IFwiYm9vbGVhblwiICYmIHR5cGVvZiBkb3VibGVDbGlja1RvRnVsbHNjcmVlbiAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYCdkb3VibGVDbGlja1RvRnVsbHNjcmVlbicgbXVzdCBiZSBhIGJvb2xlYW4gb3IgdW5kZWZpbmVkIGJ1dCBnb3QgJyR7dHlwZW9mIGRvdWJsZUNsaWNrVG9GdWxsc2NyZWVufScgaW5zdGVhZGApO1xuICB9XG4gIGlmICh0eXBlb2Ygc2hvd1ZvbHVtZUNvbnRyb2xzICE9PSBcImJvb2xlYW5cIiAmJiB0eXBlb2Ygc2hvd1ZvbHVtZUNvbnRyb2xzICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgJ3Nob3dWb2x1bWVDb250cm9scycgbXVzdCBiZSBhIGJvb2xlYW4gb3IgdW5kZWZpbmVkIGJ1dCBnb3QgJyR7dHlwZW9mIHNob3dWb2x1bWVDb250cm9sc30nIGluc3RlYWRgKTtcbiAgfVxuICBpZiAodHlwZW9mIGFsbG93RnVsbHNjcmVlbiAhPT0gXCJib29sZWFuXCIgJiYgdHlwZW9mIGFsbG93RnVsbHNjcmVlbiAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYCdhbGxvd0Z1bGxzY3JlZW4nIG11c3QgYmUgYSBib29sZWFuIG9yIHVuZGVmaW5lZCBidXQgZ290ICcke3R5cGVvZiBhbGxvd0Z1bGxzY3JlZW59JyBpbnN0ZWFkYCk7XG4gIH1cbiAgaWYgKHR5cGVvZiBjbGlja1RvUGxheSAhPT0gXCJib29sZWFuXCIgJiYgdHlwZW9mIGNsaWNrVG9QbGF5ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgJ2NsaWNrVG9QbGF5JyBtdXN0IGJlIGEgYm9vbGVhbiBvciB1bmRlZmluZWQgYnV0IGdvdCAnJHt0eXBlb2YgY2xpY2tUb1BsYXl9JyBpbnN0ZWFkYCk7XG4gIH1cbiAgaWYgKHR5cGVvZiBzcGFjZUtleVRvUGxheU9yUGF1c2UgIT09IFwiYm9vbGVhblwiICYmIHR5cGVvZiBzcGFjZUtleVRvUGxheU9yUGF1c2UgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGAnc3BhY2VLZXlUb1BsYXlPclBhdXNlJyBtdXN0IGJlIGEgYm9vbGVhbiBvciB1bmRlZmluZWQgYnV0IGdvdCAnJHt0eXBlb2Ygc3BhY2VLZXlUb1BsYXlPclBhdXNlfScgaW5zdGVhZGApO1xuICB9XG4gIGlmICh0eXBlb2YgbnVtYmVyT2ZTaGFyZWRBdWRpb1RhZ3MgIT09IFwibnVtYmVyXCIgfHwgbnVtYmVyT2ZTaGFyZWRBdWRpb1RhZ3MgJSAxICE9PSAwIHx8ICFOdW1iZXIuaXNGaW5pdGUobnVtYmVyT2ZTaGFyZWRBdWRpb1RhZ3MpIHx8IE51bWJlci5pc05hTihudW1iZXJPZlNoYXJlZEF1ZGlvVGFncykgfHwgbnVtYmVyT2ZTaGFyZWRBdWRpb1RhZ3MgPCAwKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgJ251bWJlck9mU2hhcmVkQXVkaW9UYWdzJyBtdXN0IGJlIGFuIGludGVnZXIgYnV0IGdvdCAnJHtudW1iZXJPZlNoYXJlZEF1ZGlvVGFnc30nIGluc3RlYWRgKTtcbiAgfVxuICB2YWxpZGF0ZVBsYXliYWNrUmF0ZShjdXJyZW50UGxheWJhY2tSYXRlKTtcbiAgdXNlRWZmZWN0MTQoKCkgPT4ge1xuICAgIHNldEN1cnJlbnRQbGF5YmFja1JhdGUocGxheWJhY2tSYXRlKTtcbiAgfSwgW3BsYXliYWNrUmF0ZV0pO1xuICB1c2VJbXBlcmF0aXZlSGFuZGxlMihyZWYsICgpID0+IHJvb3RSZWYuY3VycmVudCwgW10pO1xuICB1c2VTdGF0ZTEzKCgpID0+IHtcbiAgICBJbnRlcm5hbHMxNS5wbGF5YmFja0xvZ2dpbmcoe1xuICAgICAgbG9nTGV2ZWwsXG4gICAgICBtZXNzYWdlOiBgW3BsYXllcl0gTW91bnRpbmcgPFBsYXllcj4uIFVzZXIgYWdlbnQgPSAke3R5cGVvZiBuYXZpZ2F0b3IgPT09IFwidW5kZWZpbmVkXCIgPyBcInNlcnZlclwiIDogbmF2aWdhdG9yLnVzZXJBZ2VudH1gLFxuICAgICAgdGFnOiBcInBsYXllclwiLFxuICAgICAgbW91bnRUaW1lOiBEYXRlLm5vdygpXG4gICAgfSk7XG4gIH0pO1xuICBjb25zdCB0aW1lbGluZUNvbnRleHRWYWx1ZSA9IHVzZU1lbW8xNCgoKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGZyYW1lLFxuICAgICAgcGxheWluZyxcbiAgICAgIHJvb3RJZCxcbiAgICAgIHBsYXliYWNrUmF0ZTogY3VycmVudFBsYXliYWNrUmF0ZSxcbiAgICAgIGltcGVyYXRpdmVQbGF5aW5nLFxuICAgICAgc2V0UGxheWJhY2tSYXRlOiAocmF0ZSkgPT4ge1xuICAgICAgICBzZXRDdXJyZW50UGxheWJhY2tSYXRlKHJhdGUpO1xuICAgICAgfSxcbiAgICAgIGF1ZGlvQW5kVmlkZW9UYWdzXG4gICAgfTtcbiAgfSwgW2ZyYW1lLCBjdXJyZW50UGxheWJhY2tSYXRlLCBwbGF5aW5nLCByb290SWRdKTtcbiAgY29uc3Qgc2V0VGltZWxpbmVDb250ZXh0VmFsdWUgPSB1c2VNZW1vMTQoKCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICBzZXRGcmFtZSxcbiAgICAgIHNldFBsYXlpbmdcbiAgICB9O1xuICB9LCBbc2V0RnJhbWVdKTtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICB1c2VMYXlvdXRFZmZlY3QoKCkgPT4ge1xuICAgICAgSW50ZXJuYWxzMTUuQ1NTVXRpbHMuaW5qZWN0Q1NTKEludGVybmFsczE1LkNTU1V0aWxzLm1ha2VEZWZhdWx0UHJldmlld0NTUyhgLiR7cGxheWVyQ3NzQ2xhc3NuYW1lKG92ZXJyaWRlSW50ZXJuYWxDbGFzc05hbWUpfWAsIFwiI2ZmZlwiKSk7XG4gICAgfSwgW292ZXJyaWRlSW50ZXJuYWxDbGFzc05hbWVdKTtcbiAgfVxuICBjb25zdCBhY3R1YWxJbnB1dFByb3BzID0gdXNlTWVtbzE0KCgpID0+IGlucHV0UHJvcHMgPz8ge30sIFtpbnB1dFByb3BzXSk7XG4gIGNvbnN0IGJyb3dzZXJNZWRpYUNvbnRyb2xzQmVoYXZpb3IgPSB1c2VNZW1vMTQoKCkgPT4ge1xuICAgIHJldHVybiBwYXNzZWRCcm93c2VyTWVkaWFDb250cm9sc0JlaGF2aW9yID8/IHtcbiAgICAgIG1vZGU6IFwicHJldmVudC1tZWRpYS1zZXNzaW9uXCJcbiAgICB9O1xuICB9LCBbcGFzc2VkQnJvd3Nlck1lZGlhQ29udHJvbHNCZWhhdmlvcl0pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDE0KEludGVybmFsczE1LklzUGxheWVyQ29udGV4dFByb3ZpZGVyLCB7XG4gICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gxNChTaGFyZWRQbGF5ZXJDb250ZXh0cywge1xuICAgICAgdGltZWxpbmVDb250ZXh0OiB0aW1lbGluZUNvbnRleHRWYWx1ZSxcbiAgICAgIGNvbXBvbmVudCxcbiAgICAgIGNvbXBvc2l0aW9uSGVpZ2h0LFxuICAgICAgY29tcG9zaXRpb25XaWR0aCxcbiAgICAgIGR1cmF0aW9uSW5GcmFtZXMsXG4gICAgICBmcHMsXG4gICAgICBudW1iZXJPZlNoYXJlZEF1ZGlvVGFncyxcbiAgICAgIGluaXRpYWxseU11dGVkLFxuICAgICAgbG9nTGV2ZWwsXG4gICAgICBhdWRpb0xhdGVuY3lIaW50LFxuICAgICAgdm9sdW1lUGVyc2lzdGVuY2VLZXksXG4gICAgICBpbnB1dFByb3BzOiBhY3R1YWxJbnB1dFByb3BzLFxuICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gxNChJbnRlcm5hbHMxNS5TZXRUaW1lbGluZUNvbnRleHQuUHJvdmlkZXIsIHtcbiAgICAgICAgdmFsdWU6IHNldFRpbWVsaW5lQ29udGV4dFZhbHVlLFxuICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDE0KFBsYXllckVtaXR0ZXJQcm92aWRlciwge1xuICAgICAgICAgIGN1cnJlbnRQbGF5YmFja1JhdGUsXG4gICAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gxNChQbGF5ZXJVSV9kZWZhdWx0LCB7XG4gICAgICAgICAgICByZWY6IHJvb3RSZWYsXG4gICAgICAgICAgICBwb3N0ZXJGaWxsTW9kZSxcbiAgICAgICAgICAgIHJlbmRlckxvYWRpbmcsXG4gICAgICAgICAgICBhdXRvUGxheTogQm9vbGVhbihhdXRvUGxheSksXG4gICAgICAgICAgICBsb29wOiBCb29sZWFuKGxvb3ApLFxuICAgICAgICAgICAgY29udHJvbHM6IEJvb2xlYW4oY29udHJvbHMpLFxuICAgICAgICAgICAgZXJyb3JGYWxsYmFjayxcbiAgICAgICAgICAgIHN0eWxlOiBzdHlsZTIsXG4gICAgICAgICAgICBpbnB1dFByb3BzOiBhY3R1YWxJbnB1dFByb3BzLFxuICAgICAgICAgICAgYWxsb3dGdWxsc2NyZWVuOiBCb29sZWFuKGFsbG93RnVsbHNjcmVlbiksXG4gICAgICAgICAgICBtb3ZlVG9CZWdpbm5pbmdXaGVuRW5kZWQ6IEJvb2xlYW4obW92ZVRvQmVnaW5uaW5nV2hlbkVuZGVkKSxcbiAgICAgICAgICAgIGNsaWNrVG9QbGF5OiB0eXBlb2YgY2xpY2tUb1BsYXkgPT09IFwiYm9vbGVhblwiID8gY2xpY2tUb1BsYXkgOiBCb29sZWFuKGNvbnRyb2xzKSxcbiAgICAgICAgICAgIHNob3dWb2x1bWVDb250cm9sczogQm9vbGVhbihzaG93Vm9sdW1lQ29udHJvbHMpLFxuICAgICAgICAgICAgZG91YmxlQ2xpY2tUb0Z1bGxzY3JlZW46IEJvb2xlYW4oZG91YmxlQ2xpY2tUb0Z1bGxzY3JlZW4pLFxuICAgICAgICAgICAgc3BhY2VLZXlUb1BsYXlPclBhdXNlOiBCb29sZWFuKHNwYWNlS2V5VG9QbGF5T3JQYXVzZSksXG4gICAgICAgICAgICBwbGF5YmFja1JhdGU6IGN1cnJlbnRQbGF5YmFja1JhdGUsXG4gICAgICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZTIgPz8gdW5kZWZpbmVkLFxuICAgICAgICAgICAgc2hvd1Bvc3RlcldoZW5VbnBsYXllZDogQm9vbGVhbihzaG93UG9zdGVyV2hlblVucGxheWVkKSxcbiAgICAgICAgICAgIHNob3dQb3N0ZXJXaGVuRW5kZWQ6IEJvb2xlYW4oc2hvd1Bvc3RlcldoZW5FbmRlZCksXG4gICAgICAgICAgICBzaG93UG9zdGVyV2hlblBhdXNlZDogQm9vbGVhbihzaG93UG9zdGVyV2hlblBhdXNlZCksXG4gICAgICAgICAgICBzaG93UG9zdGVyV2hlbkJ1ZmZlcmluZzogQm9vbGVhbihzaG93UG9zdGVyV2hlbkJ1ZmZlcmluZyksXG4gICAgICAgICAgICBzaG93UG9zdGVyV2hlbkJ1ZmZlcmluZ0FuZFBhdXNlZDogQm9vbGVhbihzaG93UG9zdGVyV2hlbkJ1ZmZlcmluZ0FuZFBhdXNlZCksXG4gICAgICAgICAgICByZW5kZXJQb3N0ZXIsXG4gICAgICAgICAgICBpbkZyYW1lOiBpbkZyYW1lID8/IG51bGwsXG4gICAgICAgICAgICBvdXRGcmFtZTogb3V0RnJhbWUgPz8gbnVsbCxcbiAgICAgICAgICAgIGluaXRpYWxseVNob3dDb250cm9sczogaW5pdGlhbGx5U2hvd0NvbnRyb2xzID8/IHRydWUsXG4gICAgICAgICAgICByZW5kZXJGdWxsc2NyZWVuOiByZW5kZXJGdWxsc2NyZWVuQnV0dG9uID8/IG51bGwsXG4gICAgICAgICAgICByZW5kZXJQbGF5UGF1c2VCdXR0b246IHJlbmRlclBsYXlQYXVzZUJ1dHRvbiA/PyBudWxsLFxuICAgICAgICAgICAgcmVuZGVyTXV0ZUJ1dHRvbjogcmVuZGVyTXV0ZUJ1dHRvbiA/PyBudWxsLFxuICAgICAgICAgICAgcmVuZGVyVm9sdW1lU2xpZGVyOiByZW5kZXJWb2x1bWVTbGlkZXIgPz8gbnVsbCxcbiAgICAgICAgICAgIGFsd2F5c1Nob3dDb250cm9scyxcbiAgICAgICAgICAgIHNob3dQbGF5YmFja1JhdGVDb250cm9sLFxuICAgICAgICAgICAgYnVmZmVyU3RhdGVEZWxheUluTWlsbGlzZWNvbmRzOiBidWZmZXJTdGF0ZURlbGF5SW5NaWxsaXNlY29uZHMgPz8gMzAwLFxuICAgICAgICAgICAgaGlkZUNvbnRyb2xzV2hlblBvaW50ZXJEb2VzbnRNb3ZlLFxuICAgICAgICAgICAgb3ZlcmZsb3dWaXNpYmxlLFxuICAgICAgICAgICAgYnJvd3Nlck1lZGlhQ29udHJvbHNCZWhhdmlvcixcbiAgICAgICAgICAgIG92ZXJyaWRlSW50ZXJuYWxDbGFzc05hbWU6IG92ZXJyaWRlSW50ZXJuYWxDbGFzc05hbWUgPz8gdW5kZWZpbmVkLFxuICAgICAgICAgICAgbm9TdXNwZW5zZTogQm9vbGVhbihub1N1c3BlbnNlKVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH0pXG4gIH0pO1xufTtcbnZhciBmb3J3YXJkID0gZm9yd2FyZFJlZjI7XG52YXIgUGxheWVyID0gZm9yd2FyZChQbGF5ZXJGbik7XG4vLyBzcmMvVGh1bWJuYWlsLnRzeFxuaW1wb3J0IHtcbiAgZm9yd2FyZFJlZiBhcyBmb3J3YXJkUmVmNCxcbiAgdXNlSW1wZXJhdGl2ZUhhbmRsZSBhcyB1c2VJbXBlcmF0aXZlSGFuZGxlNCxcbiAgdXNlTGF5b3V0RWZmZWN0IGFzIHVzZUxheW91dEVmZmVjdDIsXG4gIHVzZU1lbW8gYXMgdXNlTWVtbzE3LFxuICB1c2VSZWYgYXMgdXNlUmVmMTMsXG4gIHVzZVN0YXRlIGFzIHVzZVN0YXRlMTRcbn0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBJbnRlcm5hbHMgYXMgSW50ZXJuYWxzMTcsIHJhbmRvbSBhcyByYW5kb20yIH0gZnJvbSBcInJlbW90aW9uXCI7XG5cbi8vIHNyYy9UaHVtYm5haWxVSS50c3hcbmltcG9ydCBSZWFjdDEzLCB7XG4gIGZvcndhcmRSZWYgYXMgZm9yd2FyZFJlZjMsXG4gIFN1c3BlbnNlIGFzIFN1c3BlbnNlMixcbiAgdXNlQ2FsbGJhY2sgYXMgdXNlQ2FsbGJhY2sxMyxcbiAgdXNlSW1wZXJhdGl2ZUhhbmRsZSBhcyB1c2VJbXBlcmF0aXZlSGFuZGxlMyxcbiAgdXNlTWVtbyBhcyB1c2VNZW1vMTYsXG4gIHVzZVJlZiBhcyB1c2VSZWYxMlxufSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IEludGVybmFscyBhcyBJbnRlcm5hbHMxNiB9IGZyb20gXCJyZW1vdGlvblwiO1xuXG4vLyBzcmMvdXNlLXRodW1ibmFpbC50c1xuaW1wb3J0IHsgdXNlQ29udGV4dCBhcyB1c2VDb250ZXh0NywgdXNlTWVtbyBhcyB1c2VNZW1vMTUgfSBmcm9tIFwicmVhY3RcIjtcbnZhciB1c2VUaHVtYm5haWwgPSAoKSA9PiB7XG4gIGNvbnN0IGVtaXR0ZXIgPSB1c2VDb250ZXh0NyhUaHVtYm5haWxFbWl0dGVyQ29udGV4dCk7XG4gIGlmICghZW1pdHRlcikge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJFeHBlY3RlZCBQbGF5ZXIgZXZlbnQgZW1pdHRlciBjb250ZXh0XCIpO1xuICB9XG4gIGNvbnN0IHJldHVyblZhbHVlID0gdXNlTWVtbzE1KCgpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgZW1pdHRlclxuICAgIH07XG4gIH0sIFtlbWl0dGVyXSk7XG4gIHJldHVybiByZXR1cm5WYWx1ZTtcbn07XG5cbi8vIHNyYy9UaHVtYm5haWxVSS50c3hcbmltcG9ydCB7IGpzeCBhcyBqc3gxNSB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xudmFyIHJlYWN0VmVyc2lvbjIgPSBSZWFjdDEzLnZlcnNpb24uc3BsaXQoXCIuXCIpWzBdO1xuaWYgKHJlYWN0VmVyc2lvbjIgPT09IFwiMFwiKSB7XG4gIHRocm93IG5ldyBFcnJvcihgVmVyc2lvbiAke3JlYWN0VmVyc2lvbjJ9IG9mIFwicmVhY3RcIiBpcyBub3Qgc3VwcG9ydGVkIGJ5IFJlbW90aW9uYCk7XG59XG52YXIgZG9lc1JlYWN0VmVyc2lvblN1cHBvcnRTdXNwZW5zZTIgPSBwYXJzZUludChyZWFjdFZlcnNpb24yLCAxMCkgPj0gMTg7XG52YXIgVGh1bWJuYWlsVUkgPSAoe1xuICBzdHlsZTogc3R5bGUyLFxuICBpbnB1dFByb3BzLFxuICBlcnJvckZhbGxiYWNrLFxuICByZW5kZXJMb2FkaW5nLFxuICBjbGFzc05hbWU6IGNsYXNzTmFtZTIsXG4gIG92ZXJmbG93VmlzaWJsZSxcbiAgbm9TdXNwZW5zZSxcbiAgb3ZlcnJpZGVJbnRlcm5hbENsYXNzTmFtZVxufSwgcmVmKSA9PiB7XG4gIGNvbnN0IGNvbmZpZyA9IEludGVybmFsczE2LnVzZVVuc2FmZVZpZGVvQ29uZmlnKCk7XG4gIGNvbnN0IHZpZGVvID0gSW50ZXJuYWxzMTYudXNlVmlkZW8oKTtcbiAgY29uc3QgY29udGFpbmVyID0gdXNlUmVmMTIobnVsbCk7XG4gIGNvbnN0IGNhbnZhc1NpemUgPSB1c2VFbGVtZW50U2l6ZShjb250YWluZXIsIHtcbiAgICB0cmlnZ2VyT25XaW5kb3dSZXNpemU6IGZhbHNlLFxuICAgIHNob3VsZEFwcGx5Q3NzVHJhbnNmb3JtczogZmFsc2VcbiAgfSk7XG4gIGNvbnN0IGxheW91dCA9IHVzZU1lbW8xNigoKSA9PiB7XG4gICAgaWYgKCFjb25maWcgfHwgIWNhbnZhc1NpemUpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gY2FsY3VsYXRlQ2FudmFzVHJhbnNmb3JtYXRpb24oe1xuICAgICAgY2FudmFzU2l6ZSxcbiAgICAgIGNvbXBvc2l0aW9uSGVpZ2h0OiBjb25maWcuaGVpZ2h0LFxuICAgICAgY29tcG9zaXRpb25XaWR0aDogY29uZmlnLndpZHRoLFxuICAgICAgcHJldmlld1NpemU6IFwiYXV0b1wiXG4gICAgfSk7XG4gIH0sIFtjYW52YXNTaXplLCBjb25maWddKTtcbiAgY29uc3Qgc2NhbGUgPSBsYXlvdXQ/LnNjYWxlID8/IDE7XG4gIGNvbnN0IHRodW1ibmFpbCA9IHVzZVRodW1ibmFpbCgpO1xuICB1c2VCdWZmZXJTdGF0ZUVtaXR0ZXIodGh1bWJuYWlsLmVtaXR0ZXIpO1xuICB1c2VJbXBlcmF0aXZlSGFuZGxlMyhyZWYsICgpID0+IHtcbiAgICBjb25zdCBtZXRob2RzID0ge1xuICAgICAgZ2V0Q29udGFpbmVyTm9kZTogKCkgPT4gY29udGFpbmVyLmN1cnJlbnQsXG4gICAgICBnZXRTY2FsZTogKCkgPT4gc2NhbGVcbiAgICB9O1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKHRodW1ibmFpbC5lbWl0dGVyLCBtZXRob2RzKTtcbiAgfSwgW3NjYWxlLCB0aHVtYm5haWwuZW1pdHRlcl0pO1xuICBjb25zdCBWaWRlb0NvbXBvbmVudCA9IHZpZGVvID8gdmlkZW8uY29tcG9uZW50IDogbnVsbDtcbiAgY29uc3Qgb3V0ZXJTdHlsZSA9IHVzZU1lbW8xNigoKSA9PiB7XG4gICAgcmV0dXJuIGNhbGN1bGF0ZU91dGVyU3R5bGUoe1xuICAgICAgY29uZmlnLFxuICAgICAgc3R5bGU6IHN0eWxlMixcbiAgICAgIGNhbnZhc1NpemUsXG4gICAgICBvdmVyZmxvd1Zpc2libGUsXG4gICAgICBsYXlvdXRcbiAgICB9KTtcbiAgfSwgW2NhbnZhc1NpemUsIGNvbmZpZywgbGF5b3V0LCBvdmVyZmxvd1Zpc2libGUsIHN0eWxlMl0pO1xuICBjb25zdCBvdXRlciA9IHVzZU1lbW8xNigoKSA9PiB7XG4gICAgcmV0dXJuIGNhbGN1bGF0ZU91dGVyKHsgY29uZmlnLCBsYXlvdXQsIHNjYWxlLCBvdmVyZmxvd1Zpc2libGUgfSk7XG4gIH0sIFtjb25maWcsIGxheW91dCwgb3ZlcmZsb3dWaXNpYmxlLCBzY2FsZV0pO1xuICBjb25zdCBjb250YWluZXJTdHlsZTMgPSB1c2VNZW1vMTYoKCkgPT4ge1xuICAgIHJldHVybiBjYWxjdWxhdGVDb250YWluZXJTdHlsZSh7XG4gICAgICBjb25maWcsXG4gICAgICBsYXlvdXQsXG4gICAgICBzY2FsZSxcbiAgICAgIG92ZXJmbG93VmlzaWJsZVxuICAgIH0pO1xuICB9LCBbY29uZmlnLCBsYXlvdXQsIG92ZXJmbG93VmlzaWJsZSwgc2NhbGVdKTtcbiAgY29uc3Qgb25FcnJvciA9IHVzZUNhbGxiYWNrMTMoKGVycm9yKSA9PiB7XG4gICAgdGh1bWJuYWlsLmVtaXR0ZXIuZGlzcGF0Y2hFcnJvcihlcnJvcik7XG4gIH0sIFt0aHVtYm5haWwuZW1pdHRlcl0pO1xuICBjb25zdCBsb2FkaW5nTWFya3VwID0gdXNlTWVtbzE2KCgpID0+IHtcbiAgICByZXR1cm4gcmVuZGVyTG9hZGluZyA/IHJlbmRlckxvYWRpbmcoe1xuICAgICAgaGVpZ2h0OiBvdXRlclN0eWxlLmhlaWdodCxcbiAgICAgIHdpZHRoOiBvdXRlclN0eWxlLndpZHRoLFxuICAgICAgaXNCdWZmZXJpbmc6IGZhbHNlXG4gICAgfSkgOiBudWxsO1xuICB9LCBbb3V0ZXJTdHlsZS5oZWlnaHQsIG91dGVyU3R5bGUud2lkdGgsIHJlbmRlckxvYWRpbmddKTtcbiAgY29uc3QgY3VycmVudFNjYWxlQ29udGV4dCA9IHVzZU1lbW8xNigoKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6IFwic2NhbGVcIixcbiAgICAgIHNjYWxlXG4gICAgfTtcbiAgfSwgW3NjYWxlXSk7XG4gIGlmICghY29uZmlnKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgY29uc3QgY29udGVudCA9IC8qIEBfX1BVUkVfXyAqLyBqc3gxNShcImRpdlwiLCB7XG4gICAgc3R5bGU6IG91dGVyLFxuICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4MTUoXCJkaXZcIiwge1xuICAgICAgc3R5bGU6IGNvbnRhaW5lclN0eWxlMyxcbiAgICAgIGNsYXNzTmFtZTogcGxheWVyQ3NzQ2xhc3NuYW1lKG92ZXJyaWRlSW50ZXJuYWxDbGFzc05hbWUpLFxuICAgICAgY2hpbGRyZW46IFZpZGVvQ29tcG9uZW50ID8gLyogQF9fUFVSRV9fICovIGpzeDE1KEVycm9yQm91bmRhcnksIHtcbiAgICAgICAgb25FcnJvcixcbiAgICAgICAgZXJyb3JGYWxsYmFjayxcbiAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gxNShJbnRlcm5hbHMxNi5DdXJyZW50U2NhbGVDb250ZXh0LlByb3ZpZGVyLCB7XG4gICAgICAgICAgdmFsdWU6IGN1cnJlbnRTY2FsZUNvbnRleHQsXG4gICAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gxNShWaWRlb0NvbXBvbmVudCwge1xuICAgICAgICAgICAgLi4udmlkZW8/LnByb3BzID8/IHt9LFxuICAgICAgICAgICAgLi4uaW5wdXRQcm9wcyA/PyB7fVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9KSA6IG51bGxcbiAgICB9KVxuICB9KTtcbiAgaWYgKG5vU3VzcGVuc2UgfHwgSVNfTk9ERSAmJiAhZG9lc1JlYWN0VmVyc2lvblN1cHBvcnRTdXNwZW5zZTIpIHtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDE1KFwiZGl2XCIsIHtcbiAgICAgIHJlZjogY29udGFpbmVyLFxuICAgICAgc3R5bGU6IG91dGVyU3R5bGUsXG4gICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZTIsXG4gICAgICBjaGlsZHJlbjogY29udGVudFxuICAgIH0pO1xuICB9XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MTUoXCJkaXZcIiwge1xuICAgIHJlZjogY29udGFpbmVyLFxuICAgIHN0eWxlOiBvdXRlclN0eWxlLFxuICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lMixcbiAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDE1KFN1c3BlbnNlMiwge1xuICAgICAgZmFsbGJhY2s6IGxvYWRpbmdNYXJrdXAsXG4gICAgICBjaGlsZHJlbjogY29udGVudFxuICAgIH0pXG4gIH0pO1xufTtcbnZhciBUaHVtYm5haWxVSV9kZWZhdWx0ID0gZm9yd2FyZFJlZjMoVGh1bWJuYWlsVUkpO1xuXG4vLyBzcmMvVGh1bWJuYWlsLnRzeFxuaW1wb3J0IHsganN4IGFzIGpzeDE2IH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG52YXIgVGh1bWJuYWlsRm4gPSAoe1xuICBmcmFtZVRvRGlzcGxheSxcbiAgc3R5bGU6IHN0eWxlMixcbiAgaW5wdXRQcm9wcyxcbiAgY29tcG9zaXRpb25IZWlnaHQsXG4gIGNvbXBvc2l0aW9uV2lkdGgsXG4gIGR1cmF0aW9uSW5GcmFtZXMsXG4gIGZwcyxcbiAgY2xhc3NOYW1lOiBjbGFzc05hbWUyLFxuICBlcnJvckZhbGxiYWNrID0gKCkgPT4gXCLimqDvuI9cIixcbiAgcmVuZGVyTG9hZGluZyxcbiAgb3ZlcmZsb3dWaXNpYmxlID0gZmFsc2UsXG4gIG92ZXJyaWRlSW50ZXJuYWxDbGFzc05hbWUsXG4gIGxvZ0xldmVsID0gXCJpbmZvXCIsXG4gIG5vU3VzcGVuc2UsXG4gIC4uLmNvbXBvbmVudFByb3BzXG59LCByZWYpID0+IHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICB1c2VMYXlvdXRFZmZlY3QyKCgpID0+IHtcbiAgICAgIHdpbmRvdy5yZW1vdGlvbl9pc1BsYXllciA9IHRydWU7XG4gICAgfSwgW10pO1xuICB9XG4gIGNvbnN0IFt0aHVtYm5haWxJZF0gPSB1c2VTdGF0ZTE0KCgpID0+IFN0cmluZyhyYW5kb20yKG51bGwpKSk7XG4gIGNvbnN0IHJvb3RSZWYgPSB1c2VSZWYxMyhudWxsKTtcbiAgY29uc3QgdGltZWxpbmVTdGF0ZSA9IHVzZU1lbW8xNygoKSA9PiB7XG4gICAgY29uc3QgdmFsdWUgPSB7XG4gICAgICBwbGF5aW5nOiBmYWxzZSxcbiAgICAgIGZyYW1lOiB7XG4gICAgICAgIFtQTEFZRVJfQ09NUF9JRF06IGZyYW1lVG9EaXNwbGF5XG4gICAgICB9LFxuICAgICAgcm9vdElkOiB0aHVtYm5haWxJZCxcbiAgICAgIGltcGVyYXRpdmVQbGF5aW5nOiB7XG4gICAgICAgIGN1cnJlbnQ6IGZhbHNlXG4gICAgICB9LFxuICAgICAgcGxheWJhY2tSYXRlOiAxLFxuICAgICAgc2V0UGxheWJhY2tSYXRlOiAoKSA9PiB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcInRodW1ibmFpbFwiKTtcbiAgICAgIH0sXG4gICAgICBhdWRpb0FuZFZpZGVvVGFnczogeyBjdXJyZW50OiBbXSB9XG4gICAgfTtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH0sIFtmcmFtZVRvRGlzcGxheSwgdGh1bWJuYWlsSWRdKTtcbiAgdXNlSW1wZXJhdGl2ZUhhbmRsZTQocmVmLCAoKSA9PiByb290UmVmLmN1cnJlbnQsIFtdKTtcbiAgY29uc3QgQ29tcG9uZW50ID0gSW50ZXJuYWxzMTcudXNlTGF6eUNvbXBvbmVudCh7XG4gICAgY29tcFByb3BzOiBjb21wb25lbnRQcm9wcyxcbiAgICBjb21wb25lbnROYW1lOiBcIlRodW1ibmFpbFwiLFxuICAgIG5vU3VzcGVuc2U6IEJvb2xlYW4obm9TdXNwZW5zZSlcbiAgfSk7XG4gIGNvbnN0IFtlbWl0dGVyXSA9IHVzZVN0YXRlMTQoKCkgPT4gbmV3IFRodW1ibmFpbEVtaXR0ZXIpO1xuICBjb25zdCBwYXNzZWRJbnB1dFByb3BzID0gdXNlTWVtbzE3KCgpID0+IHtcbiAgICByZXR1cm4gaW5wdXRQcm9wcyA/PyB7fTtcbiAgfSwgW2lucHV0UHJvcHNdKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gxNihJbnRlcm5hbHMxNy5Jc1BsYXllckNvbnRleHRQcm92aWRlciwge1xuICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4MTYoU2hhcmVkUGxheWVyQ29udGV4dHMsIHtcbiAgICAgIHRpbWVsaW5lQ29udGV4dDogdGltZWxpbmVTdGF0ZSxcbiAgICAgIGNvbXBvbmVudDogQ29tcG9uZW50LFxuICAgICAgY29tcG9zaXRpb25IZWlnaHQsXG4gICAgICBjb21wb3NpdGlvbldpZHRoLFxuICAgICAgZHVyYXRpb25JbkZyYW1lcyxcbiAgICAgIGZwcyxcbiAgICAgIG51bWJlck9mU2hhcmVkQXVkaW9UYWdzOiAwLFxuICAgICAgaW5pdGlhbGx5TXV0ZWQ6IHRydWUsXG4gICAgICBsb2dMZXZlbCxcbiAgICAgIGF1ZGlvTGF0ZW5jeUhpbnQ6IFwicGxheWJhY2tcIixcbiAgICAgIGlucHV0UHJvcHM6IHBhc3NlZElucHV0UHJvcHMsXG4gICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDE2KFRodW1ibmFpbEVtaXR0ZXJDb250ZXh0LlByb3ZpZGVyLCB7XG4gICAgICAgIHZhbHVlOiBlbWl0dGVyLFxuICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDE2KFRodW1ibmFpbFVJX2RlZmF1bHQsIHtcbiAgICAgICAgICByZWY6IHJvb3RSZWYsXG4gICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWUyLFxuICAgICAgICAgIGVycm9yRmFsbGJhY2ssXG4gICAgICAgICAgaW5wdXRQcm9wczogcGFzc2VkSW5wdXRQcm9wcyxcbiAgICAgICAgICByZW5kZXJMb2FkaW5nLFxuICAgICAgICAgIHN0eWxlOiBzdHlsZTIsXG4gICAgICAgICAgb3ZlcmZsb3dWaXNpYmxlLFxuICAgICAgICAgIG92ZXJyaWRlSW50ZXJuYWxDbGFzc05hbWUsXG4gICAgICAgICAgbm9TdXNwZW5zZTogQm9vbGVhbihub1N1c3BlbnNlKVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9KVxuICB9KTtcbn07XG52YXIgZm9yd2FyZDIgPSBmb3J3YXJkUmVmNDtcbnZhciBUaHVtYm5haWwgPSBmb3J3YXJkMihUaHVtYm5haWxGbik7XG5cbi8vIHNyYy9pbmRleC50c1xudmFyIFBsYXllckludGVybmFscyA9IHtcbiAgUGxheWVyRXZlbnRFbWl0dGVyQ29udGV4dCxcbiAgUGxheWVyRW1pdHRlcixcbiAgdXNlUGxheWVyLFxuICB1c2VQbGF5YmFjayxcbiAgdXNlRWxlbWVudFNpemUsXG4gIGNhbGN1bGF0ZUNhbnZhc1RyYW5zZm9ybWF0aW9uLFxuICB1c2VIb3ZlclN0YXRlLFxuICB1cGRhdGVBbGxFbGVtZW50c1NpemVzLFxuICBQbGF5ZXJFbWl0dGVyUHJvdmlkZXIsXG4gIEJ1ZmZlcmluZ0luZGljYXRvcixcbiAgdXNlRnJhbWVJbXBlcmF0aXZlXG59O1xuZXhwb3J0IHtcbiAgVGh1bWJuYWlsLFxuICBQbGF5ZXJJbnRlcm5hbHMsXG4gIFBsYXllclxufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@remotion/player/dist/esm/index.mjs\n");

/***/ })

};
;