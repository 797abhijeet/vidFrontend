"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[410],{3255:function(e,t,r){r.d(t,{Cb:function(){return continueRender},MX:function(){return random},ND:function(){return useCurrentFrame},fS:function(){return Composition},nk:function(){return ek},sX:function(){return interpolate},wQ:function(){return eP},wT:function(){return delayRender}});var o=r(2265),n=r(7437),i=r(4887),a=r(2601),s=Object.defineProperty,__export=(e,t)=>{for(var r in t)s(e,r,{get:t[r],enumerable:!0,configurable:!0,set:e=>t[r]=()=>e})};if("function"!=typeof o.createContext)throw Error(['Remotion requires React.createContext, but it is "undefined".','If you are in a React Server Component, turn it into a client component by adding "use client" at the top of the file.',"","Before:",'  import {useCurrentFrame} from "remotion";',"","After:",'  "use client";','  import {useCurrentFrame} from "remotion";'].join(`
`));function getNodeEnvString(){return"NODE_ENV"}var getEnvString=()=>"env",getRemotionEnvironment=()=>{let e="undefined"!=typeof window&&window.remotion_isPlayer,t="undefined"!=typeof window&&void 0!==window.process&&void 0!==window.process.env&&("test"===window.process[getEnvString()][getNodeEnvString()]||"production"===window.process[getEnvString()][getNodeEnvString()]&&"undefined"!=typeof window&&void 0!==window.remotion_puppeteerTimeout),r="undefined"!=typeof window&&window.remotion_isStudio,o="undefined"!=typeof window&&window.remotion_isReadOnlyStudio;return{isStudio:r,isRendering:t,isPlayer:e,isReadOnlyStudio:o,isClientSideRendering:!1}},u=o.createElement,l=n.jsx,d=[],enableProxy=e=>new Proxy(e,{apply(e,t,r){if(d.includes(r[0])){let[o,n,...i]=r,a={...n??{},stack:Error().stack};return Reflect.apply(e,t,[o,a,...i])}return Reflect.apply(e,t,r)}}),enableSequenceStackTraces=()=>{getRemotionEnvironment().isStudio&&(o.createElement=enableProxy(u),n.jsx=enableProxy(l))},addSequenceStackTraces=e=>{d.push(e),enableSequenceStackTraces()},m=(0,o.createContext)(!1),useIsPlayer=()=>(0,o.useContext)(m);function truthy(e){return!!e}var c="4.0.387",hasTailwindClassName=({className:e,classPrefix:t,type:r})=>{if(!e)return!1;if("exact"===r){let r=e.split(" ");return t.some(e=>r.some(t=>t.trim()===e||t.trim().endsWith(`:${e}`)||t.trim().endsWith(`!${e}`)))}return t.some(t=>e.startsWith(t)||e.includes(` ${t}`)||e.includes(`!${t}`)||e.includes(`:${t}`))},f=(0,o.forwardRef)((e,t)=>{let{style:r,...i}=e,a=(0,o.useMemo)(()=>({position:"absolute",top:hasTailwindClassName({className:i.className,classPrefix:["top-","inset-"],type:"prefix"})?void 0:0,left:hasTailwindClassName({className:i.className,classPrefix:["left-","inset-"],type:"prefix"})?void 0:0,right:hasTailwindClassName({className:i.className,classPrefix:["right-","inset-"],type:"prefix"})?void 0:0,bottom:hasTailwindClassName({className:i.className,classPrefix:["bottom-","inset-"],type:"prefix"})?void 0:0,width:hasTailwindClassName({className:i.className,classPrefix:["w-"],type:"prefix"})?void 0:"100%",height:hasTailwindClassName({className:i.className,classPrefix:["h-"],type:"prefix"})?void 0:"100%",display:hasTailwindClassName({className:i.className,classPrefix:["block","inline-block","inline","flex","inline-flex","flow-root","grid","inline-grid","contents","list-item","hidden"],type:"exact"})?void 0:"flex",flexDirection:hasTailwindClassName({className:i.className,classPrefix:["flex-row","flex-col","flex-row-reverse","flex-col-reverse"],type:"exact"})?void 0:"column",...r}),[i.className,r]);return(0,n.jsx)("div",{ref:t,style:a,...i})}),p=(0,o.createContext)(null),h=o.createContext({registerSequence:()=>{throw Error("SequenceManagerContext not initialized")},unregisterSequence:()=>{throw Error("SequenceManagerContext not initialized")},sequences:[]}),g=o.createContext({hidden:{},setHidden:()=>{throw Error("SequenceVisibilityToggle not initialized")}}),SequenceManagerProvider=({children:e})=>{let[t,r]=(0,o.useState)([]),[i,a]=(0,o.useState)({}),s=(0,o.useCallback)(e=>{r(t=>[...t,e])},[]),u=(0,o.useCallback)(e=>{r(t=>t.filter(t=>t.id!==e))},[]),l=(0,o.useMemo)(()=>({registerSequence:s,sequences:t,unregisterSequence:u}),[s,t,u]),d=(0,o.useMemo)(()=>({hidden:i,setHidden:a}),[i]);return(0,n.jsx)(h.Provider,{value:l,children:(0,n.jsx)(g.Provider,{value:d,children:e})})};function mulberry32(e){let t=e+1831565813;return t=Math.imul(t^t>>>15,1|t),(((t^=t+Math.imul(t^t>>>7,61|t))^t>>>14)>>>0)/4294967296}function hashCode(e){let t=0,r=0;for(t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t)|0;return r}var random=(e,t)=>{if(void 0!==t)throw TypeError("random() takes only one argument");if(null===e)return Math.random();if("string"==typeof e)return mulberry32(hashCode(e));if("number"==typeof e)return mulberry32(1e10*e);throw Error("random() argument must be a number or a string")},y={};__export(y,{useTimelineSetFrame:()=>useTimelineSetFrame,useTimelinePosition:()=>useTimelinePosition,usePlayingState:()=>usePlayingState,persistCurrentFrame:()=>persistCurrentFrame,getInitialFrameState:()=>getInitialFrameState,getFrameForComposition:()=>getFrameForComposition});var w=o.createContext(null),useRemotionEnvironment=()=>{let e=(0,o.useContext)(w),[t]=(0,o.useState)(()=>getRemotionEnvironment());return e??t},v=(0,o.createContext)({compositions:[],folders:[],currentCompositionMetadata:null,canvasContent:null}),b=(0,o.createContext)({registerComposition:()=>{},unregisterComposition:()=>{},registerFolder:()=>{},unregisterFolder:()=>{},setCanvasContent:()=>{},updateCompositionDefaultProps:()=>{},onlyRenderComposition:null}),C=(0,o.createContext)({props:{},updateProps:()=>{throw Error("Not implemented")},resetUnsaved:()=>{throw Error("Not implemented")}}),E=o.createRef(),x=o.createRef(),EditorPropsProvider=({children:e})=>{let[t,r]=o.useState({}),i=(0,o.useCallback)(({defaultProps:e,id:t,newProps:o})=>{r(r=>({...r,[t]:"function"==typeof o?o(r[t]??e):o}))},[]),a=(0,o.useCallback)(e=>{r(t=>{if(t[e]){let r={...t};return delete r[e],r}return t})},[]);(0,o.useImperativeHandle)(E,()=>({getProps:()=>t,setProps:r}),[t]);let s=(0,o.useMemo)(()=>({props:t,updateProps:i,resetUnsaved:a}),[t,a,i]);return(0,n.jsx)(C.Provider,{value:s,children:e})},getKey=()=>"remotion_inputPropsOverride"+window.location.origin,getInputPropsOverride=()=>{if("undefined"==typeof localStorage)return null;let e=localStorage.getItem(getKey());return e?JSON.parse(e):null},S="remotion-date:",R="remotion-file:",serializeJSONWithSpecialTypes=({data:e,indent:t,staticBase:r})=>{let o=!1,n=!1,i=!1,a=!1;try{let s=JSON.stringify(e,function(e,t){let s=this[e];return s instanceof Date?(o=!0,`${S}${s.toISOString()}`):s instanceof Map?(i=!0,t):s instanceof Set?(a=!0,t):"string"==typeof s&&null!==r&&s.startsWith(r)?(n=!0,`${R}${s.replace(r+"/","")}`):t},t);return{serializedString:s,customDateUsed:o,customFileUsed:n,mapUsed:i,setUsed:a}}catch(e){throw Error("Could not serialize the passed input props to JSON: "+e.message)}},deserializeJSONWithSpecialTypes=e=>JSON.parse(e,(e,t)=>"string"==typeof t&&t.startsWith(S)?new Date(t.replace(S,"")):"string"==typeof t&&t.startsWith(R)?`${window.remotion_staticBase}/${t.replace(R,"")}`:t),serializeThenDeserialize=e=>deserializeJSONWithSpecialTypes(serializeJSONWithSpecialTypes({data:e,indent:2,staticBase:window.remotion_staticBase}).serializedString),serializeThenDeserializeInStudio=e=>getRemotionEnvironment().isStudio?serializeThenDeserialize(e):e,T=!1,warnOnceSSRImport=()=>{T||(T=!0,console.warn("Called `getInputProps()` on the server. This function is not available server-side and has returned an empty object."),console.warn("To hide this warning, don't call this function on the server:"),console.warn("  typeof window === 'undefined' ? {} : getInputProps()"))},getInputProps=()=>{if("undefined"==typeof window)return warnOnceSSRImport(),{};if(getRemotionEnvironment().isPlayer)throw Error("You cannot call `getInputProps()` from a <Player>. Instead, the props are available as React props from component that you passed as `component` prop.");let e=getInputPropsOverride();if(e)return e;if("undefined"==typeof window||void 0===window.remotion_inputProps)throw Error("Cannot call `getInputProps()` - window.remotion_inputProps is not set. This API is only available if you are in the Studio, or while you are rendering server-side.");let t=window.remotion_inputProps;if(!t)return{};let r=deserializeJSONWithSpecialTypes(t);return r},P=(0,o.createContext)({getNonce:()=>0,fastRefreshes:0,manualRefreshes:0}),F=(0,o.createContext)({increaseManualRefreshes:()=>{}}),useNonce=()=>{let e=(0,o.useContext)(P),[t,r]=(0,o.useState)(()=>e.getNonce()),n=(0,o.useRef)(e);return(0,o.useEffect)(()=>{n.current!==e&&(n.current=e,r(e.getNonce))},[e]),t},V=["h264","h265","vp8","vp9","mp3","aac","wav","prores","h264-mkv","h264-ts","gif"];function validateCodec(e,t,r){if(void 0!==e){if("string"!=typeof e)throw TypeError(`The "${r}" prop ${t} must be a string, but you passed a value of type ${typeof e}.`);if(!V.includes(e))throw Error(`The "${r}" prop ${t} must be one of ${V.join(", ")}, but you passed ${e}.`)}}function validateDimension(e,t,r){if("number"!=typeof e)throw Error(`The "${t}" prop ${r} must be a number, but you passed a value of type ${typeof e}`);if(isNaN(e))throw TypeError(`The "${t}" prop ${r} must not be NaN, but is NaN.`);if(!Number.isFinite(e))throw TypeError(`The "${t}" prop ${r} must be finite, but is ${e}.`);if(e%1!=0)throw TypeError(`The "${t}" prop ${r} must be an integer, but is ${e}.`);if(e<=0)throw TypeError(`The "${t}" prop ${r} must be positive, but got ${e}.`)}function validateDurationInFrames(e,t){let{allowFloats:r,component:o}=t;if(void 0===e)throw Error(`The "durationInFrames" prop ${o} is missing.`);if("number"!=typeof e)throw Error(`The "durationInFrames" prop ${o} must be a number, but you passed a value of type ${typeof e}`);if(e<=0)throw TypeError(`The "durationInFrames" prop ${o} must be positive, but got ${e}.`);if(!r&&e%1!=0)throw TypeError(`The "durationInFrames" prop ${o} must be an integer, but got ${e}.`);if(!Number.isFinite(e))throw TypeError(`The "durationInFrames" prop ${o} must be finite, but got ${e}.`)}function validateFps(e,t,r){if("number"!=typeof e)throw Error(`"fps" must be a number, but you passed a value of type ${typeof e} ${t}`);if(!Number.isFinite(e))throw Error(`"fps" must be a finite, but you passed ${e} ${t}`);if(isNaN(e))throw Error(`"fps" must not be NaN, but got ${e} ${t}`);if(e<=0)throw TypeError(`"fps" must be positive, but got ${e} ${t}`);if(r&&e>50)throw TypeError("The FPS for a GIF cannot be higher than 50. Use the --every-nth-frame option to lower the FPS: https://remotion.dev/docs/render-as-gif")}var validateCalculated=({calculated:e,compositionId:t,compositionFps:r,compositionHeight:o,compositionWidth:n,compositionDurationInFrames:i})=>{let a=`calculated by calculateMetadata() for the composition "${t}"`,s=`of the "<Composition />" component with the id "${t}"`,u=e?.width??n??void 0;validateDimension(u,"width",e?.width?a:s);let l=e?.height??o??void 0;validateDimension(l,"height",e?.height?a:s);let d=e?.fps??r??null;validateFps(d,e?.fps?a:s,!1);let m=e?.durationInFrames??i??null;validateDurationInFrames(m,{allowFloats:!1,component:`of the "<Composition />" component with the id "${t}"`});let c=e?.defaultCodec;validateCodec(c,a,"defaultCodec");let f=e?.defaultOutName,p=e?.defaultVideoImageFormat,h=e?.defaultPixelFormat,g=e?.defaultProResProfile;return{width:u,height:l,fps:d,durationInFrames:m,defaultCodec:c,defaultOutName:f,defaultVideoImageFormat:p,defaultPixelFormat:h,defaultProResProfile:g}},resolveVideoConfig=({calculateMetadata:e,signal:t,defaultProps:r,inputProps:o,compositionId:n,compositionDurationInFrames:i,compositionFps:a,compositionHeight:s,compositionWidth:u})=>{let l=e?e({defaultProps:r,props:o,abortSignal:t,compositionId:n,isRendering:getRemotionEnvironment().isRendering}):null;if(null!==l&&"object"==typeof l&&"then"in l)return l.then(e=>{let{height:t,width:l,durationInFrames:d,fps:m,defaultCodec:c,defaultOutName:f,defaultVideoImageFormat:p,defaultPixelFormat:h,defaultProResProfile:g}=validateCalculated({calculated:e,compositionDurationInFrames:i,compositionFps:a,compositionHeight:s,compositionWidth:u,compositionId:n});return{width:l,height:t,fps:m,durationInFrames:d,id:n,defaultProps:serializeThenDeserializeInStudio(r),props:serializeThenDeserializeInStudio(e.props??o),defaultCodec:c??null,defaultOutName:f??null,defaultVideoImageFormat:p??null,defaultPixelFormat:h??null,defaultProResProfile:g??null}});let d=validateCalculated({calculated:l,compositionDurationInFrames:i,compositionFps:a,compositionHeight:s,compositionWidth:u,compositionId:n});return null===l?{...d,id:n,defaultProps:serializeThenDeserializeInStudio(r??{}),props:serializeThenDeserializeInStudio(o),defaultCodec:null,defaultOutName:null,defaultVideoImageFormat:null,defaultPixelFormat:null,defaultProResProfile:null}:{...d,id:n,defaultProps:serializeThenDeserializeInStudio(r??{}),props:serializeThenDeserializeInStudio(l.props??o),defaultCodec:l.defaultCodec??null,defaultOutName:l.defaultOutName??null,defaultVideoImageFormat:l.defaultVideoImageFormat??null,defaultPixelFormat:l.defaultPixelFormat??null,defaultProResProfile:l.defaultProResProfile??null}},resolveVideoConfigOrCatch=e=>{try{let t=resolveVideoConfig(e);return{type:"success",result:t}}catch(e){return{type:"error",error:e}}},I=(0,o.createContext)(null),k=(0,o.createRef)(),needsResolution=e=>!!e.calculateMetadata,M="remotion.propsUpdatedExternally",useResolvedVideoConfig=e=>{let t=(0,o.useContext)(I),{props:r}=(0,o.useContext)(C),{compositions:n,canvasContent:i,currentCompositionMetadata:a}=(0,o.useContext)(v),s=i?.type==="composition"?i.compositionId:null,u=e??s,l=n.find(e=>e.id===u),d=(0,o.useMemo)(()=>l?r[l.id]??{}:{},[r,l]),m=useRemotionEnvironment();return(0,o.useMemo)(()=>l?a?{type:"success",result:{...a,id:l.id,defaultProps:l.defaultProps??{}}}:needsResolution(l)?t&&t[l.id]?t[l.id]:null:(validateDurationInFrames(l.durationInFrames,{allowFloats:!1,component:`in <Composition id="${l.id}">`}),validateFps(l.fps,`in <Composition id="${l.id}">`,!1),validateDimension(l.width,"width",`in <Composition id="${l.id}">`),validateDimension(l.height,"height",`in <Composition id="${l.id}">`),{type:"success",result:{width:l.width,height:l.height,fps:l.fps,id:l.id,durationInFrames:l.durationInFrames,defaultProps:l.defaultProps??{},props:{...l.defaultProps??{},...d??{},..."undefined"==typeof window||m.isPlayer||!window.remotion_inputProps?{}:getInputProps()??{}},defaultCodec:null,defaultOutName:null,defaultVideoImageFormat:null,defaultPixelFormat:null,defaultProResProfile:null}}):null,[l,t,a,d,m.isPlayer])},useVideo=()=>{let{canvasContent:e,compositions:t,currentCompositionMetadata:r}=(0,o.useContext)(v),n=t.find(t=>e?.type==="composition"&&t.id===e.compositionId),i=useResolvedVideoConfig(n?.id??null);return(0,o.useMemo)(()=>i&&"error"!==i.type&&"loading"!==i.type&&n?{...i.result,defaultProps:n.defaultProps??{},id:n.id,...r??{},component:n.component}:null,[r,i,n])},makeKey=()=>"remotion.time-all",persistCurrentFrame=e=>{localStorage.setItem(makeKey(),JSON.stringify(e))},getInitialFrameState=()=>{let e=localStorage.getItem(makeKey())??"{}",t=JSON.parse(e);return t},getFrameForComposition=e=>{let t=localStorage.getItem(makeKey())??"{}",r=JSON.parse(t);return void 0!==r[e]?Number(r[e]):"undefined"==typeof window?0:window.remotion_initialFrame??0},useTimelinePosition=()=>{let e=useVideo(),t=(0,o.useContext)(_),r=useRemotionEnvironment();if(!e)return"undefined"==typeof window?0:window.remotion_initialFrame??0;let n=t.frame[e.id]??(r.isPlayer?0:getFrameForComposition(e.id));return Math.min(e.durationInFrames-1,n)},useTimelineSetFrame=()=>{let{setFrame:e}=(0,o.useContext)(D);return e},usePlayingState=()=>{let{playing:e,imperativePlaying:t}=(0,o.useContext)(_),{setPlaying:r}=(0,o.useContext)(D);return(0,o.useMemo)(()=>[e,r,t],[t,e,r])},isErrorLike=e=>e instanceof Error||null!==e&&"object"==typeof e&&"stack"in e&&"string"==typeof e.stack&&"message"in e&&"string"==typeof e.message;function cancelRenderInternal(e,t){let r;throw isErrorLike(t)?(r=t).stack||(r.stack=Error(r.message).stack):r="string"==typeof t?Error(t):Error("Rendering was cancelled"),e&&(e.remotion_cancelledError=r.stack),r}function cancelRender(e){return cancelRenderInternal("undefined"!=typeof window?window:void 0,e)}var A=["trace","verbose","info","warn","error"],getNumberForLogLevel=e=>A.indexOf(e),isEqualOrBelowLogLevel=(e,t)=>getNumberForLogLevel(e)<=getNumberForLogLevel(t),transformArgs=({args:e,logLevel:t,tag:r})=>{let o=[...e];return getRemotionEnvironment().isRendering&&!getRemotionEnvironment().isClientSideRendering&&o.unshift(Symbol.for(`__remotion_level_${t}`)),r&&getRemotionEnvironment().isRendering&&!getRemotionEnvironment().isClientSideRendering&&o.unshift(Symbol.for(`__remotion_tag_${r}`)),o},$={trace:(e,...t)=>{if(isEqualOrBelowLogLevel(e.logLevel,"trace"))return console.debug(...transformArgs({args:t,logLevel:"trace",tag:e.tag}))},verbose:(e,...t)=>{if(isEqualOrBelowLogLevel(e.logLevel,"verbose"))return console.debug(...transformArgs({args:t,logLevel:"verbose",tag:e.tag}))},info:(e,...t)=>{if(isEqualOrBelowLogLevel(e.logLevel,"info"))return console.log(...transformArgs({args:t,logLevel:"info",tag:e.tag}))},warn:(e,...t)=>{if(isEqualOrBelowLogLevel(e.logLevel,"warn"))return console.warn(...transformArgs({args:t,logLevel:"warn",tag:e.tag}))},error:(e,...t)=>console.error(...transformArgs({args:t,logLevel:"error",tag:e.tag}))},N=[];"undefined"==typeof window||(window.remotion_renderReady=!1,window.remotion_delayRenderTimeouts||(window.remotion_delayRenderTimeouts={}));var delayRenderInternal=({scope:e,environment:t,label:r,options:o})=>{if("string"!=typeof r&&null!==r)throw Error("The label parameter of delayRender() must be a string or undefined, got: "+JSON.stringify(r));let n=Math.random();N.push(n);let i=Error().stack?.replace(/^Error/g,"")??"";if(t.isRendering){let t=(o?.timeoutInMilliseconds??(void 0===e?3e4:e.remotion_puppeteerTimeout??3e4))-2e3;if(void 0!==e){let a=(o?.retries??0)-(e.remotion_attempt-1);e.remotion_delayRenderTimeouts[n]={label:r??null,startTime:Date.now(),timeout:setTimeout(()=>{let o=["A delayRender()",r?`"${r}"`:null,`was called but not cleared after ${t}ms. See https://remotion.dev/docs/timeout for help.`,a>0?"Retries left: "+a:null,a>0?"- Rendering the frame will be retried.":null,"The delayRender was called:",i].filter(truthy).join(" ");cancelRenderInternal(e,Error(o))},t)}}}return void 0!==e&&(e.remotion_renderReady=!1),n},delayRender=(e,t)=>delayRenderInternal({scope:"undefined"!=typeof window?window:void 0,environment:getRemotionEnvironment(),label:e??null,options:t??{}}),continueRenderInternal=({scope:e,handle:t,environment:r,logLevel:o})=>{if(void 0===t)throw TypeError("The continueRender() method must be called with a parameter that is the return value of delayRender(). No value was passed.");if("number"!=typeof t)throw TypeError("The parameter passed into continueRender() must be the return value of delayRender() which is a number. Got: "+JSON.stringify(t));0===(N=N.filter(n=>{if(n===t){if(r.isRendering&&void 0!==e){if(!e.remotion_delayRenderTimeouts[t])return!1;let{label:r,startTime:n,timeout:i}=e.remotion_delayRenderTimeouts[t];clearTimeout(i);let a=[r?`"${r}"`:"A handle","handle was cleared after",`${Date.now()-n}ms`].filter(truthy).join(" ");$.verbose({logLevel:o,tag:"delayRender()"},a),delete e.remotion_delayRenderTimeouts[t]}return!1}return!0})).length&&void 0!==e&&(e.remotion_renderReady=!0)},continueRender=e=>{continueRenderInternal({scope:"undefined"!=typeof window?window:void 0,handle:e,environment:getRemotionEnvironment(),logLevel:"undefined"!=typeof window?window.remotion_logLevel??"info":"info"})},L=(0,o.createContext)({logLevel:"info",mountTime:0}),useLogLevel=()=>{let{logLevel:e}=o.useContext(L);if(null===e)throw Error("useLogLevel must be used within a LogLevelProvider");return e},useMountTime=()=>{let{mountTime:e}=o.useContext(L);if(null===e)throw Error("useMountTime must be used within a LogLevelProvider");return e},j=(0,o.createContext)(null),useDelayRender=()=>{let e=useRemotionEnvironment(),t=(0,o.useContext)(j),r=useLogLevel(),n=(0,o.useCallback)((r,o)=>delayRenderInternal({scope:t??("undefined"!=typeof window?window:void 0),environment:e,label:r??null,options:o??{}}),[e,t]),i=(0,o.useCallback)(o=>{continueRenderInternal({scope:t??("undefined"!=typeof window?window:void 0),handle:o,environment:e,logLevel:r})},[e,r,t]),a=(0,o.useCallback)(e=>cancelRenderInternal(t??("undefined"!=typeof window?window:void 0),e),[t]);return{delayRender:n,continueRender:i,cancelRender:a}},D=(0,o.createContext)({setFrame:()=>{throw Error("default")},setPlaying:()=>{throw Error("default")}}),_=(0,o.createContext)({frame:{},playing:!1,playbackRate:1,rootId:"",imperativePlaying:{current:!1},setPlaybackRate:()=>{throw Error("default")},audioAndVideoTags:{current:[]}}),TimelineContextProvider=({children:e,frameState:t})=>{let[r,i]=(0,o.useState)(!1),a=(0,o.useRef)(!1),[s,u]=(0,o.useState)(1),l=(0,o.useRef)([]),[d]=(0,o.useState)(()=>String(random(null))),[m,c]=(0,o.useState)(()=>getInitialFrameState()),f=t??m,{delayRender:p,continueRender:h}=useDelayRender();"undefined"!=typeof window&&(0,o.useLayoutEffect)(()=>{window.remotion_setFrame=(e,t,r)=>{window.remotion_attempt=r;let o=p(`Setting the current frame to ${e}`),n=!0;c(r=>{let o=r[t]??window.remotion_initialFrame;return o===e?(n=!1,r):{...r,[t]:e}}),n?requestAnimationFrame(()=>h(o)):h(o)},window.remotion_isPlayer=!1},[h,p]);let g=(0,o.useMemo)(()=>({frame:f,playing:r,imperativePlaying:a,rootId:d,playbackRate:s,setPlaybackRate:u,audioAndVideoTags:l}),[f,s,r,d]),y=(0,o.useMemo)(()=>({setFrame:c,setPlaying:i}),[]);return(0,n.jsx)(_.Provider,{value:g,children:(0,n.jsx)(D.Provider,{value:y,children:e})})},O=(0,o.createContext)(!1),CanUseRemotionHooksProvider=({children:e})=>(0,n.jsx)(O.Provider,{value:!0,children:e}),useUnsafeVideoConfig=()=>{let e=(0,o.useContext)(p),t=e?.width??null,r=e?.height??null,n=e?.durationInFrames??null,i=useVideo();return(0,o.useMemo)(()=>{if(!i)return null;let{id:e,durationInFrames:o,fps:a,height:s,width:u,defaultProps:l,props:d,defaultCodec:m,defaultOutName:c,defaultVideoImageFormat:f,defaultPixelFormat:p,defaultProResProfile:h}=i;return{id:e,width:t??u,height:r??s,fps:a,durationInFrames:n??o,defaultProps:l,props:d,defaultCodec:m,defaultOutName:c,defaultVideoImageFormat:f,defaultPixelFormat:p,defaultProResProfile:h}},[n,r,t,i])},useVideoConfig=()=>{let e=useUnsafeVideoConfig(),t=(0,o.useContext)(O),r=useIsPlayer();if(!e){if("undefined"!=typeof window&&window.remotion_isPlayer||r)throw Error("No video config found. Likely reasons:-- You are probably calling useVideoConfig() from outside the component passed to <Player />. See https://www.remotion.dev/docs/player/examples for how to set up the Player correctly.-- You have multiple versions of Remotion installed which causes the React context to get lost.");throw Error("No video config found. You are probably calling useVideoConfig() from a component which has not been registered as a <Composition />. See https://www.remotion.dev/docs/the-fundamentals#defining-compositions for more information.")}if(!t)throw Error("Called useVideoConfig() outside a Remotion composition.");return e},useCurrentFrame=()=>{let e=(0,o.useContext)(O),t=useRemotionEnvironment();if(!e){if(t.isPlayer)throw Error("useCurrentFrame can only be called inside a component that was passed to <Player>. See: https://www.remotion.dev/docs/player/examples");throw Error("useCurrentFrame() can only be called inside a component that was registered as a composition. See https://www.remotion.dev/docs/the-fundamentals#defining-compositions")}let r=useTimelinePosition(),n=(0,o.useContext)(p),i=n?n.cumulatedFrom+n.relativeFrom:0;return r-i},Freeze=({frame:e,children:t,active:r=!0})=>{let i=useCurrentFrame(),a=useVideoConfig();if(void 0===e)throw Error("The <Freeze /> component requires a 'frame' prop, but none was passed.");if("number"!=typeof e)throw Error(`The 'frame' prop of <Freeze /> must be a number, but is of type ${typeof e}`);if(Number.isNaN(e))throw Error("The 'frame' prop of <Freeze /> must be a real number, but it is NaN.");if(!Number.isFinite(e))throw Error(`The 'frame' prop of <Freeze /> must be a finite number, but it is ${e}.`);let s=(0,o.useMemo)(()=>"boolean"==typeof r?r:"function"==typeof r?r(i):void 0,[r,i]),u=(0,o.useContext)(_),l=(0,o.useContext)(p),d=l?.relativeFrom??0,m=(0,o.useMemo)(()=>s?{...u,playing:!1,imperativePlaying:{current:!1},frame:{[a.id]:e+d}}:u,[s,u,a.id,e,d]),c=(0,o.useMemo)(()=>l?s?{...l,cumulatedFrom:0}:l:null,[l,s]);return(0,n.jsx)(_.Provider,{value:m,children:(0,n.jsx)(p.Provider,{value:c,children:t})})},B=(0,o.forwardRef)(({from:e=0,durationInFrames:t=1/0,children:r,name:i,height:a,width:s,showInTimeline:u=!0,_remotionInternalLoopDisplay:l,_remotionInternalStack:d,_remotionInternalPremountDisplay:m,_remotionInternalPostmountDisplay:c,...y},w)=>{let{layout:v="absolute-fill"}=y,[b]=(0,o.useState)(()=>String(Math.random())),C=(0,o.useContext)(p),{rootId:E}=(0,o.useContext)(_),x=C?C.cumulatedFrom+C.relativeFrom:0,S=useNonce();if("absolute-fill"!==v&&"none"!==v)throw TypeError(`The layout prop of <Sequence /> expects either "absolute-fill" or "none", but you passed: ${v}`);if("none"===v&&void 0!==y.style)throw TypeError('If layout="none", you may not pass a style.');if("number"!=typeof t)throw TypeError(`You passed to durationInFrames an argument of type ${typeof t}, but it must be a number.`);if(t<=0)throw TypeError(`durationInFrames must be positive, but got ${t}`);if("number"!=typeof e)throw TypeError(`You passed to the "from" props of your <Sequence> an argument of type ${typeof e}, but it must be a number.`);if(!Number.isFinite(e))throw TypeError(`The "from" prop of a sequence must be finite, but got ${e}.`);let R=useTimelinePosition(),T=useVideoConfig(),P=C?Math.min(C.durationInFrames-e,t):t,F=Math.max(0,Math.min(T.durationInFrames-e,P)),{registerSequence:V,unregisterSequence:I}=(0,o.useContext)(h),{hidden:k}=(0,o.useContext)(g),M=(0,o.useMemo)(()=>C?.premounting||!!y._remotionInternalIsPremounting,[y._remotionInternalIsPremounting,C?.premounting]),A=(0,o.useMemo)(()=>C?.postmounting||!!y._remotionInternalIsPostmounting,[y._remotionInternalIsPostmounting,C?.postmounting]),$=(0,o.useMemo)(()=>({cumulatedFrom:x,relativeFrom:e,durationInFrames:F,parentFrom:C?.relativeFrom??0,id:b,height:a??C?.height??null,width:s??C?.width??null,premounting:M,postmounting:A,premountDisplay:m??null,postmountDisplay:c??null}),[x,e,F,C,b,a,s,M,A,m,c]),N=(0,o.useMemo)(()=>i??"",[i]),L=useRemotionEnvironment();(0,o.useEffect)(()=>{if(L.isStudio)return V({from:e,duration:F,id:b,displayName:N,parent:C?.id??null,type:"sequence",rootId:E,showInTimeline:u,nonce:S,loopDisplay:l,stack:d??null,premountDisplay:m??null,postmountDisplay:c??null}),()=>{I(b)}},[t,b,i,V,N,I,C?.id,F,E,e,u,S,l,d,m,c,L.isStudio]);let j=Math.ceil(x+e+t-1),D=R<x+e?null:R>j?null:r,O="none"===y.layout?void 0:y.style,B=(0,o.useMemo)(()=>({flexDirection:void 0,...s?{width:s}:{},...a?{height:a}:{},...O??{}}),[a,O,s]);if(null!==w&&"none"===v)throw TypeError('It is not supported to pass both a `ref` and `layout="none"` to <Sequence />.');let U=k[b]??!1;return U?null:(0,n.jsx)(p.Provider,{value:$,children:null===D?null:"none"===y.layout?D:(0,n.jsx)(f,{ref:w,style:B,className:y.className,children:D})})}),U=(0,o.forwardRef)((e,t)=>{let r=useCurrentFrame();if("none"===e.layout)throw Error('`<Sequence>` with `premountFor` and `postmountFor` props does not support layout="none"');let{style:i,from:a=0,durationInFrames:s=1/0,premountFor:u=0,postmountFor:l=0,styleWhilePremounted:d,styleWhilePostmounted:m,...c}=e,f=Math.ceil(a+s-1),p=r<a&&r>=a-u,h=r>f&&r<=f+l,g=p?a:h?a+s-1:0,y=p||h,w=(0,o.useMemo)(()=>({...i,opacity:p||h?0:1,pointerEvents:p||h?"none":i?.pointerEvents??void 0,...p?d:{},...h?m:{}}),[i,p,h,d,m]);return(0,n.jsx)(Freeze,{frame:g,active:y,children:(0,n.jsx)(H,{ref:t,from:a,durationInFrames:s,style:w,_remotionInternalPremountDisplay:u,_remotionInternalPostmountDisplay:l,_remotionInternalIsPremounting:p,_remotionInternalIsPostmounting:h,...c})})}),H=(0,o.forwardRef)((e,t)=>{let r=useRemotionEnvironment();return"none"!==e.layout&&!r.isRendering&&(e.premountFor||e.postmountFor)?(0,n.jsx)(U,{...e,ref:t}):(0,n.jsx)(B,{...e,ref:t})}),calcArgs=(e,t,r)=>{switch(e){case"fill":return[0,0,t.width,t.height,0,0,r.width,r.height];case"contain":{let e=Math.min(r.width/t.width,r.height/t.height),o=(r.width-t.width*e)/2,n=(r.height-t.height*e)/2;return[0,0,t.width,t.height,o,n,t.width*e,t.height*e]}case"cover":{let e=Math.max(r.width/t.width,r.height/t.height),o=(r.width-t.width*e)/2,n=(r.height-t.height*e)/2;return[0,0,t.width,t.height,o,n,t.width*e,t.height*e]}default:throw Error("Unknown fit: "+e)}},q=o.forwardRef(({width:e,height:t,fit:r,className:i,style:a},s)=>{let u=(0,o.useRef)(null),l=(0,o.useCallback)(o=>{let n=u.current,i=e??o.displayWidth,a=t??o.displayHeight;if(!n)throw Error("Canvas ref is not set");let s=u.current?.getContext("2d");if(!s)throw Error("Could not get 2d context");n.width=i,n.height=a,s.drawImage(o,...calcArgs(r,{height:o.displayHeight,width:o.displayWidth},{width:i,height:a}))},[r,t,e]);return(0,o.useImperativeHandle)(s,()=>({draw:l,getCanvas:()=>{if(!u.current)throw Error("Canvas ref is not set");return u.current},clear:()=>{let e=u.current?.getContext("2d");if(!e)throw Error("Could not get 2d context");e.clearRect(0,0,u.current.width,u.current.height)}}),[l]),(0,n.jsx)("canvas",{ref:u,className:i,style:a})}),getActualTime=({loopBehavior:e,durationFound:t,timeInSec:r})=>"loop"===e?t?r%t:r:Math.min(r,t||1/0),decodeImage=async({resolvedSrc:e,signal:t,currentTime:r,initialLoopBehavior:o})=>{if("undefined"==typeof ImageDecoder)throw Error("Your browser does not support the WebCodecs ImageDecoder API.");let n=await fetch(e,{signal:t}),{body:i}=n;if(!i)throw Error("Got no body");let a=new ImageDecoder({data:i,type:n.headers.get("Content-Type")||"image/gif"});await a.completed;let{selectedTrack:s}=a.tracks;if(!s)throw Error("No selected track");let u=[],l=null,getFrameByIndex=async e=>{let t=u.find(t=>t.frameIndex===e);if(t&&t.frame)return t;let r=await a.decode({frameIndex:e,completeFramesOnly:!0});return t?t.frame=r.image:u.push({frame:r.image,frameIndex:e,timeInSeconds:r.image.timestamp/1e6}),{frame:r.image,frameIndex:e,timeInSeconds:r.image.timestamp/1e6}},clearCache=e=>{let t=u.filter(e=>e.frame),r=t.sort((t,r)=>{let o=Math.abs(t.timeInSeconds-e),n=Math.abs(r.timeInSeconds-e);return o-n});for(let e=0;e<r.length;e++){if(e<5)continue;let t=r[e];t.frame=null}},ensureFrameBeforeAndAfter=async({timeInSec:e,loopBehavior:t})=>{let r=getActualTime({durationFound:l,loopBehavior:t,timeInSec:e}),o=u.filter(e=>e.timeInSeconds<=r),n=o.map(e=>e.frameIndex).reduce((e,t)=>Math.max(e,t),0),i=n;for(;;){let e=await getFrameByIndex(i);if(i++,!e.frame)throw Error("No frame found");if(!e.frame.duration)break;if(i===s.frameCount&&null===l){let t=(e.frame.timestamp+e.frame.duration)/1e6;l=t}if(e.timeInSeconds>r||i===s.frameCount)break}s.frameCount-n<3&&"loop"===t&&await getFrameByIndex(0),clearCache(r)};await ensureFrameBeforeAndAfter({timeInSec:r,loopBehavior:o}),await ensureFrameBeforeAndAfter({timeInSec:r,loopBehavior:o});let getFrame=async(e,t)=>{if(null!==l&&e>l&&"clear-after-finish"===t)return null;let r=getActualTime({loopBehavior:t,durationFound:l,timeInSec:e});await ensureFrameBeforeAndAfter({timeInSec:r,loopBehavior:t});let o=u.filter(e=>e.frame),n=o.reduce((e,t)=>{let o=Math.abs(e.timeInSeconds-r),n=Math.abs(t.timeInSeconds-r);return o<n?e:t});if(!n.frame)throw Error("No frame found");return n};return{getFrame,frameCount:s.frameCount}},resolveAnimatedImageSource=e=>"undefined"==typeof window?e:new URL(e,window.origin).href;(0,o.forwardRef)(({src:e,width:t,height:r,onError:i,loopBehavior:a="loop",playbackRate:s=1,fit:u="fill",...l},d)=>{let m=(0,o.useRef)({isMounted:!0});(0,o.useEffect)(()=>{let{current:e}=m;return e.isMounted=!0,()=>{e.isMounted=!1}},[]);let c=resolveAnimatedImageSource(e),[f,p]=(0,o.useState)(null),{delayRender:h,continueRender:g}=useDelayRender(),[y]=(0,o.useState)(()=>h(`Rendering <AnimatedImage/> with src="${c}"`)),w=useCurrentFrame(),{fps:v}=useVideoConfig(),b=w/s/v,C=(0,o.useRef)(b);C.current=b;let E=(0,o.useRef)(null);(0,o.useImperativeHandle)(d,()=>{let e=E.current?.getCanvas();if(!e)throw Error("Canvas ref is not set");return e},[]);let[x]=(0,o.useState)(()=>a);return(0,o.useEffect)(()=>{let e=new AbortController;return decodeImage({resolvedSrc:c,signal:e.signal,currentTime:C.current,initialLoopBehavior:x}).then(e=>{p(e),g(y)}).catch(e=>{if("AbortError"===e.name){g(y);return}i?(i?.(e),g(y)):cancelRender(e)}),()=>{e.abort()}},[c,y,i,x,g]),(0,o.useLayoutEffect)(()=>{if(!f)return;let t=h(`Rendering frame at ${b} of <AnimatedImage src="${e}"/>`);f.getFrame(b,a).then(e=>{m.current.isMounted&&(null===e?E.current?.clear():E.current?.draw(e.frame)),g(t)}).catch(e=>{i?(i(e),g(t)):cancelRender(e)})},[b,f,a,i,e,g,h]),(0,n.jsx)(q,{ref:E,width:t,height:r,fit:u,...l})});var validateArtifactFilename=e=>{if("string"!=typeof e)throw TypeError(`The "filename" must be a string, but you passed a value of type ${typeof e}`);if(""===e.trim())throw Error("The `filename` must not be empty");if(!e.match(/^([0-9a-zA-Z-!_.*'()/:&$@=;+,?]+)/g))throw Error('The `filename` must match "/^([0-9a-zA-Z-!_.*\'()/:&$@=;+,?]+)/g". Use forward slashes only, even on Windows.')},validateContent=e=>{if("string"!=typeof e&&!(e instanceof Uint8Array))throw TypeError(`The "content" must be a string or Uint8Array, but you passed a value of type ${typeof e}`);if("string"==typeof e&&""===e.trim())throw Error("The `content` must not be empty")},validateRenderAsset=e=>{"artifact"===e.type&&(validateArtifactFilename(e.filename),"thumbnail"!==e.contentType&&validateContent(e.content))},z=(0,o.createContext)({registerRenderAsset:()=>{},unregisterRenderAsset:()=>{},renderAssets:[]});Symbol("Thumbnail");var getAbsoluteSrc=e=>"undefined"==typeof window||e.startsWith("http://")||e.startsWith("https://")||e.startsWith("file://")||e.startsWith("blob:")||e.startsWith("data:")?e:new URL(e,window.origin).href,calculateMediaDuration=({trimAfter:e,mediaDurationInFrames:t,playbackRate:r,trimBefore:o})=>{let n=t;void 0!==e&&(n=e),void 0!==o&&(n-=o);let i=n/r;return Math.floor(i)},W=(0,o.createContext)(null),Loop=({durationInFrames:e,times:t=1/0,children:r,name:i,...a})=>{let s=useCurrentFrame(),{durationInFrames:u}=useVideoConfig();if(validateDurationInFrames(e,{component:"of the <Loop /> component",allowFloats:!0}),"number"!=typeof t)throw TypeError(`You passed to "times" an argument of type ${typeof t}, but it must be a number.`);if(t!==1/0&&t%1!=0)throw TypeError(`The "times" prop of a loop must be an integer, but got ${t}.`);if(t<0)throw TypeError(`The "times" prop of a loop must be at least 0, but got ${t}`);let l=Math.ceil(u/e),d=Math.min(l,t),m="none"===a.layout?void 0:a.style,c=e*(d-1),f=Math.floor(s/e),p=f*e,h=Math.min(p,c),g=(0,o.useMemo)(()=>({numberOfTimes:d,startOffset:-h,durationInFrames:e}),[d,e,h]),y=(0,o.useMemo)(()=>({iteration:Math.floor(s/e),durationInFrames:e}),[s,e]);return(0,n.jsx)(W.Provider,{value:y,children:(0,n.jsx)(H,{durationInFrames:e,from:h,name:i??"<Loop>",_remotionInternalLoopDisplay:g,layout:a.layout,style:m,children:r})})};Loop.useLoop=()=>o.useContext(W);var playbackLogging=({logLevel:e,tag:t,message:r,mountTime:o})=>{let n=[o?Date.now()-o+"ms ":null,t].filter(Boolean).join(" ");$.trace({logLevel:e,tag:null},`[${n}]`,r)},J=(0,o.createContext)({}),Y={},G=[],PrefetchProvider=({children:e})=>{let[t,r]=(0,o.useState)(()=>Y);return(0,o.useEffect)(()=>{let updaterFunction=()=>{r(Y)};return G.push(updaterFunction),()=>{G=G.filter(e=>e!==updaterFunction)}},[]),(0,n.jsx)(J.Provider,{value:t,children:e})},removeAndGetHashFragment=e=>{let t=e.indexOf("#");return -1===t?null:t},getSrcWithoutHash=e=>{let t=removeAndGetHashFragment(e);return null===t?e:e.slice(0,t)},usePreload=e=>{let t=(0,o.useContext)(J),r=removeAndGetHashFragment(e),n=getSrcWithoutHash(e);return t[n]?null!==r?t[n]+e.slice(r):t[n]:e},validateMediaProps=(e,t)=>{if("number"!=typeof e.volume&&"function"!=typeof e.volume&&void 0!==e.volume)throw TypeError(`You have passed a volume of type ${typeof e.volume} to your <${t} /> component. Volume must be a number or a function with the signature '(frame: number) => number' undefined.`);if("number"==typeof e.volume&&e.volume<0)throw TypeError(`You have passed a volume below 0 to your <${t} /> component. Volume must be between 0 and 1`);if("number"!=typeof e.playbackRate&&void 0!==e.playbackRate)throw TypeError(`You have passed a playbackRate of type ${typeof e.playbackRate} to your <${t} /> component. Playback rate must a real number or undefined.`);if("number"==typeof e.playbackRate&&(isNaN(e.playbackRate)||!Number.isFinite(e.playbackRate)||e.playbackRate<=0))throw TypeError(`You have passed a playbackRate of ${e.playbackRate} to your <${t} /> component. Playback rate must be a real number above 0.`)},validateStartFromProps=(e,t)=>{if(void 0!==e){if("number"!=typeof e)throw TypeError(`type of startFrom prop must be a number, instead got type ${typeof e}.`);if(isNaN(e)||e===1/0)throw TypeError("startFrom prop can not be NaN or Infinity.");if(e<0)throw TypeError(`startFrom must be greater than equal to 0 instead got ${e}.`)}if(void 0!==t){if("number"!=typeof t)throw TypeError(`type of endAt prop must be a number, instead got type ${typeof t}.`);if(isNaN(t))throw TypeError("endAt prop can not be NaN.");if(t<=0)throw TypeError(`endAt must be a positive number, instead got ${t}.`)}if(t<e)throw TypeError("endAt prop must be greater than startFrom prop.")},validateTrimProps=(e,t)=>{if(void 0!==e){if("number"!=typeof e)throw TypeError(`type of trimBefore prop must be a number, instead got type ${typeof e}.`);if(isNaN(e)||e===1/0)throw TypeError("trimBefore prop can not be NaN or Infinity.");if(e<0)throw TypeError(`trimBefore must be greater than equal to 0 instead got ${e}.`)}if(void 0!==t){if("number"!=typeof t)throw TypeError(`type of trimAfter prop must be a number, instead got type ${typeof t}.`);if(isNaN(t))throw TypeError("trimAfter prop can not be NaN.");if(t<=0)throw TypeError(`trimAfter must be a positive number, instead got ${t}.`)}if(t<=e)throw TypeError("trimAfter prop must be greater than trimBefore prop.")},validateMediaTrimProps=({startFrom:e,endAt:t,trimBefore:r,trimAfter:o})=>{if(void 0!==e&&void 0!==r)throw TypeError("Cannot use both startFrom and trimBefore props. Use trimBefore instead as startFrom is deprecated.");if(void 0!==t&&void 0!==o)throw TypeError("Cannot use both endAt and trimAfter props. Use trimAfter instead as endAt is deprecated.");let n=void 0!==r||void 0!==o,i=void 0!==e||void 0!==t;n?validateTrimProps(r,o):i&&validateStartFromProps(e,t)},resolveTrimProps=({startFrom:e,endAt:t,trimBefore:r,trimAfter:o})=>({trimBeforeValue:r??e??void 0,trimAfterValue:o??t??void 0}),durationReducer=(e,t)=>{if("got-duration"===t.type){let r=getAbsoluteSrc(t.src);return e[r]===t.durationInSeconds?e:{...e,[r]:t.durationInSeconds}}return e},K=(0,o.createContext)({durations:{},setDurations:()=>{throw Error("context missing")}}),DurationsContextProvider=({children:e})=>{let[t,r]=(0,o.useReducer)(durationReducer,{}),i=(0,o.useMemo)(()=>({durations:t,setDurations:r}),[t]);return(0,n.jsx)(K.Provider,{value:i,children:e})},getCrossOriginValue=({crossOrigin:e,requestsVideoFrame:t})=>null!=e?e:t?"anonymous":void 0,playAndHandleNotAllowedError=({mediaRef:e,mediaType:t,onAutoPlayError:r,logLevel:o,mountTime:n,reason:i,isPlayer:a})=>{let{current:s}=e;if(!s)return;playbackLogging({logLevel:o,tag:"play",message:`Attempting to play ${s.src}. Reason: ${i}`,mountTime:n});let u=s.play();u.catch&&u.catch(e=>{if(!(!s||e.message.includes("request was interrupted by a call to pause")||e.message.includes("The operation was aborted.")||e.message.includes("The fetching process for the media resource was aborted by the user agent")||e.message.includes("request was interrupted by a new load request")||e.message.includes("because the media was removed from the document")||e.message.includes("user didn't interact with the document")&&s.muted)&&(console.log(`Could not play ${t} due to following error: `,e),!s.muted)){if(r){r();return}"video"===t&&a&&($.info({logLevel:o,tag:"<"+t+">"},"The video will be muted and we'll retry playing it."),$.info({logLevel:o,tag:"<"+t+">"},"Use onAutoPlayError() to handle this error yourself."),s.muted=!0,s.play())}})},makeSharedElementSourceNode=({audioContext:e,ref:t})=>{let r=null;return{attemptToConnect:()=>{if(!r&&t.current){let o=e.createMediaElementSource(t.current);r=o}},get:()=>{if(!r)throw Error("Audio element not connected");return r}}},Q=!1,warnOnce=e=>{Q||(Q=!0,"undefined"!=typeof window&&$.warn({logLevel:e,tag:null},"AudioContext is not supported in this browser"))},useSingletonAudioContext=(e,t)=>{let r=useRemotionEnvironment(),n=(0,o.useMemo)(()=>r.isRendering?null:"undefined"==typeof AudioContext?(warnOnce(e),null):new AudioContext({latencyHint:t,sampleRate:48e3}),[e,t,r.isRendering]);return n},Z="data:audio/mp3;base64,/+MYxAAJcAV8AAgAABn//////+/gQ5BAMA+D4Pg+BAQBAEAwD4Pg+D4EBAEAQDAPg++hYBH///hUFQVBUFREDQNHmf///////+MYxBUGkAGIMAAAAP/29Xt6lUxBTUUzLjEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV/+MYxDUAAANIAAAAAFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",compareProps=(e,t)=>{let r=Object.keys(e).sort(),o=Object.keys(t).sort();if(r.length!==o.length)return!1;for(let n=0;n<r.length;n++)if(r[n]!==o[n]||e[r[n]]!==t[o[n]])return!1;return!0},didPropChange=(e,t,r)=>"src"!==e||r.startsWith("data:")||t.startsWith("data:")?r!==t:new URL(r,window.origin).toString()!==new URL(t,window.origin).toString(),X=(0,o.createContext)(null),SharedAudioContextProvider=({children:e,numberOfAudioTags:t,audioLatencyHint:r})=>{let i=(0,o.useRef)([]),[a]=(0,o.useState)(t);if(t!==a)throw Error("The number of shared audio tags has changed dynamically. Once you have set this property, you cannot change it afterwards.");let s=useLogLevel(),u=useSingletonAudioContext(s,r),l=(0,o.useMemo)(()=>Array(t).fill(!0).map(()=>{let e=(0,o.createRef)();return{id:Math.random(),ref:e,mediaElementSourceNode:u?makeSharedElementSourceNode({audioContext:u,ref:e}):null}}),[u,t]),d=(0,o.useRef)(Array(t).fill(!1)),m=(0,o.useCallback)(()=>{l.forEach(({ref:e,id:t})=>{let r=i.current?.find(e=>e.id===t),{current:o}=e;if(o){if(void 0===r){o.src=Z;return}if(!r)throw TypeError("Expected audio data to be there");Object.keys(r.props).forEach(e=>{didPropChange(e,r.props[e],o[e])&&(o[e]=r.props[e])})}})},[l]),c=(0,o.useCallback)(e=>{let{aud:r,audioId:o,premounting:n}=e,a=i.current?.find(e=>e.audioId===o);if(a)return a;let s=d.current.findIndex(e=>!1===e);if(-1===s)throw Error(`Tried to simultaneously mount ${t+1} <Html5Audio /> tags at the same time. With the current settings, the maximum amount of <Html5Audio /> tags is limited to ${t} at the same time. Remotion pre-mounts silent audio tags to help avoid browser autoplay restrictions. See https://remotion.dev/docs/player/autoplay#using-the-numberofsharedaudiotags-prop for more information on how to increase this limit.`);let{id:u,ref:c,mediaElementSourceNode:f}=l[s],p=[...d.current];p[s]=u,d.current=p;let h={props:r,id:u,el:c,audioId:o,mediaElementSourceNode:f,premounting:n};return i.current?.push(h),m(),h},[t,l,m]),f=(0,o.useCallback)(e=>{let t=[...d.current],r=l.findIndex(t=>t.id===e);if(-1===r)throw TypeError("Error occured in ");t[r]=!1,d.current=t,i.current=i.current?.filter(t=>t.id!==e),m()},[l,m]),p=(0,o.useCallback)(({aud:e,audioId:t,id:r,premounting:o})=>{let n=!1;i.current=i.current?.map(i=>{if(i.id===r){let r=compareProps(e,i.props)&&i.premounting===o;return r?i:(n=!0,{...i,props:e,premounting:o,audioId:t})}return i}),n&&m()},[m]),h=useMountTime(),g=useRemotionEnvironment(),y=(0,o.useCallback)(()=>{l.forEach(e=>{let t=i.current.find(t=>t.el===e.ref);t?.premounting||playAndHandleNotAllowedError({mediaRef:e.ref,mediaType:"audio",onAutoPlayError:null,logLevel:s,mountTime:h,reason:"playing all audios",isPlayer:g.isPlayer})}),u?.resume()},[u,s,h,l,g.isPlayer]),w=(0,o.useMemo)(()=>({registerAudio:c,unregisterAudio:f,updateAudio:p,playAllAudios:y,numberOfAudioTags:t,audioContext:u}),[t,y,c,f,p,u]);return(0,n.jsxs)(X.Provider,{value:w,children:[l.map(({id:e,ref:t})=>(0,n.jsx)("audio",{ref:t,preload:"metadata",src:Z},e)),e]})},useSharedAudio=({aud:e,audioId:t,premounting:r})=>{let n=(0,o.useContext)(X),[i]=(0,o.useState)(()=>{if(n&&n.numberOfAudioTags>0)return n.registerAudio({aud:e,audioId:t,premounting:r});let i=o.createRef(),a=n?.audioContext?makeSharedElementSourceNode({audioContext:n.audioContext,ref:i}):null;return{el:i,id:Math.random(),props:e,audioId:t,mediaElementSourceNode:a,premounting:r}}),a=o.useInsertionEffect??o.useLayoutEffect;return"undefined"!=typeof document&&(a(()=>{n&&n.numberOfAudioTags>0&&n.updateAudio({id:i.id,aud:e,audioId:t,premounting:r})},[e,n,i.id,t,r]),a(()=>()=>{n&&n.numberOfAudioTags>0&&n.unregisterAudio(i.id)},[n,i.id])),i},isApproximatelyTheSame=(e,t)=>1e-5>Math.abs(e-t),toSeconds=(e,t)=>Math.round(e/t*100)/100,isSafari=()=>{if("undefined"==typeof window)return!1;let e=/AppleWebKit/.test(window.navigator.userAgent);if(!e)return!1;let t=!window.navigator.userAgent.includes("Chrome/");return t},isIosSafari=()=>{if("undefined"==typeof window)return!1;let e=/iP(ad|od|hone)/i.test(window.navigator.userAgent);return e&&isSafari()},isIOSSafariAndBlob=e=>isIosSafari()&&e.startsWith("blob:"),getVideoFragmentStart=({actualFrom:e,fps:t})=>toSeconds(Math.max(0,-e),t),getVideoFragmentEnd=({duration:e,fps:t})=>toSeconds(e,t),appendVideoFragment=({actualSrc:e,actualFrom:t,duration:r,fps:o})=>{if(isIOSSafariAndBlob(e)||e.startsWith("data:"))return e;let n=!!new URL(e,("undefined"==typeof window?null:window.location.href)??"http://localhost:3000").hash;if(n||!Number.isFinite(t))return e;let i=`${e}#t=${getVideoFragmentStart({actualFrom:t,fps:o})}`;return Number.isFinite(r)?`${i},${getVideoFragmentEnd({duration:r,fps:o})}`:i},isSubsetOfDuration=({prevStartFrom:e,newStartFrom:t,prevDuration:r,newDuration:o,fps:n})=>{let i=getVideoFragmentStart({actualFrom:e,fps:n}),a=getVideoFragmentStart({actualFrom:t,fps:n}),s=getVideoFragmentEnd({duration:r,fps:n}),u=getVideoFragmentEnd({duration:o,fps:n});return!(a<i)&&!(u>s)},useAppendVideoFragment=({actualSrc:e,actualFrom:t,duration:r,fps:n})=>{let i=(0,o.useRef)(t),a=(0,o.useRef)(r),s=(0,o.useRef)(e);isSubsetOfDuration({prevStartFrom:i.current,newStartFrom:t,prevDuration:a.current,newDuration:r,fps:n})&&e===s.current||(i.current=t,a.current=r,s.current=e);let u=appendVideoFragment({actualSrc:s.current,actualFrom:i.current,duration:a.current,fps:n});return u},ee=!1,warnSafariOnce=e=>{ee||(ee=!0,$.warn({logLevel:e,tag:null},"In Safari, setting a volume and a playback rate at the same time is buggy."),$.warn({logLevel:e,tag:null},"In Desktop Safari, only volumes <= 1 will be applied."),$.warn({logLevel:e,tag:null},e,"In Mobile Safari, the volume will be ignored and set to 1 if a playbackRate is set."))},useVolume=({mediaRef:e,volume:t,logLevel:r,source:n,shouldUseWebAudioApi:i})=>{let a=(0,o.useRef)(null),s=(0,o.useRef)(t);s.current=t;let u=(0,o.useContext)(X);if(!u)throw Error("useAmplification must be used within a SharedAudioContext");let{audioContext:l}=u;"undefined"!=typeof window&&(0,o.useLayoutEffect)(()=>{if(!l||!e.current||!i)return;if(1!==e.current.playbackRate&&isSafari()){warnSafariOnce(r);return}if(!n)return;let t=new GainNode(l,{gain:s.current});return n.attemptToConnect(),n.get().connect(t),t.connect(l.destination),a.current={gainNode:t},$.trace({logLevel:r,tag:null},`Starting to amplify ${e.current?.src}. Gain = ${s.current}, playbackRate = ${e.current?.playbackRate}`),()=>{a.current=null,t.disconnect(),n.get().disconnect()}},[r,e,l,n,i]),a.current&&!isApproximatelyTheSame(a.current.gainNode.gain.value,t)&&(a.current.gainNode.gain.value=t,$.trace({logLevel:r,tag:null},`Setting gain to ${t} for ${e.current?.src}`));let d=isSafari()&&e.current&&e.current?.playbackRate!==1,m=d||!i;return m&&e.current&&!isApproximatelyTheSame(t,e.current?.volume)&&(e.current.volume=Math.min(t,1)),a},useMediaStartsAt=()=>{let e=(0,o.useContext)(p),t=Math.min(0,e?.relativeFrom??0);return t},useFrameForVolumeProp=e=>{let t=Loop.useLoop(),r=useCurrentFrame(),o=useMediaStartsAt();return"repeat"===e||null===t?r+o:r+o+t.durationInFrames*t.iteration},getAssetDisplayName=e=>{if(/data:|blob:/.test(e.substring(0,5)))return"Data URL";let t=e.split("/").map(e=>e.split("\\")).flat(1);return t[t.length-1]},evaluateVolume=({frame:e,volume:t,mediaVolume:r=1})=>{if("number"==typeof t)return t*r;if(void 0===t)return Number(r);let o=t(e)*r;if("number"!=typeof o)throw TypeError(`You passed in a a function to the volume prop but it did not return a number but a value of type ${typeof o} for frame ${e}`);if(Number.isNaN(o))throw TypeError(`You passed in a function to the volume prop but it returned NaN for frame ${e}.`);if(!Number.isFinite(o))throw TypeError(`You passed in a function to the volume prop but it returned a non-finite number for frame ${e}.`);return Math.max(0,o)},et={},warnOnce2=e=>{et[e]||(console.warn(e),et[e]=!0)},useBasicMediaInTimeline=({volume:e,mediaVolume:t,mediaType:r,src:n,displayName:i,trimBefore:a,trimAfter:s,playbackRate:u})=>{if(!n)throw Error("No src passed");let l=useMediaStartsAt(),d=(0,o.useContext)(p),m=useVideoConfig(),[c]=(0,o.useState)(()=>e),f=calculateMediaDuration({mediaDurationInFrames:m.durationInFrames,playbackRate:u,trimBefore:a,trimAfter:s}),h=d?Math.min(d.durationInFrames,f):f,g=(0,o.useMemo)(()=>"number"==typeof e?e:Array(Math.floor(Math.max(0,h+l))).fill(!0).map((r,o)=>evaluateVolume({frame:o+l,volume:e,mediaVolume:t})).join(","),[h,l,e,t]);(0,o.useEffect)(()=>{"number"==typeof e&&e!==c&&warnOnce2(`Remotion: The ${r} with src ${n} has changed it's volume. Prefer the callback syntax for setting volume to get better timeline display: https://www.remotion.dev/docs/audio/volume`)},[c,r,n,e]);let y="function"==typeof e,w=useNonce(),{rootId:v}=(0,o.useContext)(_),b=useRemotionEnvironment();return{volumes:g,duration:h,doesVolumeChange:y,nonce:w,rootId:v,isStudio:b.isStudio,finalDisplayName:i??getAssetDisplayName(n)}},useMediaInTimeline=({volume:e,mediaVolume:t,src:r,mediaType:n,playbackRate:i,displayName:a,id:s,stack:u,showInTimeline:l,premountDisplay:d,postmountDisplay:m,loopDisplay:c})=>{let f=(0,o.useContext)(p),g=useMediaStartsAt(),{registerSequence:y,unregisterSequence:w}=(0,o.useContext)(h),{volumes:v,duration:b,doesVolumeChange:C,nonce:E,rootId:x,isStudio:S,finalDisplayName:R}=useBasicMediaInTimeline({volume:e,mediaVolume:t,mediaType:n,src:r,displayName:a,trimAfter:void 0,trimBefore:void 0,playbackRate:i});(0,o.useEffect)(()=>{if(!r)throw Error("No src passed");if((S||window.process?.env?.NODE_ENV==="test")&&l)return y({type:n,src:r,id:s,duration:b,from:0,parent:f?.id??null,displayName:R,rootId:x,volume:v,showInTimeline:!0,nonce:E,startMediaFrom:0-g,doesVolumeChange:C,loopDisplay:c,playbackRate:i,stack:u,premountDisplay:d,postmountDisplay:m}),()=>{w(s)}},[b,s,f,r,y,w,v,C,E,n,g,i,u,l,d,m,S,c,x,R])},useBufferManager=(e,t)=>{let[r,n]=(0,o.useState)([]),[i,a]=(0,o.useState)([]),[s,u]=(0,o.useState)([]),l=(0,o.useRef)(!1),d=(0,o.useCallback)(e=>(n(t=>[...t,e]),{unblock:()=>{n(t=>{let r=t.filter(t=>t!==e);return r.length===t.length?t:r})}}),[]),m=(0,o.useCallback)(e=>(a(t=>[...t,e]),{remove:()=>{a(t=>t.filter(t=>t!==e))}}),[]),c=(0,o.useCallback)(e=>(u(t=>[...t,e]),{remove:()=>{u(t=>t.filter(t=>t!==e))}}),[]);return(0,o.useEffect)(()=>{r.length>0&&(i.forEach(e=>e()),playbackLogging({logLevel:e,message:"Player is entering buffer state",mountTime:t,tag:"player"}))},[r]),"undefined"!=typeof window&&(0,o.useLayoutEffect)(()=>{0===r.length&&(s.forEach(e=>e()),playbackLogging({logLevel:e,message:"Player is exiting buffer state",mountTime:t,tag:"player"}))},[r]),(0,o.useMemo)(()=>({addBlock:d,listenForBuffering:m,listenForResume:c,buffering:l}),[d,l,m,c])},er=o.createContext(null),BufferingProvider=({children:e})=>{let{logLevel:t,mountTime:r}=(0,o.useContext)(L),i=useBufferManager(t??"info",r);return(0,n.jsx)(er.Provider,{value:i,children:e})},useIsPlayerBuffering=e=>{let[t,r]=(0,o.useState)(e.buffering.current);return(0,o.useEffect)(()=>(e.listenForBuffering(()=>{r(!0)}),e.listenForResume(()=>{r(!1)}),()=>{e.listenForBuffering(()=>{}),e.listenForResume(()=>{})}),[e]),t},useBufferState=()=>{let e=(0,o.useContext)(er),t=e?e.addBlock:null;return(0,o.useMemo)(()=>({delayPlayback:()=>{if(!t)throw Error("Tried to enable the buffering state, but a Remotion context was not found. This API can only be called in a component that was passed to the Remotion Player or a <Composition>. Or you might have experienced a version mismatch - run `npx remotion versions` and ensure all packages have the same version. This error is thrown by the buffer state https://remotion.dev/docs/player/buffer-state");let{unblock:e}=t({id:String(Math.random())});return{unblock:e}}}),[t])},isSafariWebkit=()=>{let e=/^((?!chrome|android).)*safari/i.test(window.navigator.userAgent);return e},useBufferUntilFirstFrame=({mediaRef:e,mediaType:t,onVariableFpsVideoDetected:r,pauseWhenBuffering:n,logLevel:i,mountTime:a})=>{let s=(0,o.useRef)(!1),{delayPlayback:u}=useBufferState(),l=(0,o.useCallback)(o=>{if("video"!==t||!n)return;let l=e.current;if(!l)return;if(l.readyState>=l.HAVE_FUTURE_DATA&&!isSafariWebkit()){playbackLogging({logLevel:i,message:`Not using buffer until first frame, because readyState is ${l.readyState} and is not Safari or Desktop Chrome`,mountTime:a,tag:"buffer"});return}if(!l.requestVideoFrameCallback){playbackLogging({logLevel:i,message:"Not using buffer until first frame, because requestVideoFrameCallback is not supported",mountTime:a,tag:"buffer"});return}s.current=!0,playbackLogging({logLevel:i,message:`Buffering ${e.current?.src} until the first frame is received`,mountTime:a,tag:"buffer"});let d=u(),unblock=()=>{d.unblock(),l.removeEventListener("ended",unblock,{once:!0}),l.removeEventListener("pause",unblock,{once:!0}),s.current=!1},onEndedOrPauseOrCanPlay=()=>{unblock()};l.requestVideoFrameCallback((e,t)=>{let n=Math.abs(t.mediaTime-o);n>.5&&r(),unblock()}),l.addEventListener("ended",onEndedOrPauseOrCanPlay,{once:!0}),l.addEventListener("pause",onEndedOrPauseOrCanPlay,{once:!0}),l.addEventListener("canplay",onEndedOrPauseOrCanPlay,{once:!0})},[u,i,e,t,a,r,n]);return(0,o.useMemo)(()=>({isBuffering:()=>s.current,bufferUntilFirstFrame:l}),[l])},useCurrentTimeOfMediaTagWithUpdateTimeStamp=e=>{let t=o.useRef({time:e.current?.currentTime??0,lastUpdate:performance.now()}),r=e.current?.currentTime??null;return null!==r&&t.current.time!==r&&(t.current.time=r,t.current.lastUpdate=performance.now()),t},seek=({mediaRef:e,time:t,logLevel:r,why:o,mountTime:n})=>{let i=isIosSafari()?Number(t.toFixed(1)):t;return playbackLogging({logLevel:r,tag:"seek",message:`Seeking from ${e.currentTime} to ${i}. src= ${e.src} Reason: ${o}`,mountTime:n}),e.currentTime=i,i},useMediaBuffering=({element:e,shouldBuffer:t,isPremounting:r,isPostmounting:n,logLevel:i,mountTime:a,src:s})=>{let u=useBufferState(),[l,d]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{let o=[],{current:l}=e;if(!l||!t)return;if(r||n){if((r||n)&&l.readyState<l.HAVE_FUTURE_DATA&&!navigator.userAgent.includes("Firefox/")){playbackLogging({logLevel:i,message:`Calling .load() on ${l.src} because readyState is ${l.readyState} and it is not Firefox. Element is premounted ${l.playbackRate}`,tag:"load",mountTime:a});let e=l.playbackRate;l.load(),l.playbackRate=e}return}let cleanup=e=>{let t=!1;o.forEach(r=>{r(e),t=!0}),o=[],d(e=>(e&&(t=!0),!1)),t&&playbackLogging({logLevel:i,message:`Unmarking as buffering: ${l.src}. Reason: ${e}`,tag:"buffer",mountTime:a})},blockMedia=e=>{d(!0),playbackLogging({logLevel:i,message:`Marking as buffering: ${l.src}. Reason: ${e}`,tag:"buffer",mountTime:a});let{unblock:t}=u.delayPlayback(),onCanPlay=()=>{cleanup('"canplay" was fired'),init()},onError=()=>{cleanup('"error" event was occurred'),init()};l.addEventListener("canplay",onCanPlay,{once:!0}),o.push(()=>{l.removeEventListener("canplay",onCanPlay)}),l.addEventListener("error",onError,{once:!0}),o.push(()=>{l.removeEventListener("error",onError)}),o.push(e=>{playbackLogging({logLevel:i,message:`Unblocking ${l.src} from buffer. Reason: ${e}`,tag:"buffer",mountTime:a}),t()})},init=()=>{if(l.readyState<l.HAVE_FUTURE_DATA){if(blockMedia(`readyState is ${l.readyState}, which is less than HAVE_FUTURE_DATA`),!navigator.userAgent.includes("Firefox/")){playbackLogging({logLevel:i,message:`Calling .load() on ${s} because readyState is ${l.readyState} and it is not Firefox. ${l.playbackRate}`,tag:"load",mountTime:a});let e=l.playbackRate;l.load(),l.playbackRate=e}}else{let onWaiting=()=>{blockMedia('"waiting" event was fired')};l.addEventListener("waiting",onWaiting),o.push(()=>{l.removeEventListener("waiting",onWaiting)})}};return init(),()=>{cleanup("element was unmounted or prop changed")}},[u,s,e,r,n,i,t,a]),l},useRequestVideoCallbackTime=({mediaRef:e,mediaType:t,lastSeek:r,onVariableFpsVideoDetected:n})=>{let i=(0,o.useRef)(null);return(0,o.useEffect)(()=>{let{current:o}=e;if(o)i.current={time:o.currentTime,lastUpdate:performance.now()};else{i.current=null;return}if("video"!==t){i.current=null;return}if(!o.requestVideoFrameCallback)return;let cancel=()=>{},request=()=>{if(!o)return;let e=o.requestVideoFrameCallback((e,t)=>{if(null!==i.current){let e=Math.abs(i.current.time-t.mediaTime),o=Math.abs(null===r.current?1/0:t.mediaTime-r.current);e>.5&&o>.5&&t.mediaTime>i.current.time&&n()}i.current={time:t.mediaTime,lastUpdate:performance.now()},request()});cancel=()=>{o.cancelVideoFrameCallback(e),cancel=()=>{}}};return request(),()=>{cancel()}},[r,e,t,n]),i};function interpolateFunction(e,t,r,o){let{extrapolateLeft:n,extrapolateRight:i,easing:a}=o,s=e,[u,l]=t,[d,m]=r;if(s<u){if("identity"===n)return s;if("clamp"===n)s=u;else if("wrap"===n){let e=l-u;s=((s-u)%e+e)%e+u}}if(s>l){if("identity"===i)return s;if("clamp"===i)s=l;else if("wrap"===i){let e=l-u;s=((s-u)%e+e)%e+u}}return d===m?d:s=(s=a(s=(s-u)/(l-u)))*(m-d)+d}function findRange(e,t){let r;for(r=1;r<t.length-1&&!(t[r]>=e);++r);return r-1}function checkValidInputRange(e){for(let t=1;t<e.length;++t)if(!(e[t]>e[t-1]))throw Error(`inputRange must be strictly monotonically increasing but got [${e.join(",")}]`)}function checkInfiniteRange(e,t){if(t.length<2)throw Error(e+" must have at least 2 elements");for(let r of t){if("number"!=typeof r)throw Error(`${e} must contain only numbers`);if(!Number.isFinite(r))throw Error(`${e} must contain only finite numbers, but got [${t.join(",")}]`)}}function interpolate(e,t,r,o){if(void 0===e)throw Error("input can not be undefined");if(void 0===t)throw Error("inputRange can not be undefined");if(void 0===r)throw Error("outputRange can not be undefined");if(t.length!==r.length)throw Error("inputRange ("+t.length+") and outputRange ("+r.length+") must have the same length");checkInfiniteRange("inputRange",t),checkInfiniteRange("outputRange",r),checkValidInputRange(t);let n=o?.easing??(e=>e),i="extend";o?.extrapolateLeft!==void 0&&(i=o.extrapolateLeft);let a="extend";if(o?.extrapolateRight!==void 0&&(a=o.extrapolateRight),"number"!=typeof e)throw TypeError("Cannot interpolate an input which is not a number");let s=findRange(e,t);return interpolateFunction(e,[t[s],t[s+1]],[r[s],r[s+1]],{easing:n,extrapolateLeft:i,extrapolateRight:a})}var getExpectedMediaFrameUncorrected=({frame:e,playbackRate:t,startFrom:r})=>interpolate(e,[-1,r,r+1],[-1,r,r+t]),getMediaTime=({fps:e,frame:t,playbackRate:r,startFrom:o})=>{let n=getExpectedMediaFrameUncorrected({frame:t,playbackRate:r,startFrom:o});return n*(1e3/e)/1e3},eo={},warnAboutNonSeekableMedia=(e,t)=>{if(null===e||0===e.seekable.length||e.seekable.length>1||eo[e.src])return;let r={start:e.seekable.start(0),end:e.seekable.end(0)};if(0===r.start&&0===r.end){let r=[`The media ${e.src} cannot be seeked. This could be one of few reasons:`,"1) The media resource was replaced while the video is playing but it was not loaded yet.","2) The media does not support seeking.","3) The media was loaded with security headers prventing it from being included.","Please see https://remotion.dev/docs/non-seekable-media for assistance."].join(`
`);if("console-error"===t)console.error(r);else if("console-warning"===t)console.warn(`The media ${e.src} does not support seeking. The video will render fine, but may not play correctly in the Remotion Studio and in the <Player>. See https://remotion.dev/docs/non-seekable-media for an explanation.`);else throw Error(r);eo[e.src]=!0}},useMediaPlayback=({mediaRef:e,src:t,mediaType:r,playbackRate:n,onlyWarnForMediaSeekingError:i,acceptableTimeshift:a,pauseWhenBuffering:s,isPremounting:u,isPostmounting:l,onAutoPlayError:d})=>{let{playbackRate:m}=(0,o.useContext)(_),c=useCurrentFrame(),f=useTimelinePosition(),[p]=usePlayingState(),h=(0,o.useContext)(er),{fps:g}=useVideoConfig(),y=useMediaStartsAt(),w=(0,o.useRef)(null),v=(0,o.useRef)(null),b=useLogLevel(),C=useMountTime();if(!h)throw Error("useMediaPlayback must be used inside a <BufferingContext>");let E=(0,o.useRef)({}),x=(0,o.useCallback)(()=>{t&&!E.current[t]&&($.verbose({logLevel:b,tag:null},`Detected ${t} as a variable FPS video. Disabling buffering while seeking.`),E.current[t]=!0)},[b,t]),S=useRequestVideoCallbackTime({mediaRef:e,mediaType:r,lastSeek:v,onVariableFpsVideoDetected:x}),R=useCurrentTimeOfMediaTagWithUpdateTimeStamp(e),T=getMediaTime({frame:c,playbackRate:n,startFrom:-y,fps:g}),P=useMediaBuffering({element:e,shouldBuffer:s,isPremounting:u,isPostmounting:l,logLevel:b,mountTime:C,src:t??null}),{bufferUntilFirstFrame:F,isBuffering:V}=useBufferUntilFirstFrame({mediaRef:e,mediaType:r,onVariableFpsVideoDetected:x,pauseWhenBuffering:s,logLevel:b,mountTime:C}),I=n*m,k=e.current?.duration?Math.min(e.current.duration,a??.65):a??.65,M=useIsPlayerBuffering(h);(0,o.useEffect)(()=>{if(e.current?.paused)return;if(!p){playbackLogging({logLevel:b,tag:"pause",message:`Pausing ${e.current?.src} because ${u?"media is premounting":l?"media is postmounting":"Player is not playing"}`,mountTime:C}),e.current?.pause();return}let t=P||V(),r=h.buffering.current;r&&!t&&(playbackLogging({logLevel:b,tag:"pause",message:`Pausing ${e.current?.src} because player is buffering but media tag is not`,mountTime:C}),e.current?.pause())},[V,P,h,M,u,b,e,r,C,p,l]);let A=useRemotionEnvironment();(0,o.useLayoutEffect)(()=>{let t=Math.max(0,I);e.current&&e.current.playbackRate!==t&&(e.current.playbackRate=t)},[e,I]),(0,o.useEffect)(()=>{let o="audio"===r?"<Html5Audio>":"<Html5Video>";if(!e.current)throw Error(`No ${r} ref found`);if(!t)throw Error(`No 'src' attribute was passed to the ${o} element.`);let{duration:n}=e.current,a=!Number.isNaN(n)&&Number.isFinite(n)?Math.min(n,T):T,m=R.current.time,c=S.current?.time??null,g=E.current[t],y=Math.abs(a-m),x=c?Math.abs(a-c):null,M=S.current?.lastUpdate&&S.current.time>R.current.lastUpdate?x:y,$=x&&!g?M:y;if($>k&&w.current!==a){v.current=seek({mediaRef:e.current,time:a,logLevel:b,why:`because time shift is too big. shouldBeTime = ${a}, isTime = ${m}, requestVideoCallbackTime = ${c}, timeShift = ${$}${g?", isVariableFpsVideo = true":""}, isPremounting = ${u}, isPostmounting = ${l}, pauseWhenBuffering = ${s}`,mountTime:C}),w.current=v.current,p&&(I>0&&F(a),e.current.paused&&playAndHandleNotAllowedError({mediaRef:e,mediaType:r,onAutoPlayError:d,logLevel:b,mountTime:C,reason:"player is playing but media tag is paused, and just seeked",isPlayer:A.isPlayer})),i||warnAboutNonSeekableMedia(e.current,i?"console-warning":"console-error");return}let N=p?.15:.01,L=Math.abs(e.current.currentTime-a)>N,j=P||V(),D=h.buffering.current&&!j;if(!p||D){L&&(v.current=seek({mediaRef:e.current,time:a,logLevel:b,why:`not playing or something else is buffering. time offset is over seek threshold (${N})`,mountTime:C}));return}if(!p||h.buffering.current)return;let _=e.current.paused&&!e.current.ended,O=0===f;if(_||O){let t=_?"media tag is paused":"absolute frame is 0";L&&(v.current=seek({mediaRef:e.current,time:a,logLevel:b,why:`is over timeshift threshold (threshold = ${N}) and ${t}`,mountTime:C})),playAndHandleNotAllowedError({mediaRef:e,mediaType:r,onAutoPlayError:d,logLevel:b,mountTime:C,reason:`player is playing and ${t}`,isPlayer:A.isPlayer}),!g&&I>0&&F(a)}},[f,k,F,h.buffering,S,b,T,V,P,e,r,i,I,p,t,d,u,l,s,C,R,A.isPlayer])},useMediaTag=({mediaRef:e,id:t,mediaType:r,onAutoPlayError:n,isPremounting:i,isPostmounting:a})=>{let{audioAndVideoTags:s,imperativePlaying:u}=(0,o.useContext)(_),l=useLogLevel(),d=useMountTime(),m=useRemotionEnvironment();(0,o.useEffect)(()=>(s.current.push({id:t,play:t=>{if(u.current&&!i&&!a)return playAndHandleNotAllowedError({mediaRef:e,mediaType:r,onAutoPlayError:n,logLevel:l,mountTime:d,reason:t,isPlayer:m.isPlayer})}}),()=>{s.current=s.current.filter(e=>e.id!==t)}),[s,t,e,r,n,u,i,a,l,d,m.isPlayer])},en=(0,o.createContext)({mediaMuted:!1,mediaVolume:1}),ei=(0,o.createContext)({setMediaMuted:()=>{throw Error("default")},setMediaVolume:()=>{throw Error("default")}}),useMediaVolumeState=()=>{let{mediaVolume:e}=(0,o.useContext)(en),{setMediaVolume:t}=(0,o.useContext)(ei);return(0,o.useMemo)(()=>[e,t],[e,t])},useMediaMutedState=()=>{let{mediaMuted:e}=(0,o.useContext)(en),{setMediaMuted:t}=(0,o.useContext)(ei);return(0,o.useMemo)(()=>[e,t],[e,t])},warnAboutTooHighVolume=e=>{if(e>=100)throw Error(`Volume was set to ${e}, but regular volume is 1, not 100. Did you forget to divide by 100? Set a volume of less than 100 to dismiss this error.`)},ea=(0,o.forwardRef)((e,t)=>{let[r]=(0,o.useState)(e.shouldPreMountAudioTags);if(e.shouldPreMountAudioTags!==r)throw Error("Cannot change the behavior for pre-mounting audio tags dynamically.");let i=useLogLevel(),{volume:a,muted:s,playbackRate:u,shouldPreMountAudioTags:l,src:d,onDuration:m,acceptableTimeShiftInSeconds:c,_remotionInternalNeedsDurationCalculation:f,_remotionInternalNativeLoopPassed:h,_remotionInternalStack:y,allowAmplificationDuringRender:w,name:v,pauseWhenBuffering:b,showInTimeline:C,loopVolumeCurveBehavior:E,stack:x,crossOrigin:S,delayRenderRetries:R,delayRenderTimeoutInMilliseconds:T,toneFrequency:P,useWebAudioApi:F,onError:V,onNativeError:I,audioStreamIndex:k,...M}=e,[A]=useMediaVolumeState(),[$]=useMediaMutedState(),N=useFrameForVolumeProp(E??"repeat"),{hidden:L}=(0,o.useContext)(g);if(!d)throw TypeError("No 'src' was passed to <Html5Audio>.");let j=usePreload(d),D=(0,o.useContext)(p),[_]=(0,o.useState)(()=>String(Math.random())),O=L[_]??!1,B=evaluateVolume({frame:N,volume:a,mediaVolume:A});warnAboutTooHighVolume(B);let U=getCrossOriginValue({crossOrigin:S,requestsVideoFrame:!1}),H=(0,o.useMemo)(()=>({muted:s||$||O||B<=0,src:j,loop:h,crossOrigin:U,...M}),[h,O,$,s,M,j,B,U]),q=(0,o.useMemo)(()=>`audio-${random(d??"")}-${D?.relativeFrom}-${D?.cumulatedFrom}-${D?.durationInFrames}-muted:${e.muted}-loop:${e.loop}`,[d,D?.relativeFrom,D?.cumulatedFrom,D?.durationInFrames,e.muted,e.loop]),z=(0,o.useContext)(X);if(!z)throw Error("SharedAudioContext not found");let{el:W,mediaElementSourceNode:J}=useSharedAudio({aud:H,audioId:q,premounting:!!D?.premounting});useMediaInTimeline({volume:a,mediaVolume:A,src:d,mediaType:"audio",playbackRate:u??1,displayName:v??null,id:_,stack:y,showInTimeline:C,premountDisplay:D?.premountDisplay??null,postmountDisplay:D?.postmountDisplay??null,loopDisplay:void 0}),useMediaPlayback({mediaRef:W,src:d,mediaType:"audio",playbackRate:u??1,onlyWarnForMediaSeekingError:!1,acceptableTimeshift:c??null,isPremounting:!!D?.premounting,isPostmounting:!!D?.postmounting,pauseWhenBuffering:b,onAutoPlayError:null}),useMediaTag({id:_,isPostmounting:!!D?.postmounting,isPremounting:!!D?.premounting,mediaRef:W,mediaType:"audio",onAutoPlayError:null}),useVolume({logLevel:i,mediaRef:W,source:J,volume:B,shouldUseWebAudioApi:F??!1}),(0,o.useImperativeHandle)(t,()=>W.current,[W]);let Y=(0,o.useRef)(m);return(Y.current=m,(0,o.useEffect)(()=>{let{current:e}=W;if(!e)return;if(e.duration){Y.current?.(e.src,e.duration);return}let onLoadedMetadata=()=>{Y.current?.(e.src,e.duration)};return e.addEventListener("loadedmetadata",onLoadedMetadata),()=>{e.removeEventListener("loadedmetadata",onLoadedMetadata)}},[W,d]),r)?null:(0,n.jsx)("audio",{ref:W,preload:"metadata",crossOrigin:U,...H})}),es=(0,o.forwardRef)((e,t)=>{let r=(0,o.useRef)(null),{volume:i,playbackRate:a,allowAmplificationDuringRender:s,onDuration:u,toneFrequency:l,_remotionInternalNeedsDurationCalculation:d,_remotionInternalNativeLoopPassed:m,acceptableTimeShiftInSeconds:c,name:f,onNativeError:h,delayRenderRetries:g,delayRenderTimeoutInMilliseconds:y,loopVolumeCurveBehavior:w,pauseWhenBuffering:v,audioStreamIndex:b,...C}=e,E=useTimelinePosition(),x=useFrameForVolumeProp(w??"repeat"),S=useCurrentFrame(),R=(0,o.useContext)(p),{registerRenderAsset:T,unregisterRenderAsset:P}=(0,o.useContext)(z),{delayRender:F,continueRender:V}=useDelayRender(),I=(0,o.useMemo)(()=>`audio-${random(e.src??"")}-${R?.relativeFrom}-${R?.cumulatedFrom}-${R?.durationInFrames}`,[e.src,R?.relativeFrom,R?.cumulatedFrom,R?.durationInFrames]),k=evaluateVolume({volume:i,frame:x,mediaVolume:1});warnAboutTooHighVolume(k),(0,o.useImperativeHandle)(t,()=>r.current,[]),(0,o.useEffect)(()=>{if(!e.src)throw Error("No src passed");if(window.remotion_audioEnabled&&!e.muted&&!(k<=0))return T({type:"audio",src:getAbsoluteSrc(e.src),id:I,frame:E,volume:k,mediaFrame:S,playbackRate:e.playbackRate??1,toneFrequency:l??1,audioStartFrame:Math.max(0,-(R?.relativeFrom??0)),audioStreamIndex:b??0}),()=>P(I)},[e.muted,e.src,T,E,I,P,k,x,S,a,e.playbackRate,l,R?.relativeFrom,b]);let{src:M}=e,A=t||d;return((0,o.useLayoutEffect)(()=>{if(window.process?.env?.NODE_ENV==="test"||!A)return;let e=F("Loading <Html5Audio> duration with src="+M,{retries:g??void 0,timeoutInMilliseconds:y??void 0}),{current:t}=r,didLoad=()=>{t?.duration&&u(t.src,t.duration),V(e)};return t?.duration?(u(t.src,t.duration),V(e)):t?.addEventListener("loadedmetadata",didLoad,{once:!0}),()=>{t?.removeEventListener("loadedmetadata",didLoad),V(e)}},[M,u,A,g,y,V,F]),A)?(0,n.jsx)("audio",{ref:r,...C,onError:h}):null}),eu=(0,o.forwardRef)((e,t)=>{let r=(0,o.useContext)(X),{startFrom:i,endAt:a,trimBefore:s,trimAfter:u,name:l,stack:d,pauseWhenBuffering:m,showInTimeline:c,onError:f,...p}=e,{loop:h,...g}=e,{fps:y}=useVideoConfig(),w=useRemotionEnvironment(),{durations:v,setDurations:b}=(0,o.useContext)(K);if("string"!=typeof e.src)throw TypeError(`The \`<Html5Audio>\` tag requires a string for \`src\`, but got ${JSON.stringify(e.src)} instead.`);let C=usePreload(e.src),E=(0,o.useCallback)(e=>{console.log(e.currentTarget.error);let t=`Could not play audio with src ${C}: ${e.currentTarget.error}. See https://remotion.dev/docs/media-playback-error for help.`;if(h){if(f){f(Error(t));return}cancelRender(Error(t))}else f?.(Error(t)),console.warn(t)},[h,f,C]),x=(0,o.useCallback)((e,t)=>{b({type:"got-duration",durationInSeconds:t,src:e})},[b]),S=v[getAbsoluteSrc(C)]??v[getAbsoluteSrc(e.src)];validateMediaTrimProps({startFrom:i,endAt:a,trimBefore:s,trimAfter:u});let{trimBeforeValue:R,trimAfterValue:T}=resolveTrimProps({startFrom:i,endAt:a,trimBefore:s,trimAfter:u});return h&&void 0!==S?Number.isFinite(S)?(0,n.jsx)(Loop,{layout:"none",durationInFrames:calculateMediaDuration({trimAfter:T,mediaDurationInFrames:S*y,playbackRate:e.playbackRate??1,trimBefore:R}),children:(0,n.jsx)(eu,{...g,ref:t,_remotionInternalNativeLoopPassed:!0})}):(0,n.jsx)(eu,{...g,ref:t,_remotionInternalNativeLoopPassed:!0}):void 0!==R||void 0!==T?(0,n.jsx)(H,{layout:"none",from:0-(R??0),showInTimeline:!1,durationInFrames:T,name:l,children:(0,n.jsx)(eu,{_remotionInternalNeedsDurationCalculation:!!h,pauseWhenBuffering:m??!1,...p,ref:t})}):(validateMediaProps({playbackRate:e.playbackRate,volume:e.volume},"Html5Audio"),w.isRendering)?(0,n.jsx)(es,{onDuration:x,...e,ref:t,onNativeError:E,_remotionInternalNeedsDurationCalculation:!!h}):(0,n.jsx)(ea,{_remotionInternalNativeLoopPassed:e._remotionInternalNativeLoopPassed??!1,_remotionInternalStack:d??null,shouldPreMountAudioTags:null!==r&&r.numberOfAudioTags>0,...e,ref:t,onNativeError:E,onDuration:x,pauseWhenBuffering:m??!1,_remotionInternalNeedsDurationCalculation:!!h,showInTimeline:c??!0})});addSequenceStackTraces(eu);var el=(0,o.createContext)({folderName:null,parentName:null}),ed={transform:"rotate(90deg)"},em={color:"white",fontSize:14,fontFamily:"sans-serif"},ec={justifyContent:"center",alignItems:"center"},Loading=()=>(0,n.jsxs)(f,{style:ec,id:"remotion-comp-loading",children:[(0,n.jsx)("style",{type:"text/css",children:`
				@keyframes anim {
					from {
						opacity: 0
					}
					to {
						opacity: 1
					}
				}
				#remotion-comp-loading {
					animation: anim 2s;
					animation-fill-mode: forwards;
				}
			`}),(0,n.jsx)("svg",{width:40,height:40,viewBox:"-100 -100 400 400",style:ed,children:(0,n.jsx)("path",{fill:"#555",stroke:"#555",strokeWidth:"100",strokeLinejoin:"round",d:"M 2 172 a 196 100 0 0 0 195 5 A 196 240 0 0 0 100 2.259 A 196 240 0 0 0 2 172 z"})}),(0,n.jsxs)("p",{style:em,children:["Resolving ","<Suspense>","..."]})]}),ef=null,portalNode=()=>{if(!ef){if("undefined"==typeof document)throw Error("Tried to call an API that only works in the browser from outside the browser");(ef=document.createElement("div")).style.position="absolute",ef.style.top="0px",ef.style.left="0px",ef.style.right="0px",ef.style.bottom="0px",ef.style.width="100%",ef.style.height="100%",ef.style.display="flex",ef.style.flexDirection="column";let e=document.createElement("div");e.style.position="fixed",e.style.top="-999999px",e.appendChild(ef),document.body.appendChild(e)}return ef},useLazyComponent=({compProps:e,componentName:t,noSuspense:r})=>{let n=(0,o.useMemo)(()=>{if("component"in e){if("undefined"==typeof document||r)return e.component;if(void 0===e.component)throw Error(`A value of \`undefined\` was passed to the \`component\` prop. Check the value you are passing to the <${t}/> component.`);return e.component}if("lazyComponent"in e&&void 0!==e.lazyComponent){if(void 0===e.lazyComponent)throw Error(`A value of \`undefined\` was passed to the \`lazyComponent\` prop. Check the value you are passing to the <${t}/> component.`);return o.lazy(e.lazyComponent)}throw Error("You must pass either 'component' or 'lazyComponent'")},[e.component,e.lazyComponent]);return n},getRegex2=()=>/^([a-zA-Z0-9-\u4E00-\u9FFF])+$/g,isCompositionIdValid=e=>e.match(getRegex2()),validateCompositionId=e=>{if(!isCompositionIdValid(e))throw Error(`Composition id can only contain a-z, A-Z, 0-9, CJK characters and -. You passed ${e}`)},ep=`Composition ID must match ${String(getRegex2())}`,validateDefaultAndInputProps=(e,t,r)=>{if(e){if("object"!=typeof e)throw Error(`"${t}" must be an object, but you passed a value of type ${typeof e}`);if(Array.isArray(e))throw Error(`"${t}" must be an object, an array was passed ${r?`for composition "${r}"`:""}`)}},Fallback=()=>{let{continueRender:e,delayRender:t}=useDelayRender();return(0,o.useEffect)(()=>{let r=t("Waiting for Root component to unsuspend");return()=>e(r)},[e,t]),null},InnerComposition=({width:e,height:t,fps:r,durationInFrames:a,id:s,defaultProps:u,schema:l,...d})=>{let m=(0,o.useContext)(b),{registerComposition:c,unregisterComposition:f}=m,p=useVideo(),h=useLazyComponent({compProps:d,componentName:"Composition",noSuspense:!1}),g=useNonce(),y=useIsPlayer(),w=useRemotionEnvironment(),v=(0,o.useContext)(O);if("undefined"!=typeof window&&(window.remotion_seenCompositionIds=Array.from(new Set([...window.remotion_seenCompositionIds??[],s]))),v){if(y)throw Error("<Composition> was mounted inside the `component` that was passed to the <Player>. See https://remotion.dev/docs/wrong-composition-mount for help.");throw Error("<Composition> mounted inside another composition. See https://remotion.dev/docs/wrong-composition-mount for help.")}let{folderName:C,parentName:E}=(0,o.useContext)(el);(0,o.useEffect)(()=>{if(!s)throw Error("No id for composition passed.");return validateCompositionId(s),validateDefaultAndInputProps(u,"defaultProps",s),c({durationInFrames:a??void 0,fps:r??void 0,height:t??void 0,width:e??void 0,id:s,folderName:C,component:h,defaultProps:serializeThenDeserializeInStudio(u??{}),nonce:g,parentFolderName:E,schema:l??null,calculateMetadata:d.calculateMetadata??null}),()=>{f(s)}},[a,r,t,h,s,C,u,e,g,E,l,d.calculateMetadata,c,f]),(0,o.useEffect)(()=>{window.dispatchEvent(new CustomEvent(M,{detail:{resetUnsaved:s}}))},[u,s]);let x=useResolvedVideoConfig(s);return w.isStudio&&p&&p.component===h&&p.id===s?null===x||"success"!==x.type&&"success-and-refreshing"!==x.type?null:(0,i.createPortal)((0,n.jsx)(CanUseRemotionHooksProvider,{children:(0,n.jsx)(o.Suspense,{fallback:(0,n.jsx)(Loading,{}),children:(0,n.jsx)(h,{...x.result.props??{}})})}),portalNode()):w.isRendering&&p&&p.component===h&&p.id===s?null===x||"success"!==x.type&&"success-and-refreshing"!==x.type?null:(0,i.createPortal)((0,n.jsx)(CanUseRemotionHooksProvider,{children:(0,n.jsx)(o.Suspense,{fallback:(0,n.jsx)(Fallback,{}),children:(0,n.jsx)(h,{...x.result.props??{}})})}),portalNode()):null},Composition=e=>{let{onlyRenderComposition:t}=(0,o.useContext)(b);return t&&t!==e.id?null:(0,n.jsx)(InnerComposition,{...e})};function exponentialBackoff(e){return 1e3*2**(e-1)}(0,o.forwardRef)(({onLoad:e,onError:t,delayRenderRetries:r,delayRenderTimeoutInMilliseconds:i,...a},s)=>{let{delayRender:u,continueRender:l}=useDelayRender(),[d]=(0,o.useState)(()=>u(`Loading <IFrame> with source ${a.src}`,{retries:r??void 0,timeoutInMilliseconds:i??void 0})),m=(0,o.useCallback)(t=>{l(d),e?.(t)},[d,e,l]),c=(0,o.useCallback)(e=>{l(d),t?t(e):console.error("Error loading iframe:",e,"Handle the event using the onError() prop to make this message disappear.")},[d,t,l]);return(0,n.jsx)("iframe",{referrerPolicy:"strict-origin-when-cross-origin",...a,ref:s,onError:c,onLoad:m})});var eh=(0,o.forwardRef)(({onError:e,maxRetries:t=2,src:r,pauseWhenLoading:i,delayRenderRetries:a,delayRenderTimeoutInMilliseconds:s,onImageFrame:u,crossOrigin:l,...d},m)=>{let c=(0,o.useRef)(null),f=(0,o.useRef)({}),{delayPlayback:h}=useBufferState(),g=(0,o.useContext)(p);if(!r)throw Error('No "src" prop was passed to <Img>.');(0,o.useImperativeHandle)(m,()=>c.current,[]);let y=usePreload(r),w=(0,o.useCallback)(e=>{if(!c.current)return;let t=c.current.src;setTimeout(()=>{if(!c.current)return;let e=c.current?.src;e===t&&(c.current.removeAttribute("src"),c.current.setAttribute("src",e))},e)},[]),v=(0,o.useCallback)(r=>{if(f.current){if(f.current[c.current?.src]=(f.current[c.current?.src]??0)+1,e&&(f.current[c.current?.src]??0)>t){e(r);return}if((f.current[c.current?.src]??0)<=t){let e=exponentialBackoff(f.current[c.current?.src]??0);console.warn(`Could not load image with source ${c.current?.src}, retrying again in ${e}ms`),w(e);return}cancelRender("Error loading image with src: "+c.current?.src)}},[t,e,w]),{delayRender:b,continueRender:C}=useDelayRender();if("undefined"!=typeof window){let e=!!g?.premounting,t=!!g?.postmounting;(0,o.useLayoutEffect)(()=>{if(window.process?.env?.NODE_ENV==="test"){c.current&&(c.current.src=y);return}let{current:r}=c;if(!r)return;let o=b("Loading <Img> with src="+y,{retries:a??void 0,timeoutInMilliseconds:s??void 0}),n=!i||e||t?()=>{}:h().unblock,l=!1,onComplete=()=>{if(l){C(o);return}(f.current[c.current?.src]??0)>0&&(delete f.current[c.current?.src],console.info(`Retry successful - ${c.current?.src} is now loaded`)),r&&u?.(r),n(),C(o)};if(!c.current){onComplete();return}return r.src=y,r.decode().then(onComplete).catch(e=>{console.warn(e),r.complete?onComplete():r.addEventListener("load",onComplete)}),()=>{l=!0,r.removeEventListener("load",onComplete),n(),C(o)}},[y,h,a,s,i,e,t,u,C,b])}let E=getCrossOriginValue({crossOrigin:l,requestsVideoFrame:!1});return(0,n.jsx)("img",{...d,ref:c,crossOrigin:E,onError:v,decoding:"sync"})}),eg=o.createRef(),ey={};__export(ey,{makeDefaultPreviewCSS:()=>makeDefaultPreviewCSS,injectCSS:()=>injectCSS,OBJECTFIT_CONTAIN_CLASS_NAME:()=>ev});var ew={},injectCSS=e=>{if("undefined"==typeof document||ew[e])return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.appendChild(document.createTextNode(e)),t.prepend(r),ew[e]=!0},ev="__remotion_objectfitcontain",makeDefaultPreviewCSS=(e,t)=>e?`
    ${e} * {
      box-sizing: border-box;
    }
    ${e} *:-webkit-full-screen {
      width: 100%;
      height: 100%;
    }
    ${e} .${ev} {
      object-fit: contain;
    }
  `:`
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
	    background-color: ${t};
    }
    .${ev} {
      object-fit: contain;
    }
    `,eb="__remotion-studio-container",eC=o.createContext(null),eE=[],ex=(0,o.createContext)(null),MediaEnabledProvider=({children:e,videoEnabled:t,audioEnabled:r})=>{let i=(0,o.useMemo)(()=>({videoEnabled:t,audioEnabled:r}),[t,r]);return(0,n.jsx)(ex.Provider,{value:i,children:e})},getEnvVariables=()=>{if(getRemotionEnvironment().isRendering){let e=window.remotion_envVariables;return e?{...JSON.parse(e),NODE_ENV:"production"}:{}}return{NODE_ENV:"production"}},eS=o.createContext(null),eR=(0,o.createContext)({setSize:()=>{},size:{size:"auto",translation:{x:0,y:0}}}),getOffthreadVideoSource=({src:e,transparent:t,currentTime:r,toneMapped:o})=>`http://localhost:${window.remotion_proxyPort}/proxy?src=${encodeURIComponent(getAbsoluteSrc(e))}&time=${encodeURIComponent(Math.max(0,r))}&transparent=${String(t)}&toneMapped=${String(o)}`,OffthreadVideoForRendering=({onError:e,volume:t,playbackRate:r,src:i,muted:a,allowAmplificationDuringRender:s,transparent:u,toneMapped:l,toneFrequency:d,name:m,loopVolumeCurveBehavior:c,delayRenderRetries:f,delayRenderTimeoutInMilliseconds:h,onVideoFrame:g,crossOrigin:y,audioStreamIndex:w,...v})=>{let b=useTimelinePosition(),C=useCurrentFrame(),E=useFrameForVolumeProp(c),x=useUnsafeVideoConfig(),S=(0,o.useContext)(p),R=useMediaStartsAt(),{registerRenderAsset:T,unregisterRenderAsset:P}=(0,o.useContext)(z);if(!i)throw TypeError("No `src` was passed to <OffthreadVideo>.");let F=(0,o.useMemo)(()=>`offthreadvideo-${random(i)}-${S?.cumulatedFrom}-${S?.relativeFrom}-${S?.durationInFrames}`,[i,S?.cumulatedFrom,S?.relativeFrom,S?.durationInFrames]);if(!x)throw Error("No video config found");let V=evaluateVolume({volume:t,frame:E,mediaVolume:1});warnAboutTooHighVolume(V),(0,o.useEffect)(()=>{if(!i)throw Error("No src passed");if(window.remotion_audioEnabled&&!a&&!(V<=0))return T({type:"video",src:getAbsoluteSrc(i),id:F,frame:b,volume:V,mediaFrame:C,playbackRate:r,toneFrequency:d,audioStartFrame:Math.max(0,-(S?.relativeFrom??0)),audioStreamIndex:w}),()=>P(F)},[a,i,T,F,P,V,C,b,r,d,S?.relativeFrom,w]);let I=(0,o.useMemo)(()=>getExpectedMediaFrameUncorrected({frame:C,playbackRate:r||1,startFrom:-R})/x.fps,[C,R,r,x.fps]),k=(0,o.useMemo)(()=>getOffthreadVideoSource({src:i,currentTime:I,transparent:u,toneMapped:l}),[l,I,i,u]),[M,A]=(0,o.useState)(null),{delayRender:$,continueRender:N}=useDelayRender();(0,o.useLayoutEffect)(()=>{if(!window.remotion_videoEnabled)return;let t=[];A(null);let r=new AbortController,o=$(`Fetching ${k} from server`,{retries:f??void 0,timeoutInMilliseconds:h??void 0}),execute=async()=>{try{let e=await fetch(k,{signal:r.signal,cache:"no-store"});if(200!==e.status){if(500===e.status){let t=await e.json();if(t.error){let e=t.error.replace(/^Error: /,"");throw Error(e)}}throw Error(`Server returned status ${e.status} while fetching ${k}`)}let n=await e.blob(),i=URL.createObjectURL(n);t.push(()=>URL.revokeObjectURL(i)),A({src:i,handle:o})}catch(t){if(t.message.includes("aborted")||r.signal.aborted){N(o);return}t.message.includes("Failed to fetch")&&(t=Error(`Failed to fetch ${k}. This could be caused by Chrome rejecting the request because the disk space is low. Consider increasing the disk size of your environment.`,{cause:t})),e?e(t):cancelRender(t)}};return execute(),t.push(()=>{r.signal.aborted||r.abort()}),()=>{t.forEach(e=>e())}},[k,f,h,e,N,$]);let L=(0,o.useCallback)(()=>{e?e?.(Error("Failed to load image with src "+M)):cancelRender("Failed to load image with src "+M)},[M,e]),j=(0,o.useMemo)(()=>[ev,v.className].filter(truthy).join(" "),[v.className]),D=(0,o.useCallback)(e=>{g&&g(e)},[g]);return M&&window.remotion_videoEnabled?(N(M.handle),(0,n.jsx)(eh,{src:M.src,delayRenderRetries:f,delayRenderTimeoutInMilliseconds:h,onImageFrame:D,...v,onError:L,className:j})):null},useEmitVideoFrame=({ref:e,onVideoFrame:t})=>{(0,o.useEffect)(()=>{let{current:r}=e;if(!r||!t)return;let o=0,callback=()=>{e.current&&(t(e.current),o=e.current.requestVideoFrameCallback(callback))};return callback(),()=>{r.cancelVideoFrameCallback(o)}},[t,e])},eT=(0,o.forwardRef)((e,t)=>{let r=(0,o.useContext)(X);if(!r)throw Error("SharedAudioContext not found");let i=(0,o.useRef)(null),a=(0,o.useMemo)(()=>r.audioContext?makeSharedElementSourceNode({audioContext:r.audioContext,ref:i}):null,[r.audioContext]),{volume:s,muted:u,playbackRate:l,onlyWarnForMediaSeekingError:d,src:m,onDuration:f,acceptableTimeShift:h,acceptableTimeShiftInSeconds:y,toneFrequency:w,name:v,_remotionInternalNativeLoopPassed:b,_remotionInternalStack:C,style:E,pauseWhenBuffering:x,showInTimeline:S,loopVolumeCurveBehavior:R,onError:T,onAutoPlayError:P,onVideoFrame:F,crossOrigin:V,delayRenderRetries:I,delayRenderTimeoutInMilliseconds:k,allowAmplificationDuringRender:M,useWebAudioApi:A,audioStreamIndex:$,...N}=e,L=useFrameForVolumeProp(R??"repeat"),{fps:j,durationInFrames:D}=useVideoConfig(),_=(0,o.useContext)(p),{hidden:O}=(0,o.useContext)(g),B=useLogLevel(),U=useMountTime(),[H]=(0,o.useState)(()=>String(Math.random())),q=O[H]??!1;if(void 0!==h)throw Error("acceptableTimeShift has been removed. Use acceptableTimeShiftInSeconds instead.");let[z]=useMediaVolumeState(),[W]=useMediaMutedState(),J=evaluateVolume({frame:L,volume:s,mediaVolume:z});warnAboutTooHighVolume(J),useMediaInTimeline({volume:s,mediaVolume:z,mediaType:"video",src:m,playbackRate:e.playbackRate??1,displayName:v??null,id:H,stack:C,showInTimeline:S,premountDisplay:_?.premountDisplay??null,postmountDisplay:_?.postmountDisplay??null,loopDisplay:void 0}),useMediaPlayback({mediaRef:i,src:m,mediaType:"video",playbackRate:e.playbackRate??1,onlyWarnForMediaSeekingError:d,acceptableTimeshift:y??null,isPremounting:!!_?.premounting,isPostmounting:!!_?.postmounting,pauseWhenBuffering:x,onAutoPlayError:P??null}),useMediaTag({id:H,isPostmounting:!!_?.postmounting,isPremounting:!!_?.premounting,mediaRef:i,mediaType:"video",onAutoPlayError:P??null}),useVolume({logLevel:B,mediaRef:i,volume:J,source:a,shouldUseWebAudioApi:A??!1});let Y=_?_.relativeFrom:0,G=_?Math.min(_.durationInFrames,D):D,K=usePreload(m),Q=useAppendVideoFragment({actualSrc:K,actualFrom:Y,duration:G,fps:j});(0,o.useImperativeHandle)(t,()=>i.current,[]),(0,o.useState)(()=>playbackLogging({logLevel:B,message:`Mounting video with source = ${Q}, v=${c}, user agent=${"undefined"==typeof navigator?"server":navigator.userAgent}`,tag:"video",mountTime:U})),(0,o.useEffect)(()=>{let{current:e}=i;if(!e)return;let errorHandler=()=>{if(e.error){if(console.error("Error occurred in video",e?.error),T){let t=Error(`Code ${e.error.code}: ${e.error.message}`);T(t);return}throw Error(`The browser threw an error while playing the video ${m}: Code ${e.error.code} - ${e?.error?.message}. See https://remotion.dev/docs/media-playback-error for help. Pass an onError() prop to handle the error.`)}if(T){let e=Error(`The browser threw an error while playing the video ${m}`);T(e);return}throw Error("The browser threw an error while playing the video")};return e.addEventListener("error",errorHandler,{once:!0}),()=>{e.removeEventListener("error",errorHandler)}},[T,m]);let Z=(0,o.useRef)(f);Z.current=f,useEmitVideoFrame({ref:i,onVideoFrame:F}),(0,o.useEffect)(()=>{let{current:e}=i;if(!e)return;if(e.duration){Z.current?.(m,e.duration);return}let onLoadedMetadata=()=>{Z.current?.(m,e.duration)};return e.addEventListener("loadedmetadata",onLoadedMetadata),()=>{e.removeEventListener("loadedmetadata",onLoadedMetadata)}},[m]),(0,o.useEffect)(()=>{let{current:e}=i;e&&(isIosSafari()?e.preload="metadata":e.preload="auto")},[]);let ee=(0,o.useMemo)(()=>({...E,opacity:q?0:E?.opacity??1}),[q,E]),et=getCrossOriginValue({crossOrigin:V,requestsVideoFrame:!!F});return(0,n.jsx)("video",{ref:i,muted:u||W||q||J<=0,playsInline:!0,src:Q,loop:b,style:ee,disableRemotePlayback:!0,crossOrigin:et,...N})}),InnerOffthreadVideo=e=>{let{startFrom:t,endAt:r,trimBefore:i,trimAfter:a,name:s,pauseWhenBuffering:u,stack:l,showInTimeline:d,...m}=e,c=useRemotionEnvironment(),f=(0,o.useCallback)(()=>{},[]);if("string"!=typeof e.src)throw TypeError(`The \`<OffthreadVideo>\` tag requires a string for \`src\`, but got ${JSON.stringify(e.src)} instead.`);validateMediaTrimProps({startFrom:t,endAt:r,trimBefore:i,trimAfter:a});let{trimBeforeValue:p,trimAfterValue:h}=resolveTrimProps({startFrom:t,endAt:r,trimBefore:i,trimAfter:a});if(void 0!==p||void 0!==h)return(0,n.jsx)(H,{layout:"none",from:0-(p??0),showInTimeline:!1,durationInFrames:h,name:s,children:(0,n.jsx)(InnerOffthreadVideo,{pauseWhenBuffering:u??!1,...m,trimAfter:void 0,name:void 0,showInTimeline:d,trimBefore:void 0,stack:void 0,startFrom:void 0,endAt:void 0})});if(validateMediaProps(e,"Video"),c.isRendering)return(0,n.jsx)(OffthreadVideoForRendering,{pauseWhenBuffering:u??!1,...m,trimAfter:void 0,name:void 0,showInTimeline:d,trimBefore:void 0,stack:void 0,startFrom:void 0,endAt:void 0});let{transparent:g,toneMapped:y,onAutoPlayError:w,onVideoFrame:v,crossOrigin:b,delayRenderRetries:C,delayRenderTimeoutInMilliseconds:E,...x}=m;return(0,n.jsx)(eT,{_remotionInternalStack:l??null,onDuration:f,onlyWarnForMediaSeekingError:!0,pauseWhenBuffering:u??!1,showInTimeline:d??!0,onAutoPlayError:w??void 0,onVideoFrame:v??null,crossOrigin:b,...x,_remotionInternalNativeLoopPassed:!1})};function useRemotionContexts(){let e=o.useContext(v),t=o.useContext(_),r=o.useContext(D),n=o.useContext(p),i=o.useContext(P),a=o.useContext(O),s=o.useContext(J),u=o.useContext(I),l=o.useContext(z),d=o.useContext(h),m=o.useContext(er),c=o.useContext(L);return(0,o.useMemo)(()=>({compositionManagerCtx:e,timelineContext:t,setTimelineContext:r,sequenceContext:n,nonceContext:i,canUseRemotionHooksContext:a,preloadContext:s,resolveCompositionContext:u,renderAssetManagerContext:l,sequenceManagerContext:d,bufferManagerContext:m,logLevelContext:c}),[e,i,n,r,t,a,s,u,l,d,m,c])}addSequenceStackTraces(({src:e,acceptableTimeShiftInSeconds:t,allowAmplificationDuringRender:r,audioStreamIndex:o,className:i,crossOrigin:a,delayRenderRetries:s,delayRenderTimeoutInMilliseconds:u,id:l,loopVolumeCurveBehavior:d,muted:m,name:c,onAutoPlayError:f,onError:p,onVideoFrame:h,pauseWhenBuffering:g,playbackRate:y,showInTimeline:w,style:v,toneFrequency:b,toneMapped:C,transparent:E,trimAfter:x,trimBefore:S,useWebAudioApi:R,volume:T,_remotionInternalNativeLoopPassed:P,endAt:F,stack:V,startFrom:I,imageFormat:k})=>{if(k)throw TypeError("The `<OffthreadVideo>` tag does no longer accept `imageFormat`. Use the `transparent` prop if you want to render a transparent video.");return(0,n.jsx)(InnerOffthreadVideo,{acceptableTimeShiftInSeconds:t,allowAmplificationDuringRender:r??!0,audioStreamIndex:o??0,className:i,crossOrigin:a,delayRenderRetries:s,delayRenderTimeoutInMilliseconds:u,id:l,loopVolumeCurveBehavior:d??"repeat",muted:m??!1,name:c,onAutoPlayError:f??null,onError:p,onVideoFrame:h,pauseWhenBuffering:g??!0,playbackRate:y??1,toneFrequency:b??1,showInTimeline:w??!0,src:e,stack:V,startFrom:I,_remotionInternalNativeLoopPassed:P??!1,endAt:F,style:v,toneMapped:C??!0,transparent:E??!1,trimAfter:x,trimBefore:S,useWebAudioApi:R??!1,volume:T})});var eP={MaxMediaCacheSizeContext:eC,useUnsafeVideoConfig,useFrameForVolumeProp,useTimelinePosition,evaluateVolume,getAbsoluteSrc,Timeline:y,validateMediaTrimProps,validateMediaProps,resolveTrimProps,VideoForPreview:eT,CompositionManager:v,CompositionSetters:b,SequenceManager:h,SequenceVisibilityToggleContext:g,RemotionRootContexts:({children:t,numberOfAudioTags:r,logLevel:i,audioLatencyHint:a,videoEnabled:s,audioEnabled:u,frameState:l})=>{let[d,m]=(0,o.useState)(0),[c,f]=(0,o.useState)(0),p=(0,o.useMemo)(()=>{let e=0;return{getNonce:()=>e++,fastRefreshes:d,manualRefreshes:c}},[d,c]),h=(0,o.useMemo)(()=>({increaseManualRefreshes:()=>{f(e=>e+1)}}),[]);(0,o.useEffect)(()=>{e.hot&&e.hot.addStatusHandler(e=>{"idle"===e&&m(e=>e+1)})},[]);let g=(0,o.useMemo)(()=>({logLevel:i,mountTime:Date.now()}),[i]);return(0,n.jsx)(L.Provider,{value:g,children:(0,n.jsx)(P.Provider,{value:p,children:(0,n.jsx)(F.Provider,{value:h,children:(0,n.jsx)(TimelineContextProvider,{frameState:l,children:(0,n.jsx)(MediaEnabledProvider,{videoEnabled:s,audioEnabled:u,children:(0,n.jsx)(EditorPropsProvider,{children:(0,n.jsx)(PrefetchProvider,{children:(0,n.jsx)(SequenceManagerProvider,{children:(0,n.jsx)(SharedAudioContextProvider,{numberOfAudioTags:r,audioLatencyHint:a,children:(0,n.jsx)(DurationsContextProvider,{children:(0,n.jsx)(BufferingProvider,{children:t})})})})})})})})})})})},CompositionManagerProvider:({children:e,onlyRenderComposition:t,currentCompositionMetadata:r,initialCompositions:i,initialCanvasContent:a})=>{let[s,u]=(0,o.useState)([]),[l,d]=(0,o.useState)(a),[m,c]=(0,o.useState)(i),f=(0,o.useRef)(m),p=(0,o.useCallback)(e=>{c(t=>{let r=e(t);return f.current=r,r})},[]),h=(0,o.useCallback)(e=>{p(t=>{if(t.find(t=>t.id===e.id))throw Error(`Multiple composition with id ${e.id} are registered.`);let r=[...t,e].slice().sort((e,t)=>e.nonce-t.nonce);return r})},[p]),g=(0,o.useCallback)(e=>{c(t=>t.filter(t=>t.id!==e))},[]),y=(0,o.useCallback)((e,t)=>{u(r=>[...r,{name:e,parent:t}])},[]),w=(0,o.useCallback)((e,t)=>{u(r=>r.filter(r=>!(r.name===e&&r.parent===t)))},[]);(0,o.useImperativeHandle)(eg,()=>({getCompositions:()=>f.current}),[]);let C=(0,o.useCallback)((e,t)=>{c(r=>{let o=r.map(r=>r.id===e?{...r,defaultProps:t}:r);return o})},[]),E=(0,o.useMemo)(()=>({registerComposition:h,unregisterComposition:g,registerFolder:y,unregisterFolder:w,setCanvasContent:d,updateCompositionDefaultProps:C,onlyRenderComposition:t}),[h,y,g,w,C,t]),x=(0,o.useMemo)(()=>({compositions:m,folders:s,currentCompositionMetadata:r,canvasContent:l}),[m,s,r,l]);return(0,n.jsx)(v.Provider,{value:x,children:(0,n.jsx)(b.Provider,{value:E,children:e})})},useVideo,getRoot:()=>null,useMediaVolumeState,useMediaMutedState,useMediaInTimeline,useLazyComponent,truthy,SequenceContext:p,useRemotionContexts,RemotionContextProvider:e=>{let{children:t,contexts:r}=e;return(0,n.jsx)(L.Provider,{value:r.logLevelContext,children:(0,n.jsx)(O.Provider,{value:r.canUseRemotionHooksContext,children:(0,n.jsx)(P.Provider,{value:r.nonceContext,children:(0,n.jsx)(J.Provider,{value:r.preloadContext,children:(0,n.jsx)(v.Provider,{value:r.compositionManagerCtx,children:(0,n.jsx)(h.Provider,{value:r.sequenceManagerContext,children:(0,n.jsx)(z.Provider,{value:r.renderAssetManagerContext,children:(0,n.jsx)(I.Provider,{value:r.resolveCompositionContext,children:(0,n.jsx)(_.Provider,{value:r.timelineContext,children:(0,n.jsx)(D.Provider,{value:r.setTimelineContext,children:(0,n.jsx)(p.Provider,{value:r.sequenceContext,children:(0,n.jsx)(er.Provider,{value:r.bufferManagerContext,children:t})})})})})})})})})})})})},CSSUtils:ey,setupEnvVariables:()=>{let e=getEnvVariables();window.process||(window.process={}),window.process.env||(window.process.env={}),Object.keys(e).forEach(t=>{window.process.env[t]=e[t]})},MediaVolumeContext:en,SetMediaVolumeContext:ei,getRemotionEnvironment,SharedAudioContext:X,SharedAudioContextProvider,invalidCompositionErrorMessage:ep,calculateMediaDuration,isCompositionIdValid,getPreviewDomElement:()=>document.getElementById(eb),compositionsRef:eg,portalNode,waitForRoot:e=>(eE.push(e),()=>{eE=eE.filter(t=>t!==e)}),SetTimelineContext:D,CanUseRemotionHooksProvider,CanUseRemotionHooks:O,PrefetchProvider,DurationsContextProvider,IsPlayerContextProvider:({children:e})=>(0,n.jsx)(m.Provider,{value:!0,children:e}),useIsPlayer,EditorPropsProvider,EditorPropsContext:C,usePreload,NonceContext:P,SetNonceContext:F,resolveVideoConfig,useResolvedVideoConfig,resolveCompositionsRef:k,ResolveCompositionConfigInStudio:({children:e})=>{let[t,r]=(0,o.useState)(null),{compositions:i,canvasContent:a,currentCompositionMetadata:s}=(0,o.useContext)(v),{fastRefreshes:u,manualRefreshes:l}=(0,o.useContext)(P),d=(0,o.useMemo)(()=>i.find(e=>a&&"composition"===a.type&&a.compositionId===e.id),[a,i]),m=i.find(e=>e.id===t),{props:c}=(0,o.useContext)(C),f=useRemotionEnvironment(),p=(0,o.useMemo)(()=>"undefined"==typeof window||f.isPlayer?{}:getInputProps()??{},[f.isPlayer]),[h,g]=(0,o.useState)({}),y=(0,o.useMemo)(()=>d?c[d.id]??{}:{},[c,d]),w=(0,o.useMemo)(()=>m?c[m.id]??{}:{},[c,m]),b=!!s,E=(0,o.useCallback)(({calculateMetadata:e,combinedProps:t,compositionDurationInFrames:r,compositionFps:o,compositionHeight:n,compositionId:i,compositionWidth:a,defaultProps:s})=>{let u=new AbortController;if(b)return u;let{signal:l}=u,d=resolveVideoConfigOrCatch({compositionId:i,calculateMetadata:e,inputProps:t,signal:l,defaultProps:s,compositionDurationInFrames:r,compositionFps:o,compositionHeight:n,compositionWidth:a});if("error"===d.type)return g(e=>({...e,[i]:{type:"error",error:d.error}})),u;let m=d.result;return"object"==typeof m&&"then"in m?(g(e=>{let t=e[i];return t?.type==="success"||t?.type==="success-and-refreshing"?{...e,[i]:{type:"success-and-refreshing",result:t.result}}:{...e,[i]:{type:"loading"}}}),m.then(e=>{u.signal.aborted||g(t=>({...t,[i]:{type:"success",result:e}}))}).catch(e=>{u.signal.aborted||g(t=>({...t,[i]:{type:"error",error:e}}))})):g(e=>({...e,[i]:{type:"success",result:m}})),u},[b]),x=a?.type==="composition"?a.compositionId:null;(0,o.useImperativeHandle)(k,()=>({setCurrentRenderModalComposition:e=>{r(e)},reloadCurrentlySelectedComposition:()=>{if(!x)return;let e=i.find(e=>e.id===x);if(!e)throw Error(`Could not find composition with id ${x}`);let t=c[x]??{},r={...e.defaultProps??{},...t??{}},o={...r,...p??{}};E({defaultProps:r,calculateMetadata:e.calculateMetadata,combinedProps:o,compositionDurationInFrames:e.durationInFrames??null,compositionFps:e.fps??null,compositionHeight:e.height??null,compositionWidth:e.width??null,compositionId:e.id})}}),[c,i,x,E,p]);let S=d?.id===m?.id,R=(0,o.useMemo)(()=>({...d?.defaultProps??{},...y??{}}),[d?.defaultProps,y]),T=(0,o.useMemo)(()=>({...R,...p??{}}),[R,p]),F=d&&needsResolution(d),V="undefined"!=typeof window&&window.remotion_ignoreFastRefreshUpdate&&u<=window.remotion_ignoreFastRefreshUpdate;(0,o.useEffect)(()=>{if(!V&&F){let e=E({calculateMetadata:d.calculateMetadata,combinedProps:T,compositionDurationInFrames:d.durationInFrames??null,compositionFps:d.fps??null,compositionHeight:d.height??null,compositionWidth:d.width??null,defaultProps:R,compositionId:d.id});return()=>{e.abort()}}},[F,R,E,T,d?.calculateMetadata,d?.durationInFrames,d?.fps,d?.height,d?.id,d?.width,V]),(0,o.useEffect)(()=>{if(m&&!S){let e={...m.defaultProps??{},...w??{},...p??{}},t=E({calculateMetadata:m.calculateMetadata,compositionDurationInFrames:m.durationInFrames??null,compositionFps:m.fps??null,compositionHeight:m.height??null,compositionId:m.id,compositionWidth:m.width??null,defaultProps:R,combinedProps:e});return()=>{t.abort()}}},[R,E,p,S,m,w]);let M=(0,o.useMemo)(()=>{let e=i.filter(e=>null===e.calculateMetadata);return{...h,...e.reduce((e,t)=>({...e,[t.id]:{type:"success",result:{...t,defaultProps:t.defaultProps??{}}}}),{})}},[i,h]);return(0,n.jsx)(I.Provider,{value:M,children:e})},REMOTION_STUDIO_CONTAINER_ELEMENT:eb,RenderAssetManager:z,persistCurrentFrame,useTimelineSetFrame,isIosSafari,WATCH_REMOTION_STATIC_FILES:"remotion_staticFilesChanged",addSequenceStackTraces,useMediaStartsAt,BufferingProvider,BufferingContextReact:er,enableSequenceStackTraces,CurrentScaleContext:eS,PreviewSizeContext:eR,calculateScale:({canvasSize:e,compositionHeight:t,compositionWidth:r,previewSize:o})=>{let n=e.height/t,i=e.width/r,a=Math.min(n,i);return"auto"===o?0===a?1:a:Number(o)},editorPropsProviderRef:E,PROPS_UPDATED_EXTERNALLY:M,validateRenderAsset,Log:$,LogLevelContext:L,useLogLevel,playbackLogging,timeValueRef:x,compositionSelectorRef:(0,o.createRef)(),RemotionEnvironmentContext:w,warnAboutTooHighVolume,AudioForPreview:ea,OBJECTFIT_CONTAIN_CLASS_NAME:ev,InnerOffthreadVideo,useBasicMediaInTimeline,getInputPropsOverride,setInputPropsOverride:e=>{if("undefined"!=typeof localStorage){if(null===e){localStorage.removeItem(getKey());return}localStorage.setItem(getKey(),JSON.stringify(e))}},useVideoEnabled:()=>{let e=(0,o.useContext)(ex);return e&&null!==e.videoEnabled?e.videoEnabled:window.remotion_videoEnabled},useAudioEnabled:()=>{let e=(0,o.useContext)(ex);return e&&null!==e.audioEnabled?e.audioEnabled:window.remotion_audioEnabled},useIsPlayerBuffering,TimelinePosition:y,DelayRenderContextType:j,TimelineContext:_,RenderAssetManagerProvider:({children:e,collectAssets:t})=>{let[r,a]=(0,o.useState)([]),s=(0,o.useCallback)(e=>{validateRenderAsset(e),a(t=>[...t,e])},[]);t&&(0,o.useImperativeHandle)(t,()=>({collectAssets:()=>((0,i.flushSync)(()=>{a([])}),r)}),[r]);let u=(0,o.useCallback)(e=>{a(t=>t.filter(t=>t.id!==e))},[]);(0,o.useLayoutEffect)(()=>{"undefined"!=typeof window&&(window.remotion_collectAssets=()=>(a([]),r))},[r]);let l=(0,o.useMemo)(()=>({registerRenderAsset:s,unregisterRenderAsset:u,renderAssets:r}),[r,s,u]);return(0,n.jsx)(z.Provider,{value:l,children:e})}},eF=(0,o.createContext)(!1),IsNotInsideSeriesProvider=({children:e})=>(0,n.jsx)(eF.Provider,{value:!1,children:e}),useRequireToBeInsideSeries=()=>{let e=o.useContext(eF);if(!e)throw Error("This component must be inside a <Series /> component.")};addSequenceStackTraces((0,o.forwardRef)(({children:e},t)=>(useRequireToBeInsideSeries(),(0,n.jsx)(IsNotInsideSeriesProvider,{children:e}))));var roundTo6Commas=e=>Math.round(1e5*e)/1e5,seekToTime=({element:e,desiredTime:t,logLevel:r,mountTime:o})=>{let n;if(isApproximatelyTheSame(e.currentTime,t))return{wait:Promise.resolve(t),cancel:()=>{}};seek({logLevel:r,mediaRef:e,time:t,why:"Seeking during rendering",mountTime:o});let i=null,a=new Promise(t=>{n=e.requestVideoFrameCallback((e,r)=>{let o=r.expectedDisplayTime-e;if(o<=0){t(r.mediaTime);return}setTimeout(()=>{t(r.mediaTime)},o+150)})}),s=new Promise(t=>{let onDone=()=>{t()};e.addEventListener("seeked",onDone,{once:!0}),i=()=>{e.removeEventListener("seeked",onDone)}});return{wait:Promise.all([a,s]).then(([e])=>e),cancel:()=>{i?.(),e.cancelVideoFrameCallback(n)}}},seekToTimeMultipleUntilRight=({element:e,desiredTime:t,fps:r,logLevel:o,mountTime:n})=>{let i=1/r/2,currentCancel=()=>{};if(Number.isFinite(e.duration)&&e.currentTime>=e.duration&&t>=e.duration)return{prom:Promise.resolve(),cancel:()=>{}};let a=new Promise((r,a)=>{let s=seekToTime({element:e,desiredTime:t+i,logLevel:o,mountTime:n});s.wait.then(s=>{if(Math.abs(t-s)<=i)return r();let u=seekToTime({element:e,desiredTime:s+i*(t>s?1:-1),logLevel:o,mountTime:n});currentCancel=u.cancel,u.wait.then(s=>{if(roundTo6Commas(Math.abs(t-s))<=roundTo6Commas(i))return r();let u=seekToTime({element:e,desiredTime:t+i,logLevel:o,mountTime:n});return currentCancel=u.cancel,u.wait.then(()=>{r()}).catch(e=>{a(e)})}).catch(e=>{a(e)})}),currentCancel=s.cancel});return{prom:a,cancel:()=>{currentCancel()}}},eV=(0,o.forwardRef)(({onError:e,volume:t,allowAmplificationDuringRender:r,playbackRate:i,onDuration:a,toneFrequency:s,name:u,acceptableTimeShiftInSeconds:l,delayRenderRetries:d,delayRenderTimeoutInMilliseconds:m,loopVolumeCurveBehavior:c,audioStreamIndex:f,onVideoFrame:h,...g},y)=>{let w=useTimelinePosition(),v=useCurrentFrame(),b=useFrameForVolumeProp(c??"repeat"),C=useUnsafeVideoConfig(),E=(0,o.useRef)(null),x=(0,o.useContext)(p),S=useMediaStartsAt(),R=useRemotionEnvironment(),T=useLogLevel(),P=useMountTime(),{delayRender:F,continueRender:V}=useDelayRender(),{registerRenderAsset:I,unregisterRenderAsset:k}=(0,o.useContext)(z),M=(0,o.useMemo)(()=>`video-${random(g.src??"")}-${x?.cumulatedFrom}-${x?.relativeFrom}-${x?.durationInFrames}`,[g.src,x?.cumulatedFrom,x?.relativeFrom,x?.durationInFrames]);if(!C)throw Error("No video config found");let A=evaluateVolume({volume:t,frame:b,mediaVolume:1});warnAboutTooHighVolume(A),(0,o.useEffect)(()=>{if(!g.src)throw Error("No src passed");if(!g.muted&&!(A<=0)&&window.remotion_audioEnabled)return I({type:"video",src:getAbsoluteSrc(g.src),id:M,frame:w,volume:A,mediaFrame:v,playbackRate:i??1,toneFrequency:s??1,audioStartFrame:Math.max(0,-(x?.relativeFrom??0)),audioStreamIndex:f??0}),()=>k(M)},[g.muted,g.src,I,M,k,A,v,w,i,s,x?.relativeFrom,f]),(0,o.useImperativeHandle)(y,()=>E.current,[]),(0,o.useEffect)(()=>{if(!window.remotion_videoEnabled)return;let{current:t}=E;if(!t)return;let r=getMediaTime({frame:v,playbackRate:i||1,startFrom:-S,fps:C.fps}),o=F(`Rendering <Html5Video /> with src="${g.src}" at time ${r}`,{retries:d??void 0,timeoutInMilliseconds:m??void 0});if(window.process?.env?.NODE_ENV==="test"){V(o);return}if(isApproximatelyTheSame(t.currentTime,r)){if(t.readyState>=2){V(o);return}let loadedDataHandler=()=>{V(o)};return t.addEventListener("loadeddata",loadedDataHandler,{once:!0}),()=>{t.removeEventListener("loadeddata",loadedDataHandler)}}let endedHandler=()=>{V(o)},n=seekToTimeMultipleUntilRight({element:t,desiredTime:r,fps:C.fps,logLevel:T,mountTime:P});n.prom.then(()=>{V(o)}),t.addEventListener("ended",endedHandler,{once:!0});let errorHandler=()=>{if(t?.error){if(console.error("Error occurred in video",t?.error),e)return;throw Error(`The browser threw an error while playing the video ${g.src}: Code ${t.error.code} - ${t?.error?.message}. See https://remotion.dev/docs/media-playback-error for help. Pass an onError() prop to handle the error.`)}throw Error("The browser threw an error")};return t.addEventListener("error",errorHandler,{once:!0}),()=>{n.cancel(),t.removeEventListener("ended",endedHandler),t.removeEventListener("error",errorHandler),V(o)}},[b,g.src,i,C.fps,v,S,e,d,m,T,P,V,F]);let{src:$}=g;return R.isRendering&&(0,o.useLayoutEffect)(()=>{if(window.process?.env?.NODE_ENV==="test")return;let e=F("Loading <Html5Video> duration with src="+$,{retries:d??void 0,timeoutInMilliseconds:m??void 0}),{current:t}=E,didLoad=()=>{t?.duration&&a($,t.duration),V(e)};return t?.duration?(a($,t.duration),V(e)):t?.addEventListener("loadedmetadata",didLoad,{once:!0}),()=>{t?.removeEventListener("loadedmetadata",didLoad),V(e)}},[$,a,d,m,V,F]),(0,n.jsx)("video",{ref:E,disableRemotePlayback:!0,...g})}),eI=(0,o.forwardRef)((e,t)=>{let{startFrom:r,endAt:i,trimBefore:a,trimAfter:s,name:u,pauseWhenBuffering:l,stack:d,_remotionInternalNativeLoopPassed:m,showInTimeline:c,onAutoPlayError:f,...p}=e,{loop:h,...g}=e,{fps:y}=useVideoConfig(),w=useRemotionEnvironment(),{durations:v,setDurations:b}=(0,o.useContext)(K);if("string"==typeof t)throw Error("string refs are not supported");if("string"!=typeof e.src)throw TypeError(`The \`<Html5Video>\` tag requires a string for \`src\`, but got ${JSON.stringify(e.src)} instead.`);let C=usePreload(e.src),E=(0,o.useCallback)((e,t)=>{b({type:"got-duration",durationInSeconds:t,src:e})},[b]),x=(0,o.useCallback)(()=>{},[]),S=v[getAbsoluteSrc(C)]??v[getAbsoluteSrc(e.src)];validateMediaTrimProps({startFrom:r,endAt:i,trimBefore:a,trimAfter:s});let{trimBeforeValue:R,trimAfterValue:T}=resolveTrimProps({startFrom:r,endAt:i,trimBefore:a,trimAfter:s});return h&&void 0!==S?Number.isFinite(S)?(0,n.jsx)(Loop,{durationInFrames:calculateMediaDuration({trimAfter:T,mediaDurationInFrames:S*y,playbackRate:e.playbackRate??1,trimBefore:R}),layout:"none",name:u,children:(0,n.jsx)(eI,{...g,ref:t,_remotionInternalNativeLoopPassed:!0})}):(0,n.jsx)(eI,{...g,ref:t,_remotionInternalNativeLoopPassed:!0}):void 0!==R||void 0!==T?(0,n.jsx)(H,{layout:"none",from:0-(R??0),showInTimeline:!1,durationInFrames:T,name:u,children:(0,n.jsx)(eI,{pauseWhenBuffering:l??!1,...p,ref:t})}):(validateMediaProps({playbackRate:e.playbackRate,volume:e.volume},"Html5Video"),w.isRendering)?(0,n.jsx)(eV,{onDuration:E,onVideoFrame:x??null,...p,ref:t}):(0,n.jsx)(eT,{onlyWarnForMediaSeekingError:!1,...p,ref:t,onVideoFrame:null,pauseWhenBuffering:l??!1,onDuration:E,_remotionInternalStack:d??null,_remotionInternalNativeLoopPassed:m??!1,showInTimeline:c??!0,onAutoPlayError:f??void 0})});addSequenceStackTraces(eI);var ek=eI;(()=>{if("undefined"==typeof globalThis)return;let set=()=>{globalThis.remotion_imported=c,"undefined"!=typeof window&&(window.remotion_imported=c)},e=globalThis.remotion_imported||"undefined"!=typeof window&&window.remotion_imported;if(e){if(e===c)return;if("string"==typeof e&&e.includes("webcodecs")){set();return}throw TypeError(`\uD83D\uDEA8 Multiple versions of Remotion detected: ${[c,"string"==typeof e?e:"an older version"].filter(truthy).join(" and ")}. This will cause things to break in an unexpected way.
Check that all your Remotion packages are on the same version. If your dependencies depend on Remotion, make them peer dependencies. You can also run \`npx remotion versions\` from your terminal to see which versions are mismatching.`)}set()})();var eM=new Proxy({},{get:(e,t)=>"Bundling"===t||"Rendering"===t||"Log"===t||"Puppeteer"===t||"Output"===t?eM:()=>{console.warn("  The CLI configuration has been extracted from Remotion Core."),console.warn("Update the import from the config file:"),console.warn(),console.warn("- Delete:"),console.warn('import {Config} from "remotion";'),console.warn("+ Replace:"),console.warn('import {Config} from "@remotion/cli/config";'),console.warn(),console.warn("For more information, see https://www.remotion.dev/docs/4-0-migration."),a.exit(1)}});addSequenceStackTraces(H)}}]);