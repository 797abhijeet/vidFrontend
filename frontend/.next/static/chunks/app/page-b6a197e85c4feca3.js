(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7118:function(e,t,o){Promise.resolve().then(o.bind(o,242))},242:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return Home}});var n=o(7437),i=o(2265),r=o(4829);function VideoUploader(e){let{onUpload:t}=e,handleUpload=async e=>{var o;let n=null===(o=e.target.files)||void 0===o?void 0:o[0];if(!n)return;let i=new FormData;i.append("video",n);try{let e=await r.Z.post("http://localhost:5000/upload",i,{headers:{"Content-Type":"multipart/form-data"}});t(e.data.path)}catch(e){alert("Video upload failed"),console.error(e)}};return(0,n.jsx)("div",{children:(0,n.jsx)("input",{type:"file",accept:"video/*",onChange:handleUpload})})}function CaptionControls(e){let{videoPath:t,onCaptions:o,onStyleChange:i,onStart:a,onError:l}=e,generate=async()=>{try{a();let e=await r.Z.post("http://localhost:5000/captions",{videoPath:t});o(e.data.captions)}catch(t){var e,n;l((null==t?void 0:null===(n=t.response)||void 0===n?void 0:null===(e=n.data)||void 0===e?void 0:e.error)||"Failed to generate captions")}};return(0,n.jsxs)("div",{style:{marginTop:20},children:[(0,n.jsx)("button",{onClick:generate,children:"Auto-generate captions"}),(0,n.jsxs)("select",{style:{marginLeft:10},onChange:e=>i(e.target.value),children:[(0,n.jsx)("option",{value:"bottom",children:"Bottom"}),(0,n.jsx)("option",{value:"top",children:"Top"})]})]})}var a=o(1447),l=o(3255);(0,o(3091).mx)();let CaptionedVideo=e=>{let{videoPath:t,captions:o,style:i}=e,r=(0,l.ND)(),a=r/30,s=o.find(e=>a>=e.start&&a<=e.end);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.nk,{src:t}),s&&(0,n.jsx)("div",{style:{position:"absolute",bottom:"bottom"===i?80:void 0,top:"top"===i?20:void 0,width:"100%",textAlign:"center",fontFamily:"Noto Sans Devanagari, Noto Sans, sans-serif",fontSize:42,color:"white",textShadow:"2px 2px 6px black"},children:s.text})]})};function VideoPreview(e){let{videoUrl:t,captions:o,style:i}=e;return(0,n.jsx)(a.J5,{component:CaptionedVideo,inputProps:{videoPath:t,captions:o,style:i},durationInFrames:300,fps:30,compositionWidth:1280,compositionHeight:720,controls:!0})}function Home(){let[e,t]=(0,i.useState)(""),[o,r]=(0,i.useState)([]),[a,l]=(0,i.useState)("bottom"),[s,d]=(0,i.useState)("idle"),[c,p]=(0,i.useState)(""),[u,h]=(0,i.useState)("");return(0,n.jsxs)("main",{style:{padding:20},children:[(0,n.jsx)("h1",{children:"\uD83C\uDFAC Remotion Captioning Platform"}),(0,n.jsx)(VideoUploader,{onUpload:e=>{t(e),r([]),h(""),d("uploading")}}),"uploading"===s&&(0,n.jsx)("p",{style:{color:"blue"},children:"✅ Video uploaded. Ready for captions."}),e&&(0,n.jsx)(CaptionControls,{videoPath:e,onStyleChange:l,onCaptions:e=>{r(e),d("ready")},onStart:()=>{d("generating"),p("")},onError:e=>{d("error"),p(e)}}),"generating"===s&&(0,n.jsx)("p",{style:{color:"orange"},children:"⏳ Generating captions… please wait"}),"rendering"===s&&(0,n.jsx)("p",{style:{color:"purple"},children:"\uD83C\uDF9E️ Rendering final video… please wait"}),"error"===s&&(0,n.jsxs)("p",{style:{color:"red"},children:["❌ ",c]}),e&&o.length>0&&"ready"===s&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h3",{children:"\uD83C\uDFA5 Preview"}),(0,n.jsx)(VideoPreview,{videoUrl:e,captions:o,style:a}),(0,n.jsx)("button",{style:{marginTop:20},onClick:async()=>{try{d("rendering");let e=await fetch("http://localhost:5000/render",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({captions:o,style:a})});if(!e.ok){let t=await e.json();throw Error(t.error||"Render failed")}let t=await e.json(),n=t.output.split("outputs/")[1];h("http://localhost:5000/outputs/".concat(n)),d("done")}catch(e){d("error"),p(e.message)}},children:"\uD83C\uDF9E️ Render Final Video"})]}),"done"===s&&u&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h3",{children:"✅ Final Output Video"}),(0,n.jsx)("video",{src:u,controls:!0,style:{width:"100%",maxWidth:800}}),(0,n.jsx)("p",{children:(0,n.jsx)("a",{href:u,download:!0,children:"⬇️ Download video"})})]})]})}}},function(e){e.O(0,[410,726,971,472,744],function(){return e(e.s=7118)}),_N_E=e.O()}]);